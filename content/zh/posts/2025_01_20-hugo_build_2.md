---
title: "Hugoåšå®¢æ­å»º_é…ç½® ğŸš€"
date: 2025-01-20T20:42:23+08:00
lastmod: 2025-01-21T20:42:23+08:00
draft: false

# ä½œè€…
author: "Downmars"

# åˆ†ç±»å’Œæ ‡ç­¾
tags: ["Hugo", "configuration"]
categories: [""]

# æè¿°
description: "" # SEO æœç´¢ä¼˜åŒ–
summary: ""    # åˆ—è¡¨é¡µå±•ç¤ºçš„ç®€çŸ­æè¿°

# å¯é€‰ï¼šæƒé‡ï¼ˆç”¨äºç½®é¡¶æ–‡ç« ï¼‰
weight: null

license: "CC-BY-NC-4.0"  # å¯¹åº” data/licenses.yml ä¸­çš„ keys

# å¯é€‰ï¼šå°é¢å›¾ç‰‡
cover:
    image: "images/posts/2025_01_20-hugo_build_2/plsn_1.jpg"
    alt: "Sonny_boy"
    caption: ""
---

{{< quote >}}  
å¦‚ä½•æ„å»ºæˆ‘çš„hugoåšå®¢-è¿™æ˜¯ä¸€ä¸ªç³»åˆ—  
- [Hugoåšå®¢æ­å»º_åŸºç¡€ ğŸ˜Š](../2025_01_19-hugo_build_1)
- [Hugoåšå®¢æ­å»º_é…ç½® ğŸš€](.):point_left: ä½ åœ¨è¿™é‡Œ
- [Hugoåšå®¢æ­å»º_ä¸»é¢˜ä¼˜åŒ– ğŸ¤¤](../2025_02_05-hugo_build_3)
{{< /quote >}}


## å‰è¨€
åœ¨ä¸Šä¸€ç¯‡æ–‡ç« â€œ[Hugoåšå®¢æ­å»º_åŸºç¡€ ğŸ˜Š](../2025_01_19-hugo_build_1)â€ä¸­ï¼Œæˆ‘ä»¬è®²è§£äº†å¦‚ä½•æ­å»ºä¸€ä¸ªHugoåšå®¢ï¼Œè¿™ä¸€ç¯‡æ–‡ç« å°†ä¼šè®²è§£å¦‚ä½•é…ç½®Hugoåšå®¢ã€‚

## åŸºç¡€é…ç½®æ–‡ä»¶
æˆ‘ä»¬æ›¾ç»åœ¨`hugo.yaml`ä¸­é…ç½®æœ¬åšå®¢çš„ä¸€äº›åŠŸèƒ½ï¼Œæˆ‘ä»¬å°†ä¼šåœ¨è¿™ä¸€éƒ¨åˆ†è¡¥å……å’Œè®¨è®ºå‰©ä½™çš„é…ç½®ï¼š
{{< collapse summary="hugo.yaml" >}}
```yaml
# Basic Configuration (åŸºç¡€é…ç½®)
baseURL: ""               # Site URL (ç½‘ç«™ URL)(e.g. https://downmars.github.io/)
title: ""                # Site title (ç½‘ç«™æ ‡é¢˜)(e.g. DLog)
theme: ""                # Theme name (ä¸»é¢˜åç§°)(e.g. PaperMod, in /themes/)

# Feature Toggles (åŠŸèƒ½å¼€å…³)
enableEmoji: true         # Enable emoji support (å¯ç”¨è¡¨æƒ…æ”¯æŒ)(e.g. https://gohugo.io/quick-reference/emojis/#smileys--emotion)
enableRobotsTXT: true     # Enable search engine support (å¯ç”¨æœç´¢å¼•æ“æ”¯æŒ)
hasCJKLanguage: true      # Enable CJK language support (å¯ç”¨ä¸­æ—¥éŸ©è¯­è¨€æ”¯æŒ)
buildDrafts: false        # Build draft posts (æ˜¯å¦æ„å»ºè‰ç¨¿æ–‡ç« )
buildFuture: false        # Build future posts (æ˜¯å¦æ„å»ºæœªæ¥æ—¥æœŸæ–‡ç« ) 
buildExpired: false       # Build expired posts (æ˜¯å¦æ„å»ºè¿‡æœŸæ–‡ç« )

# Parameters Configuration (å‚æ•°é…ç½®)
params:
  # Theme Settings (ä¸»é¢˜è®¾ç½®)
  defaultTheme: dark      # Default theme mode (é»˜è®¤ä¸»é¢˜æ¨¡å¼)
  disableThemeToggle: false # Allow theme switching (å…è®¸ä¸»é¢˜åˆ‡æ¢)
 
  # Display Features (æ˜¾ç¤ºåŠŸèƒ½)
  ShowShareButtons: true    # Show social share buttons (æ˜¾ç¤ºåˆ†äº«æŒ‰é’®)
  ShowCodeCopyButtons: true # Show code copy buttons (æ˜¾ç¤ºä»£ç å¤åˆ¶æŒ‰é’®)
  ShowReadingTime: true    # Show reading time estimate (æ˜¾ç¤ºé˜…è¯»æ—¶é—´)
  ShowWordCount: true      # Show word count (æ˜¾ç¤ºå­—æ•°ç»Ÿè®¡)
  ShowPostNavLinks: true   # Show post navigation (æ˜¾ç¤ºæ–‡ç« å¯¼èˆª)
  ShowBreadCrumbs: true    # Show breadcrumb navigation (æ˜¾ç¤ºé¢åŒ…å±‘å¯¼èˆª)
  ShowToc: true           # Show table of contents (æ˜¾ç¤ºç›®å½•)
  TocOpen: true          # TOC expanded by default (ç›®å½•é»˜è®¤å±•å¼€)
  
  math: true

  fancybox: true # Display Images (æ˜¾ç¤ºå›¾ç‰‡)

 # Comment System (è¯„è®ºç³»ç»Ÿ)
  comments: true          # Enable comments (å¯ç”¨è¯„è®º)
  giscus:                # Giscus configuration (Giscus é…ç½®)
    repo: ""
    repoId: ""
    category: ""
    categoryId: ""
    mapping: "pathname"
    strict: "0"
    reactionsEnabled: "1"
    emitMetadata: "0"
    inputPosition: "bottom"
    lightTheme: "light"
    darkTheme: "dark"
    lang: "zh-CN"
    crossorigin: "anonymous"

  fuseOpts: # refer: https://sonnycalcr.github.io/posts/build-a-blog-using-hugo-papermod-github-pages/#%e9%85%8d%e7%bd%ae%e6%90%9c%e7%b4%a2
    isCaseSensitive: false # æ˜¯å¦å¤§å°å†™æ•æ„Ÿ
    shouldSort: true # æ˜¯å¦æ’åº
    location: 0
    distance: 1000
    threshold: 0.4
    minMatchCharLength: 0
    # limit: 10 # refer: https://www.fusejs.io/api/methods.html#search
    keys: ["title", "permalink", "summary", "content"]
    includeMatches: true

  # Assets Files (èµ„æºæ–‡ä»¶)
  assets:
    favicon: ""          # Site favicon (ç½‘ç«™å›¾æ ‡)
    favicon16x16: ""     # Small favicon (å°å›¾æ ‡)
    favicon32x32: ""     # Medium favicon (ä¸­å›¾æ ‡)
    apple_touch_icon: "" # iOS icon (iOS å›¾æ ‡)
    safari_pinned_tab: "" # Safari icon (Safari å›¾æ ‡)

# Multilingual Support (å¤šè¯­è¨€æ”¯æŒ)
languages:
  zh:
    languageCode: "zh-CN"
    languageName: "ç®€ä½“ä¸­æ–‡"
    contentDir: "content/zh"
    weight: 1
    menu:
      main:
        - identifier: posts
          name: "Posts"
          url: "/posts/"
          weight: 1

# Output Settings (è¾“å‡ºè®¾ç½®)
outputs:
  home:
    - HTML
    - RSS
    - JSON               # Required for search (æœç´¢åŠŸèƒ½éœ€è¦)

# Rendering Configuration (æ¸²æŸ“é…ç½®)
markup:
  goldmark:
    renderer:
      unsafe: true      # Allow HTML in markdown (å…è®¸ Markdown ä¸­çš„ HTML)
  highlight:
    codeFences: true    # Enable code highlighting (å¯ç”¨ä»£ç é«˜äº®)
    guessSyntax: true   # Guess code language (çŒœæµ‹ä»£ç è¯­è¨€)
    lineNos: true      # Show line numbers (æ˜¾ç¤ºè¡Œå·)
    style: dracula     # Code highlight theme (ä»£ç é«˜äº®ä¸»é¢˜)
    lineNumbersInTable: true 
```
{{< /collapse >}}


### åŠŸèƒ½å¼€å…³

#### è¡¨æƒ…æ”¯æŒ
é€šè¿‡å¯ç”¨æ­¤åŠŸèƒ½ï¼Œæˆ‘ä»¬èƒ½å¤Ÿä» Github Emoji API å’Œ Unicode å®Œæ•´è¡¨æƒ…ç¬¦å·åˆ—è¡¨ä¸­è¯»å–æ•°æ®ã€‚åšä¸»æ˜¾å‡ºæé«˜å…´çš„æ ·å­ï¼Œå°†ä¸¤ä¸ªæŒ‡å¤´çš„æ•²ç€é”®ç›˜ï¼Œç‚¹å¤´è¯´ï¼Œâ€œå¯¹å‘€å¯¹å‘€ï¼â€¦â€¦è¡¨æƒ…æœ‰ä¸¤æ ·å†™æ³•ï¼Œä½ çŸ¥é“ä¹ˆï¼Ÿâ€

Shortcode: `:drooling_face:`:drooling_face:

Unicode: `&#x1F924`&#x1F924;

å…³äºå¯¹åº”çš„è¡¨æƒ…å’Œæ–‡æ¡£å¯ä»¥æŸ¥è¯¢ï¼š

- [shortcode](https://gohugo.io/quick-reference/emojis/#smileys--emotion)
- [Unicode](https://www.unicode.org/emoji/charts/emoji-list.html)
- [Emoji ç®€ä»‹-é˜®ä¸€å³°](https://www.ruanyifeng.com/blog/2017/04/emoji.html)

### å‚æ•°é…ç½®

#### å›¾ç‰‡æ”¾å¤§

> å‚è€ƒäºï¼š[Hugo PaperMod ä¸»é¢˜ç²¾è£…ä¿®](https://yunpengtai.top/posts/hugo-journey/#%e5%9b%be%e7%89%87%e7%82%b9%e5%87%bb%e6%94%be%e5%a4%a7)

{{< figure src="/images/posts/2025_01_20-hugo_build_2/plsn_3.jpg" alt="A beautiful landscape" title="Sonny_boy" caption="This is a caption for the image" align="center" width=600px height=300px >}}

æˆ‘ä»¬ä½¿ç”¨å¼•å…¥[fancybox](http://fancybox.net/)æ¥å®ç°ï¼š

åœ¨`layouts/shortcodes/figure.html`ä¸­åŠ å…¥ï¼š

{{< collapse summary="layouts/shortcodes/figure.html" >}}
```html 
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

<a data-fancybox="gallery" href="{{ .Get "src" }}">
<figure{{ if or (.Get "class") (eq (.Get "align") "center") }} class="
           {{- if eq (.Get "align") "center" }}align-center {{ end }}
           {{- with .Get "class" }}{{ . }}{{- end }}"
{{- end -}}>
    {{- if .Get "link" -}}
        <a href="{{ .Get "link" }}"{{ with .Get "target" }} target="{{ . }}"{{ end }}{{ with .Get "rel" }} rel="{{ . }}"{{ end }}>
    {{- end }}
    <img loading="lazy" src="{{ .Get "src" }}{{- if eq (.Get "align") "center" }}#center{{- end }}"
         {{- if or (.Get "alt") (.Get "caption") }}
         alt="{{ with .Get "alt" }}{{ . }}{{ else }}{{ .Get "caption" | markdownify| plainify }}{{ end }}"
         {{- end -}}
         {{- with .Get "width" }} width="{{ . }}"{{ end -}}
         {{- with .Get "height" }} height="{{ . }}"{{ end -}}
    /> <!-- Closing img tag -->
    {{- if .Get "link" }}</a>{{ end -}}
    {{- if or (or (.Get "title") (.Get "caption")) (.Get "attr") -}}
        <figcaption>
            {{ with (.Get "title") -}}
                {{ . }}
            {{- end -}}
            {{- if or (.Get "caption") (.Get "attr") -}}<p>
                {{- .Get "caption" | markdownify -}}
                {{- with .Get "attrlink" }}
                    <a href="{{ . }}">
                {{- end -}}
                {{- .Get "attr" | markdownify -}}
                {{- if .Get "attrlink" }}</a>{{ end }}</p>
            {{- end }}
        </figcaption>
    {{- end }}
</figure>
</a>

```
{{< /collapse >}}

#### æ•°å­¦å…¬ç¤º

> å‚è€ƒäºï¼š[Hugoåšå®¢æ·»åŠ LaTeXè¯­æ³•æ”¯æŒ](https://www.shaohanyun.top/posts/env/hugo_mathjax/#mathjax%e4%b8%8emarkdown%e7%9a%84%e8%9e%8d%e5%90%88)ã€[Hugo PaperMod ä¸»é¢˜ç²¾è£…ä¿®](https://yunpengtai.top/posts/hugo-journey/#%e6%95%b0%e5%ad%a6%e5%85%ac%e5%bc%8f)ã€[MathJax ä¸ Markdown çš„ç©¶æèåˆ](https://yihui.org/cn/2017/04/mathjax-markdown/)

ä¸Šè¿°åšå®¢ä¸­æåˆ°äº†ç›¸åŒçš„é—®é¢˜å³ â€å¯¹äºmathjaxä¸markdownæ ¼å¼ä¸­ï¼Œhugoåœ¨æ¸²æŸ“çš„è¿‡ç¨‹ä¸­å°†`_`æ¸²æŸ“ä¸ºäº†`<em>`æ ‡ç­¾ï¼Œå¯¼è‡´mathjaxåœ¨æ¸²æŸ“çš„æ—¶å€™æ‰¾ä¸åˆ°åŸæ¥æ­£ç¡®çš„å…¬ç¤ºâ€œã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨`hugo.yaml`ä¸­æ·»åŠ ï¼š

{{< collapse summary = "hugo.yaml" >}}
```yaml
params:
  math: true
```
{{< /collapse >}}

æ¥ç€ï¼Œæˆ‘ä»¬åœ¨`layouts/partials/mathjax.html`ä¸­æ·»åŠ ï¼š
{{< collapse summary = "layouts/partials/mathjax.html" >}}
```html 
<script type="text/javascript"
        async
        src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[\[','\]\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});

MathJax.Hub.Queue(function() {
    // Fix <code> tags after MathJax finishes running. This is a
    // hack to overcome a shortcoming of Markdown. Discussion at
    // https://github.com/mojombo/jekyll/issues/199
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

```
{{< /collapse >}}

æ¥ç€ï¼Œåœ¨`layouts/partials/extend_footer.html`ä¸­æ·»åŠ ï¼š

{{< collapse summary = "layouts/partials/extend_footer.html" >}}
```html 
<script>
  (function () {
    var i, text, code, codes = document.getElementsByTagName("code");
    for (i = 0; i < codes.length; ) {
      code = codes[i];
      if (code.parentNode.tagName !== "PRE" && code.childElementCount === 0) {
        text = code.textContent;
        if (/^\$[^$]/.test(text) && /[^$]\$$/.test(text)) {
          text = text.replace(/^\$/, "\\(").replace(/\$$/, "\\)");
          code.textContent = text;
        }
        if (
          /^\\\((.|\s)+\\\)$/.test(text) ||
          /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$(.|\s)+\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)
        ) {
          code.outerHTML = code.innerHTML; // remove <code></code>
          continue;
        }
      }
      i++;
    }
  })();
</script>

```
{{< /collapse >}}
æœ€åï¼Œåœ¨`layouts/partials/extend_head.html`ä¸­æ·»åŠ æ¥åˆ¤æ–­`hugo.yaml`ä¸­æ˜¯å¦å¯ç”¨æ¥å†³å®šæ˜¯å¦æ¸²æŸ“ï¼š

{{< collapse summary = "layouts/partials/extend_head.html" >}}
```html 
{{ if or .Params.math .Site.Params.math }}
{{- partial "mathjax.html" .}}
{{ end }}
```
{{< /collapse >}}

æœ¬å¤„å¼•ç”¨çš„æ–¹æ³•é€šè¿‡å°†å¸¦æœ‰å…¬å¼éƒ¨åˆ†ä½¿ç”¨ä»£ç blockè£…é¥°èµ·æ¥ï¼Œé¿å…å†…å®¹è¢«ä¿®æ”¹ï¼Œå†å°†ä»£ç blockå»é™¤ï¼Œå®Œæ•´å°†å…¶é€ç»™æ¸²æŸ“å·¥å…·ã€‚

æ²¡åšå¤„ç†ä¹‹å‰ï¼Œä»¥ä¸‹ä»£ç æ— æ³•æ¸²æŸ“ï¼š

`$$
\frac{\partial E(\boldsymbol{w})}{\partial z_j} = \sum\limits_{k}\frac{\partial E(\boldsymbol{w})}{\partial y_{k}}\frac{\partial y_k}{\partial z_{j}}= \sum\limits_{k} (y_{k}- \hat{y}_{k}) w_{kj}^{(2)} \tag{5.11}
$$
`


> ç°æœ‰å‡ ä¸ªé—®é¢˜å¾…è§£å†³ï¼š1ã€ç™½è‰²é»‘è‰²ä¸»é¢˜å­—ä½“é¢œè‰²æœªç¿»è½¬ï¼›2ã€å­—ä½“å¤§å°æ²¡æœ‰è‡ªåŠ¨æ¸²æŸ“æ­£ç¡®ï¼Œåœ¨ä¸­é—´çš„ä¸€ä¸ªæ­¥éª¤ï¼Œä½¿èƒ½å¤Ÿæ­£å¸¸åŒ¹é…ä¸»é¢˜çš„é¢œè‰²å’Œå­—ä½“å¤§å°ï¼Œä½†æ˜¯å®Œå…¨æ¸²æŸ“è¿‡åå°±ä¼šå‡ºç°åˆšæ‰æåŠçš„é—®é¢˜ï¼Œå¯èƒ½çš„è§£å†³æ–¹æ³•å‚è€ƒäº[è§£å†³ mathjax æ•°å­¦å…¬å¼æ¸²æŸ“çš„å­—ä½“å¤§å°é—®é¢˜](https://quanquan.space/viewtopic.php?t=629)

#### ç›®å½•é…ç½®

å¯¹äºè‡ªå¸¦çš„ç›®å½•ï¼Œåªæ˜¾ç¤ºåœ¨æ–‡ç« æœ€ä¸Šé¢ï¼Œæ—¢ä¸èƒ½è®©è¯»è€…éšæ—¶æŒæ¡åˆ°é˜…è¯»è¿›åº¦ï¼Œä¹Ÿä¸å¤Ÿä¼˜é›…ï¼Œæ‰€ä»¥æˆ‘åœ¨å‚è€ƒäº†[åœ¨PaperModä¸­å¼•å…¥ä¾§è¾¹ç›®å½•å’Œé˜…è¯»è¿›åº¦æ˜¾ç¤º](https://www.zhouxin.space/logs/introduce-side-toc-and-reading-percentage-to-papermod/)åŸºç¡€ä¸Šåšäº†ä¸€äº›æ”¹åŠ¨
- è‡ªåŠ¨ç¼–å·
- å½“å‰æµè§ˆç« èŠ‚ä¸‹åˆ’çº¿æ˜¾ç¤º
åˆ›å»º `layout/partials/toc.html` ,

{{< collapse summary = "layouts/partials/toc.hmtl" >}}
```html
<!-- ç›®å½•ä¾§è¾¹æ  -->
{{- $headers := findRE "<h[1-6].*?>(.|\n])+?</h[1-6]>" .Content -}}
{{- $has_headers := ge (len $headers) 1 -}}
{{- if $has_headers -}}
<aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details {{if (.Param "TocOpen") }} open{{ end }}>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">{{- i18n "toc" | default "Table of Contents" }}</span>
            </summary>

            <div class="inner">
                {{- $largest := 6 -}}
                {{- range $headers -}}
                {{- $headerLevel := index (findRE "[1-6]" . 1) 0 -}}
                {{- $headerLevel := len (seq $headerLevel) -}}
                {{- if lt $headerLevel $largest -}}
                {{- $largest = $headerLevel -}}
                {{- end -}}
                {{- end -}}

                {{- $firstHeaderLevel := len (seq (index (findRE "[1-6]" (index $headers 0) 1) 0)) -}}

                {{- $.Scratch.Set "bareul" slice -}}
                <ul>
                    {{- range seq (sub $firstHeaderLevel $largest) -}}
                    <ul>
                        {{- $.Scratch.Add "bareul" (sub (add $largest .) 1) -}}
                        {{- end -}}
                        {{- range $i, $header := $headers -}}
                        {{- $headerLevel := index (findRE "[1-6]" . 1) 0 -}}
                        {{- $headerLevel := len (seq $headerLevel) -}}

                        {{/* get id="xyz" */}}
                        {{- $id := index (findRE "(id=\"(.*?)\")" $header 9) 0 }}

                        {{- /* strip id="" to leave xyz, no way to get regex capturing groups in hugo */ -}}
                        {{- $cleanedID := replace (replace $id "id=\"" "") "\"" "" }}
                        {{- $header := replaceRE "<h[1-6].*?>((.|\n])+?)</h[1-6]>" "$1" $header -}}

                        {{- if ne $i 0 -}}
                        {{- $prevHeaderLevel := index (findRE "[1-6]" (index $headers (sub $i 1)) 1) 0 -}}
                        {{- $prevHeaderLevel := len (seq $prevHeaderLevel) -}}
                        {{- if gt $headerLevel $prevHeaderLevel -}}
                        {{- range seq $prevHeaderLevel (sub $headerLevel 1) -}}
                        <ul>
                            {{/* the first should not be recorded */}}
                            {{- if ne $prevHeaderLevel . -}}
                            {{- $.Scratch.Add "bareul" . -}}
                            {{- end -}}
                            {{- end -}}
                            {{- else -}}
                            </li>
                            {{- if lt $headerLevel $prevHeaderLevel -}}
                            {{- range seq (sub $prevHeaderLevel 1) -1 $headerLevel -}}
                            {{- if in ($.Scratch.Get "bareul") . -}}
                        </ul>
                        {{/* manually do pop item */}}
                        {{- $tmp := $.Scratch.Get "bareul" -}}
                        {{- $.Scratch.Delete "bareul" -}}
                        {{- $.Scratch.Set "bareul" slice}}
                        {{- range seq (sub (len $tmp) 1) -}}
                        {{- $.Scratch.Add "bareul" (index $tmp (sub . 1)) -}}
                        {{- end -}}
                        {{- else -}}
                    </ul>
                    </li>
                    {{- end -}}
                    {{- end -}}
                    {{- end -}}
                    {{- end }}
                    <li>
                        <a href="#{{- $cleanedID -}}" aria-label="{{- $header | plainify -}}">{{- $header | safeHTML -}}</a>
                        {{- else }}
                    <li>
                        <a href="#{{- $cleanedID -}}" aria-label="{{- $header | plainify -}}">{{- $header | safeHTML -}}</a>
                        {{- end -}}
                        {{- end -}}
                        {{- $firstHeaderLevel := $largest }}
                        {{- $lastHeaderLevel := len (seq (index (findRE "[1-6]" (index $headers (sub (len $headers) 1)) 1) 0)) }}
                    </li>
                    {{- range seq (sub $lastHeaderLevel $firstHeaderLevel) -}}
                    {{- if in ($.Scratch.Get "bareul") (add . $firstHeaderLevel) }}
                </ul>
                {{- else }}
                </ul>
                </li>
                {{- end -}}
                {{- end }}
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    let headerCounters = {};

    // é‡ç½®æ‰€æœ‰è®¡æ•°å™¨
    function resetHeaderCounters() {
        headerCounters = {};
    }

    // headerè®¡æ•°å™¨é€»è¾‘
    function getHeaderNumber(element, headerLevel) {
        // è·å–ä¹‹å‰çš„æ‰€æœ‰æ ‡é¢˜å…ƒç´ 
        let prevElements = Array.from(document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]'));
        let currentIndex = prevElements.indexOf(element);
        let counters = new Array(6).fill(0); // åˆå§‹åŒ–6çº§è®¡æ•°å™¨
        let numbers = [];
        
        for (let i = 0; i <= currentIndex; i++) {
            let currentElement = prevElements[i];
            let currentLevel = parseInt(currentElement.tagName.substring(1)) - 1; // è½¬ä¸º0-based
            
            // é‡ç½®å­çº§è®¡æ•°å™¨
            for (let l = currentLevel + 1; l < 6; l++) {
                counters[l] = 0;
            }
            
            // é€’å¢å½“å‰çº§è®¡æ•°å™¨
            counters[currentLevel]++;
            
            // å¦‚æœæ˜¯ç›®æ ‡å…ƒç´ åˆ™è®°å½•ç¼–å·
            if (currentElement === element) {
                for (let l = 0; l <= currentLevel; l++) {
                    if (counters[l] > 0) {
                        numbers.push(counters[l]);
                    }
                }
                break;
            }
        }
        
        return numbers.join('.');
    }

    // æ›´æ–°ç›®å½•é¡¹çš„æ˜¾ç¤º
    function updateTocDisplay(element, tocLink) {
        const headerLevel = parseInt(element.tagName.substring(1));
        const currentNumber = getHeaderNumber(element, headerLevel);
        
        // ç§»é™¤ä¹‹å‰å¯èƒ½å­˜åœ¨çš„ç¼–å·
        let linkText = tocLink.textContent;
        linkText = linkText.replace(/^\d+(\.\d+)*\s+/, '');
        
        // æ·»åŠ æ–°çš„ç¼–å·
        tocLink.textContent = `${currentNumber} ${linkText}`;
    }

    // è·å–å…ƒç´ çš„é¡¶éƒ¨åç§»
    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }

    // æ£€æŸ¥TOCä½ç½®
    function checkTocPosition() {
        const width = document.body.scrollWidth;
        const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
        const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
        const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);
    
        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    // åˆå§‹åŒ–æ—¶çš„å¤„ç†
    document.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();
    
        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
        if (elements.length > 0) {
            // è®¾ç½®ç¬¬ä¸€ä¸ªæ ‡é¢˜ä¸ºæ´»åŠ¨çŠ¶æ€
            activeElement = elements[0];
            const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
            document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
        }
    
        // åˆå§‹åŒ–æ‰€æœ‰æ ‡é¢˜çš„ç¼–å·
        if (elements && elements.length > 0) {
            elements.forEach(element => {
                const id = encodeURI(element.getAttribute('id')).toLowerCase();
                const tocLink = document.querySelector(`.inner ul li a[href="#${id}"]`);
                
                if (tocLink) {
                    updateTocDisplay(element, tocLink);
                }
            });
        }

        // æ·»åŠ è¿”å›é¡¶éƒ¨é“¾æ¥çš„äº‹ä»¶ç›‘å¬
        const topLink = document.getElementById('top-link');
        if (topLink) {
            topLink.addEventListener('click', (event) => {
                event.preventDefault();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }
    }, false);

    // çª—å£å¤§å°æ”¹å˜æ—¶çš„å¤„ç†
    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    // æ»šåŠ¨æ—¶çš„å¤„ç†
    window.addEventListener('scroll', () => {
        const scrollPosition = window.pageYOffset || document.documentElement.scrollTop;

        if (scrollPosition === 0) {
            return;
        }

        if (elements && elements.length > 0) {
            // é‡ç½®è®¡æ•°å™¨
            resetHeaderCounters();
            
            // æŸ¥æ‰¾å½“å‰å¯è§çš„æ ‡é¢˜
            activeElement = Array.from(elements).find((element) => {
                if ((getOffsetTop(element) - scrollPosition) > 0 && 
                    (getOffsetTop(element) - scrollPosition) < window.innerHeight / 2) {
                    return element;
                }
            }) || activeElement;

            // æ›´æ–°æ‰€æœ‰ç›®å½•é¡¹çš„æ˜¾ç¤º
            elements.forEach(element => {
                const id = encodeURI(element.getAttribute('id')).toLowerCase();
                const tocLink = document.querySelector(`.inner ul li a[href="#${id}"]`);
                
                if (tocLink) {
                    updateTocDisplay(element, tocLink);
                    
                    if (element === activeElement) {
                        tocLink.classList.add('active');
                        tocLink.style.textDecoration = "underline";
                        
                        // ç¡®ä¿å½“å‰æ¿€æ´»çš„æ ‡é¢˜åœ¨ç›®å½•ä¸­å¯è§
                        const tocContainer = document.querySelector('.toc .inner');
                        const linkOffsetTop = tocLink.offsetTop;
                        const containerHeight = tocContainer.clientHeight;
                        const linkHeight = tocLink.clientHeight;
    
                        // è®¡ç®—æ»šåŠ¨ä½ç½®ï¼Œå°†å½“å‰ç›®å½•é¡¹å±…ä¸­æ˜¾ç¤º
                        const scrollPosition = linkOffsetTop - (containerHeight / 2) + (linkHeight / 2);
                        tocContainer.scrollTo({ top: scrollPosition, behavior: 'smooth' });
                    } else {
                        tocLink.classList.remove('active');
                        tocLink.style.textDecoration = "none";
                    }
                }
            });
        }
    }, false);
</script>
{{- end }}
```
{{< /collapse >}}

åˆ›å»º`assets/css/extended/toc.css`ï¼Œæ ¹æ®é˜…è¯»å†…å®¹æ»šåŠ¨å¹¶åŠ ç²—ç›¸åº”æ ‡é¢˜å°±ç”±å…¶å®ç°ã€‚

{{< collapse summary = "assets/css/extended/toc.css" >}}
```css 
/*ç›®å½•ä¾§è¾¹æ */
:root {
    --nav-width: 1380px;
    --article-width: 650px;
    --toc-width: 300px;
}

.toc {
    margin: 0 2px 40px 2px;
    border: 1px solid var(--border);
    background: var(--entry);
    border-radius: var(--radius);
    padding: 0.4em;
}

.toc-container.wide {
    position: absolute;
    height: 100%;
    border-right: 1px solid var(--border);
    left: calc((var(--toc-width) + var(--gap)) * -1);
    top: calc(var(--gap) * 2);
    width: var(--toc-width);
}

.wide .toc {
    position: sticky;
    top: var(--gap);
    border: unset;
    background: unset;
    border-radius: unset;
    width: 100%;
    margin: 0 2px 40px 2px;
}

.toc details summary {
    cursor: zoom-in;
    margin-inline-start: 20px;
    padding: 12px 0;
}

.toc details[open] summary {
    font-weight: 500;
}

.toc-container.wide .toc .inner {
    margin: 0;
}

.active {
    font-size: 110%;
    font-weight: 600;
}

.toc ul {
    list-style-type: circle;
}

.toc .inner {
    margin: 0 0 0 20px;
    padding: 0px 15px 15px 20px;
    font-size: 16px;

    /*ç›®å½•æ˜¾ç¤ºé«˜åº¦*/
    max-height: 83vh;
    overflow-y: auto;
}

.toc .inner::-webkit-scrollbar-thumb {  /*æ»šåŠ¨æ¡*/
    background: var(--border);
    border: 7px solid var(--theme);
    border-radius: var(--radius);
}

.toc li ul {
    margin-inline-start: calc(var(--gap) * 0.5);
    list-style-type: none;
}

.toc li {
    list-style: none;
    font-size: 0.95rem;
    padding-bottom: 5px;
}

.toc li a:hover {
    color: var(--secondary);
}
/*ç›®å½•ä¾§è¾¹æ */
```
{{< /collapse >}}

ä¸ºæ­£æ–‡æ·»åŠ ç« èŠ‚åºå·ï¼Œå‚è€ƒäº[åˆå§‹åŒ– & è®¾ç½® PaperMod ä¸»é¢˜çš„åŸºç¡€åŠŸèƒ½](https://aikenh.cn/posts/%E5%88%9D%E5%A7%8B%E5%8C%96%E8%AE%BE%E7%BD%AEpapermod%E4%B8%BB%E9%A2%98%E7%9A%84%E5%9F%BA%E7%A1%80%E5%8A%9F%E8%83%BD/#header-counter-%e4%b8%ba-title-%e6%b7%bb%e5%8a%a0%e7%ab%a0%e8%8a%82%e5%ba%8f%e5%8f%b7)ï¼Œæˆ‘ä»¬åœ¨`assets/css/common/post-single.css`ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š
{{< collapse summary = "assets/css/common/post-single.css" >}}
```css 
main {
    counter-reset: h1-cnt h2-cnt h3-cnt h4-cnt h5-cnt h6-cnt;
}

.post-content h1 {
    counter-increment: h1-cnt;
    counter-reset: h2-cnt h3-cnt h4-cnt h5-cnt h6-cnt; /* Reset lower levels */
}

.post-content h2 {
    counter-increment: h2-cnt;
    counter-reset: h3-cnt h4-cnt h5-cnt h6-cnt; /* Reset lower levels */
}

.post-content h3 {
    counter-increment: h3-cnt;
    counter-reset: h4-cnt h5-cnt h6-cnt; /* Reset lower levels */
}

.post-content h4 {
    counter-increment: h4-cnt;
    counter-reset: h5-cnt h6-cnt; /* Reset lower levels */
}

.post-content h5 {
    counter-increment: h5-cnt;
    counter-reset: h6-cnt; /* Reset lower levels */
}

.post-content h6 {
    counter-increment: h6-cnt;
}

.post-content h1::before {
    content: counter(h1-cnt) '. ';
}

.post-content h2::before {
    content: counter(h2-cnt) '. ';
}

.post-content h3::before {
    content: counter(h2-cnt) '.' counter(h3-cnt) '. ';
}

.post-content h4::before {
    content: counter(h2-cnt) '.' counter(h3-cnt) '.' counter(h4-cnt) '. ';
}

.post-content h5::before {
    content: counter(h2-cnt) '.' counter(h3-cnt) '.' counter(h4-cnt) '.' counter(h5-cnt) '. ';
}

.post-content h6::before {
    content: counter(h2-cnt) '.' counter(h3-cnt) '.' counter(h4-cnt) '.' counter(h5-cnt) '.' counter(h6-cnt) '. ';
}
```
{{< /collapse >}}  
åŒæ—¶ï¼Œç”±äºä¸€å·æ ‡é¢˜æœ‰`40px`å¤§å°ï¼Œæ¨èä»äºŒå·æ ‡é¢˜å¼€å§‹æ’åºã€‚


#### è¯„è®ºæ”¯æŒ
å¯¹äºè¯„è®ºæ”¯æŒï¼Œæˆ‘é€‰æ‹©äº†[Giscus](https://giscus.app/zh-CN)ã€‚ç”±äºæœ¬åšå®¢ä¹Ÿæ˜¯éƒ¨ç½²åœ¨Githubä¸Šï¼Œåœ¨å‡å°‘é¢å¤–æ“ä½œçš„åŒæ—¶ `Giscus` ä¹Ÿæ˜¾å¾—è¶³å¤Ÿçš„ä¼˜é›…ç®€å•ã€‚

æ­¤å¤„æ“ä½œå‚è€ƒäº†[Hugo åšå®¢å¼•å…¥ Giscus è¯„è®ºç³»ç»Ÿ](https://www.lixueduan.com/posts/blog/02-add-giscus-comment/)ã€‚

1. [Giscus](https://giscus.app/zh-CN) -> è¿›å…¥é…ç½®æ 
2. é…ç½® -> ä»“åº“ -> å¡«å…¥ä»“åº“åï¼Œå¦‚[Downmars/Downmars.github.io](https://github.com/Downmars/Downmars.github.io) -> è‹¥ä¸æ»¡è¶³æ¡ä»¶ï¼Œåˆ†åˆ«æŸ¥çœ‹ï¼šå¯¹åº”ä»“åº“æ˜¯å¦å…¬å¼€ã€giscus app æ˜¯å¦å®‰è£…ã€ Discussions åŠŸèƒ½åœ¨å¯¹åº”ä»“åº“æ˜¯å¦å¯ç”¨
3. é…ç½® -> Discussions åˆ†ç±» -> é€‰ä¸­Announcements
4. é…ç½® -> å¯ç”¨giscus -> å¤åˆ¶ç›¸åº”å­—æ®µåˆ°é…ç½®ä¸­

åŒæ—¶éœ€è¦åˆ›å»º `layouts/partials/comments.html`ï¼Œæ­¤å¤„å‚è€ƒäº†[Hugo + PaperMod + Github Pages æ­å»ºä¸€ä¸ªå®Œå–„çš„ä¸ªäººåšå®¢(ä»¥ Windows11 ä¸ºä¾‹)](https://sonnycalcr.github.io/posts/build-a-blog-using-hugo-papermod-github-pages/)ã€‚

{{< collapse summary = "layouts/partials/comments.html" >}}
```html
{{- /* Comments area start */ -}}
{{- /* to add comments read => https://gohugo.io/content-management/comments/ */ -}}
<div id="tw-comment"></div>
<script>
    // é»˜è®¤æ˜¯æš—è‰²ï¼Œæ ¹ç›®å½•ä¸‹çš„é…ç½®ä¸­çš„ä¸»é¢˜é»˜è®¤ä¹Ÿæ˜¯æš—è‰²
    const getStoredTheme = () => localStorage.getItem("pref-theme") === "light" ? "{{ .Site.Params.giscus.lightTheme }}" : "{{ .Site.Params.giscus.darkTheme }}";
    const setGiscusTheme = () => {
        const sendMessage = (message) => {
            const iframe = document.querySelector('iframe.giscus-frame');
            if (iframe) {
                iframe.contentWindow.postMessage({giscus: message}, 'https://giscus.app');
            }
        }
        sendMessage({setConfig: {theme: getStoredTheme()}})
    }

    document.addEventListener("DOMContentLoaded", () => {
        const giscusAttributes = {
            "src": "https://giscus.app/client.js",
            "data-repo": "{{ .Site.Params.giscus.repo }}",
            "data-repo-id": "{{ .Site.Params.giscus.repoId }}",
            "data-category": "{{ .Site.Params.giscus.category }}",
            "data-category-id": "{{ .Site.Params.giscus.categoryId }}",
            "data-mapping": "{{ .Site.Params.giscus.mapping }}",
            "data-strict": "{{ .Site.Params.giscus.strict }}",
            "data-reactions-enabled": "{{ .Site.Params.giscus.reactionsEnabled }}",
            "data-emit-metadata": "{{ .Site.Params.giscus.emitMetadata }}",
            "data-input-position": "{{ .Site.Params.giscus.inputPosition }}",
            "data-theme": getStoredTheme(),
            "data-lang": "{{ .Site.Params.giscus.lang }}",
            "data-loading": "lazy",
            "crossorigin": "anonymous",
        };

        // åŠ¨æ€åˆ›å»º giscus script
        const giscusScript = document.createElement("script");
        Object.entries(giscusAttributes).forEach(
                ([key, value]) => giscusScript.setAttribute(key, value));
        document.querySelector("#tw-comment").appendChild(giscusScript);

        // é¡µé¢ä¸»é¢˜å˜æ›´åï¼Œå˜æ›´ giscus ä¸»é¢˜
        const themeSwitcher = document.querySelector("#theme-toggle");
        if (themeSwitcher) {
            themeSwitcher.addEventListener("click", setGiscusTheme);
        }
        const themeFloatSwitcher = document.querySelector("#theme-toggle-float");
        if (themeFloatSwitcher) {
            themeFloatSwitcher.addEventListener("click", setGiscusTheme);
        }
    });
</script>

{{- /* Comments area end */ -}}
```
{{< /collapse >}}

#### ç½‘ç«™å›¾æ ‡

å’±ä»¬ä¸€ä¸ªè‡ªå·±çš„åšå®¢è‚¯å®šå¾—éœ€è¦æœ‰è‡ªå·±çš„ä¸€ä¸ªç½‘ç«™å›¾æ ‡ï¼Œå¯ä»¥å°†å›¾æ ‡æ”¾åœ¨`/static/images/`ï¼Œå¦‚`favicon: "/images/blog.png"`ã€‚æˆ‘åœ¨è¿™é‡Œæ¨èä¸¤ä¸ªç½‘ç«™ä¾›å¤§å®¶ç”¨æ¥æŸ¥æ‰¾ç¬¦åˆè‡ªå·±å›¾æ ‡ã€‚

- [fontawesome](https://fontawesome.com/search)
- [flaticon](https://www.flaticon.com/)
- [icons8](https://icons8.com/)
- [iconfinder](https://www.iconfinder.com/)
- [Noun Project](https://thenounproject.com/)

### å¤šè¯­è¨€ & ç•Œé¢å¸ƒç½®

è¿™éƒ¨åˆ†å‚è€ƒæ¥è‡ªäº[Hugo å¤šè¯­è¨€åšå®¢æ­å»ºï¼Œå¦‚ä½•ä¼˜é›…åœ°ç®¡ç†å¤šè¯­è¨€ md å†…å®¹-è´¤æ°‘](https://www.xianmin.org/post/2024/hugo-multilingual-blog-structure/)ã€‚

æˆ‘è®¤ä¸ºå¯¹äºç¼–å†™åšå®¢çš„æˆ‘ä»¬æ¥è¯´ï¼Œä»¥æ—¶é—´çš„å½¢å¼æ¥åˆ†éš”æ˜¯å¾ˆå¥½çš„ä¸€ç§æ–¹å¼æ¥å­˜å‚¨ä»¥åŠç®¡ç†æˆ‘ä»¬çš„åšå®¢ï¼Œä½¿ç”¨ç»Ÿä¸€æ–‡ä»¶å‘½åè§„èŒƒ`YYYYMMDD-title.md`ã€‚æ­¤å¤–ï¼Œæœ‰å…´è¶£çš„å¯ä»¥åšä¸€ä¸‹å¤šè¯­è¨€çš„å‡†å¤‡ï¼Œå³ä½¿ç°åœ¨æ²¡æœ‰æ¨å‡ºå¤šè¯­è¨€çš„æ‰“ç®—ï¼Œä¹‹åå¯ä»¥é›†ä¸­æ‰¾ä¸ªæ—¶é—´æ¥ä½¿ç”¨`ai`å·¥å…·æ¥ç»Ÿä¸€åšä¸€ä¸‹ã€‚

```bash 
$ tree .
.
â”œâ”€â”€ en
â”‚Â Â  â”œâ”€â”€ archives
â”‚Â Â  â”‚Â Â  â””â”€â”€ archives.md
â”‚Â Â  â”œâ”€â”€ posts
â”‚Â Â  â”‚Â Â  â””â”€â”€ 2025_01_19-hugo_build_1.md
â”‚Â Â  â””â”€â”€ search
â”‚Â Â      â””â”€â”€ search.md
â””â”€â”€ zh
    â”œâ”€â”€ archives
    â”‚Â Â  â””â”€â”€ archives.md
    â”œâ”€â”€ posts
    â”‚Â Â  â”œâ”€â”€ 2025_01_19-hugo_build_1.md
    â”‚Â Â  â””â”€â”€ 2025_01_20-hugo_build_2.md
    â””â”€â”€ search
        â””â”€â”€ search.md

```
å¯ä»¥å‚è€ƒæˆ‘çš„ç¤ºä¾‹ç»“æ„ï¼Œåœ¨è¿™é‡Œæˆ‘å°†`zh/`å’Œ`en/`ä½œä¸º`post/`çš„ç›´æ¥å­ç›®å½•ï¼Œè¿™ä¸€æ­¥éœ€åœ¨å¯¹åº”çš„è¯­è¨€ä¸‹æ·»åŠ è®¾ç½®å¯¹åº”çš„æ–‡æ¡£ç›®å½•ï¼Œå¦‚`contentDir: "content/zh"`ã€‚

æˆ‘ä»¬åœ¨æ­¤å¤„åŒæ—¶éœ€è¦è®¾ç½®é¡µé¢å¸ƒå±€ï¼Œåˆ›å»º`zh/archives/archives.md`å’Œ`zh/search/search.md`ï¼Œ

{{< collapse summary = "zh/archives/archives.md" >}}
```md 
---
title: "æ—¶é—´è½´"
layout: "archives"
summary: archives
---
```
{{< /collapse >}}

{{< collapse summary = "zh/search/search.md" >}}
```md 
---
title: "æœç´¢" # in any language you want
layout: "search" # is necessary
summary: "search"
---
```
{{< /collapse >}}
å…¶ä¸­`layout`å­—æ®µæŒ‡å®šäº†è¿™ä¸ªé¡µé¢ä½¿ç”¨çš„æ¨¡æ¿ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯`themes\<hugo_theme>\layouts\_default\archives.html&search.html`ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨é»˜è®¤å­—æ®µ`search`å’Œ`archives`å³å¯ä»¥è®©å½’æ¡£å†…å®¹æ­£å¸¸æ˜¾ç¤ºã€‚

åŒæ—¶ï¼Œå‚è€ƒ[Hugo + PaperMod + Github Pages æ­å»ºä¸€ä¸ªå®Œå–„çš„ä¸ªäººåšå®¢(ä»¥ Windows11 ä¸ºä¾‹)](https://sonnycalcr.github.io/posts/build-a-blog-using-hugo-papermod-github-pages/#%e9%85%8d%e7%bd%ae%e6%90%9c%e7%b4%a2)æœç´¢éœ€è¦é¢å¤–åŠ å…¥å¦‚ä¸‹é…ç½®ï¼š

{{< collapse summary = "hugo.yaml" >}}
```yaml
params:
  # æœç´¢
  fuseOpts: # ä¸ªæ€§åŒ–é…ç½® refer: https://sonnycalcr.github.io/posts/build-a-blog-using-hugo-papermod-github-pages/#%e9%85%8d%e7%bd%ae%e6%90%9c%e7%b4%a2
      isCaseSensitive: false # æ˜¯å¦å¤§å°å†™æ•æ„Ÿ
      shouldSort: true # æ˜¯å¦æ’åº
      location: 0
      distance: 1000
      threshold: 0.4
      minMatchCharLength: 0
      # limit: 10 # refer: https://www.fusejs.io/api/methods.html#search
      keys: ["title", "permalink", "summary", "content"]
      includeMatches: true

# ......

outputs:
  home:
    - HTML
    - RSS
    - JSON               # Required for search (æœç´¢åŠŸèƒ½éœ€è¦)
```
{{< /collapse >}}

æ¥ç€ï¼Œæˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ å…¥æ—¶é—´è½´ä¸æœç´¢çš„å¸ƒå±€å³å¯ï¼š

{{< collapse summary = "hugo.yaml" >}}
```yaml
# Multilingual Support (å¤šè¯­è¨€æ”¯æŒ)
languages:
  zh:
    languageCode: "zh-CN"
    languageName: "ç®€ä½“ä¸­æ–‡"
    contentDir: "content/zh"
    weight: 1
    menu:
      main:
        - identifier: posts
          name: "Posts"
          url: "/posts/"
          weight: 1
```
{{< /collapse >}}

### æ¸²æŸ“é…ç½®

#### ä»£ç é…ç½®

~~`PaperMod`ä¸»é¢˜ä½¿ç”¨çš„ä»£ç é«˜äº®å·¥å…·ä¸º[Chroma](https://github.com/alecthomas/chroma)ï¼Œå¯èƒ½ä¸å¤ªèªæ˜ï¼Œä½†æ˜¯å¯¹äºæˆ‘çš„æ—¥å¸¸ä½¿ç”¨æš‚æ—¶æ²¡æœ‰å¤ªå¤§é—®é¢˜ã€‚~~ æˆ‘åœ¨åé¢æ¢äº†ä¸ªä»£ç æ¸²æŸ“æ–¹å¼ã€‚

`Chroma`è‡ªå¸¦çš„é…è‰²æ–¹æ¡ˆé¢„è§ˆï¼š[https://xyproto.github.io/splash/docs/longer/all.html](https://xyproto.github.io/splash/docs/longer/all.html) 

> å‚è€ƒäºï¼š[æ·±å…¥æ¢ç©¶ Hugo ä»£ç é«˜äº®](https://blog.loikein.one/posts/2023-01-10-deep-dive-into-hugo-syntax-highlight/)ã€[ä»£ç å—è¯­æ³•é«˜äº®åŠå¤åˆ¶](https://tomo.dev/posts/create-hugo-theme-from-scratch/part-three/#%E4%BB%A3%E7%A0%81%E5%9D%97%E8%AF%AD%E6%B3%95%E9%AB%98%E4%BA%AE%E5%8F%8A%E5%A4%8D%E5%88%B6)

{{< collapse summary = "hugo.yaml" >}}
```yaml
markup:
  highlight:
    codeFences: true 
    guessSyntax: true 
    lineNos: true 
    style: dracula 
    lineNumbersInTable: true 
```
{{< /collapse >}}

æˆ‘è¿™é‡Œå‚è€ƒäº†[Hugo PaperMod ä¸»é¢˜ç²¾è£…ä¿®](https://yunpengtai.top/posts/hugo-journey/#%e4%bb%a3%e7%a0%81%e6%b8%b2%e6%9f%93)çš„ä»£ç æ¸²æŸ“æ–¹å¼ï¼Œåœ¨å…¶ä¸­é€‰æ‹©äº†[ atom-one-dark/light](https://github.com/highlightjs/highlight.js/blob/main/src/styles/atom-one-light.css)ä¸[atom-one-dark.css](https://github.com/highlightjs/highlight.js/blob/main/src/styles/atom-one-dark.css)ã€‚

ä¸ºäº†è¦†ç›–æ‰åŸä¸»é¢˜å¯¹äºä»£ç æ¸²æŸ“çš„è®¾ç½®ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»º`assets/css/hljs/an-old-hope.min.css`ï¼Œå¹¶ä¸”åœ¨å…¶ä¸­å¤åˆ¶è¿›å»é»‘è‰²ä¸»é¢˜å’Œç™½è‰²ä¸»é¢˜çš„é…ç½®ï¼Œç™½è‰²ä¸»é¢˜ç›´æ¥å¤åˆ¶è¿›å»çš†å¯ï¼Œé»‘è‰²ä¸»é¢˜éœ€è¦ä»¥ä»¥ä¸‹å½¢å¼è¿›è¡Œé™å®šï¼š

{{< collapse summary = "assets/css/hljs/an-old-hope.min.css" >}}
```css 
body.dark {
  .hljs {
    color: #abb2bf;
    background: #282c34;
  }
  ...
}
```
{{< /collapse >}}

æ¥ç€ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ç™½è‰²ä¸é»‘è‰²ä¸»é¢˜çš„èƒŒæ™¯è‰²ï¼ŒåŒæ—¶ç”±äºæˆ‘å‚è€ƒçš„åšä¸»ä½¿ç”¨äº†Consolas å’Œéœé¹œæ–‡æ¥·ï¼ˆæ³¨é‡Šçš„ä¸­æ–‡å­—ä½“ï¼‰ï¼Œå­—ä½“å¯ä»¥ä»[åšä¸»çš„ä»“åº“](https://github.com/sherlcok314159/MyPaperMod/tree/main/static/fonts)ä¸­è·å–ã€‚

æˆ‘ä»¬åœ¨`assets/css/extended/blank.css`ä¸­æ·»åŠ ï¼š

{{< collapse summary = "assets/css/extended/blank.css" >}}
```css 
@font-face {
  font-family: "Consolas";
  src: url("/fonts/Consolas.woff2");
}

code {
  font-family: "Consolas", "LXGWWenKaiScreenR";
}

.post-content code {
  margin: auto 4px;
  padding: 4px 6px;
  font-size: 0.8em;
  line-height: 1.5;
  background: var(--code-bg);
}

.post-content pre code {
  display: block;
  margin: auto 0;
  padding: 10px;
  background: var(--hljs-bg) !important;
  color: var(--content);
  border-radius: var(--radius);
  overflow-x: auto;
  word-break: break-all;
  font-family: "Consolas", "LXGWWenKaiScreenR";
  font-size: 15px;
}

```
{{< /collapse >}}

å¹¶ä¸”ï¼Œåœ¨`PaperMod`ä¸­çš„é¢œè‰²å˜é‡é…ç½®`assets/css/core/theme-vars.css` ä¸­æ·»åŠ é…ç½®ï¼š

{{< collapse summary = "assets/css/core/theme-vars.css" >}}
```css 
/* çœç•¥çš„å†…å®¹è¯·æ‹·è´åŸå…ˆä¸»é¢˜å¯¹åº”çš„æ–‡ä»¶ */
:root {
  ...
  --hljs-bg: #f7f7f7;
  --code-bg: rgb(245, 245, 245);
}

.dark {
  ...
  --hljs-bg: rgb(46, 46, 51);
  --code-bg: rgb(55, 56, 62);
}
```
{{< /collapse >}}
æˆ‘ä»¬è¿˜ä¼šç”¨åˆ°[highlight.js](https://github.com/highlightjs/highlight.js)ç”¨æ¥æ·»åŠ é«˜äº®ï¼š  
{{< collapse summary = "layouts/_default/baseof.html" >}}  
```diff  
{{- if lt hugo.Version "0.125.7" }}
{{- errorf "=> hugo v0.125.7 or greater is required for hugo-PaperMod to build " }}
{{- end -}}

<!DOCTYPE html>
<html lang="{{ site.Language }}" dir="{{ .Language.LanguageDirection | default "auto" }}">

<head>
+    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/default.min.css">
    {{- partial "head.html" . }}
</head>

<body class="
{{- if (or (ne .Kind `page` ) (eq .Layout `archives`) (eq .Layout `search`)) -}}
{{- print "list" -}}
{{- end -}}
{{- if eq site.Params.defaultTheme `dark` -}}
{{- print " dark" }}
{{- end -}}
" id="top">
    {{- partialCached "header.html" . .Page -}}
    <main class="main">
        {{- block "main" . }}{{ end }}
    </main>
+    {{ partialCached "footer.html" . .Layout .Kind (.Param "hideFooter") (.Param "ShowCodeCopyButtons") -}}
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
</body>

</html>
```
{{< /collapse >}}
æ­¤å¤–ï¼Œ`PaperMod` é»˜è®¤çš„ä»£ç å¤åˆ¶é”®çš„åœ¨å¯¹åº”è¯­è¨€ä¸‹æ˜¯ä¸åŒçš„æ–‡å­—è¡¨ç¤ºå¤åˆ¶ç²˜è´´ï¼Œæˆ‘è§‰çš„ä¸å¤Ÿä¼˜é›…ï¼Œäºæ˜¯æ‰“ç®—ä½¿ç”¨å›¾æ ‡æ¥ä»£æ›¿ã€‚å…³äºå¤åˆ¶ç¬¦å·çš„é…ç½®åœ¨`layouts/partials/footer.html` ä¸­ï¼š

{{< collapse summary = "layouts/partials/footer.html" >}}
```html 
        copybutton.innerHTML = '{{- i18n "code_copy" | default "copy" }}';

        function copyingDone() {
            copybutton.innerHTML = '{{- i18n "code_copied" | default "copied!" }}';
            setTimeout(() => {
                copybutton.innerHTML = '{{- i18n "code_copy" | default "copy" }}';
            }, 2000);
        }
```
{{< /collapse >}}

ä¿®æ”¹ä¸ºï¼š

{{< collapse summary = "layouts/partials/footer.html" >}}
```html 
        copybutton.innerHTML = `
            <img src="/images/copy.svg" 
                 alt="å¤åˆ¶"
                 class="copy-icon"
                 width="16" 
                 height="16">
        `;

        function copyingDone() {
            copybutton.innerHTML = `
                <img src="/images/check.svg" 
                     alt="å·²å¤åˆ¶"
                     class="copied-icon"
                     width="16" 
                     height="16">
            `;
            setTimeout(() => {
                copybutton.innerHTML = `
                    <img src="/images/copy.svg" 
                         alt="å¤åˆ¶"
                         class="copy-icon"
                         width="16" 
                         height="16">
                `;
            }, 2000);
        }
```
{{< /collapse >}}

æˆ‘è¿™é‡Œåœ¨å­˜æ”¾çš„å›¾ç‰‡ä½äº`static/images/`ï¼Œå¤§å®¶å¯ä»¥é€‰æ‹©è‡ªå·±çš„è·¯å¾„ã€‚ç”±äºç¼–è¯‘ä¸ºé™æ€åšå®¢ä¹‹åï¼Œ`static/images/`å˜ä¸º`public/images/`ï¼ŒåŒæ—¶ä»¥`public/`å½“ä½œæ ¹ç›®å½•ï¼Œæ‰€ä»¥æˆ‘åœ¨ä»£ç ä¸­ä½¿ç”¨`/images/check.svg&copy.svg`ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é…ç½®å¤åˆ¶å›¾æ ‡æ ·å¼ï¼Œåœ¨`assets/css/extend.css`ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

{{< collapse summary = "assets/css/extend.css" >}}
```css 
/*copy_button*/
.copy-code {
    background: transparent;
    border: none;
    cursor: pointer;
    padding: 4px;
    position: absolute;
    right: 10px;
    top: -2px;
}

.copy-code img {
    opacity: 0.6;
    transition: opacity 0.3s, filter 0.3s; /* æ·»åŠ  filter è¿‡æ¸¡æ•ˆæœ */
}

.copy-code:hover img {
    opacity: 1;
    filter: invert(100%); /* é¢œè‰²ç¿»è½¬æ•ˆæœ */
}
```
{{< /collapse >}}

æˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯åº•è‰²ä¸ºé»‘è‰²çš„`svg`å›¾æ ‡ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œåšäº†åè‰²å¤„ç†ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬é…ç½®ä»£ç æŠ˜å ï¼Œå¯¹äºè¿‡é•¿çš„ä»£ç æ®µï¼Œååˆ†å½±å“é˜…è¯»è€…çš„æ„Ÿå—ï¼Œå‚è€ƒäº[Hugo PaperMod ä¸»é¢˜ç²¾è£…ä¿®](https://yunpengtai.top/posts/hugo-journey/#%e4%bb%a3%e7%a0%81%e6%8a%98%e5%8f%a0) ï¼Œæˆ‘ä»¬éœ€è¦åœ¨`layouts/shortcodes/collapse.html`ä¸­åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š

{{< collapse summary = "layouts/shortcodes/collapse.html" >}}
```html 
{{/* å‚æ•°å¤„ç†é€»è¾‘ */}}
{{ $threshold := default 15 (.Get "collapseThreshold") | int }}
{{ $forceCollapse := eq (.Get "forceCollapse") "true" }}
{{ $openByDefault := eq (.Get "openByDefault") "true" }}

{{/* å†…å®¹å¤„ç†é€»è¾‘ */}}
{{ $rawContent := .Inner }}
{{ $content := $rawContent | markdownify }}

{{/* ç²¾ç¡®è¡Œæ•°è®¡ç®—ï¼ˆæ’é™¤ä»£ç å—æ ‡è®°å’Œç©ºè¡Œï¼‰ */}}
{{ $cleanedContent := replaceRE `(?s)<pre.*?>\n?` "" $content }}
{{ $cleanedContent := replaceRE `(?s)</pre>\n?` "" $cleanedContent }}
{{ $lines := split $cleanedContent "\n" }}
{{ $lineCount := -1 }}
{{ range $line := $lines }}
  {{ if ne (trim $line " ") "" }}
    {{ $lineCount = add $lineCount 1 }}
  {{ end }}
{{ end }}

{{/* è‡ªåŠ¨æŠ˜å åˆ¤æ–­é€»è¾‘ */}}
{{ $shouldOpen := cond $forceCollapse 
  false 
  (or $openByDefault (lt $lineCount $threshold)) 
}}

{{/* é”™è¯¯å¤„ç† */}}
{{ if not (.Get "summary") }}
  {{ warnf "missing value for param 'summary': %s" .Position }}
{{ end }}


<p><details class="custom-collapse" {{ if $shouldOpen }}open{{ end }}>
  <summary markdown="span">
    <span>{{ .Get "summary" | markdownify }}</span>
    <span class="line-count">{{ $lineCount }} lines</span>
  </summary>
  <div class="content">
    {{ $content }}
  </div>
</details></p>
```
{{< /collapse >}}


## é¢å¤–é…ç½®

### æ­£æ–‡å®½åº¦

æˆ‘ä»¬å¤åˆ¶å¯¹åº”ç›®å½•`assets/css/core/theme-vars.css`ï¼Œå¹¶ä¿®æ”¹ä»¥ä¸‹è¡Œï¼š
{{< collapse summary = "assets/css/core/theme-vars.css" >}}
```md
root:
    --main-width: 740px;
```
{{< /collapse >}}  
### æ–‡ç« å°é¢å›¾ç§»è‡³ä¾§è¾¹  
å½“æˆ‘ä»¬æ–‡ç« å­˜åœ¨å°é¢çš„æ—¶å€™ï¼Œåœ¨`archives`ä¸­æ–‡ç« çš„æ’å¸ƒä¸­ï¼Œå›¾ç‰‡å äº†å¤§éƒ¨åˆ†ç©ºé—´ï¼Œååˆ†å½±å“æˆ‘ä»¬çš„è§‚æ„Ÿã€‚é€šè¿‡å‚è€ƒï¼š[Hugoåšå®¢æ–‡ç« å°é¢å›¾ç‰‡ç¼©å°å¹¶ç§»åˆ°ä¾§è¾¹ | PaperModä¸»é¢˜](https://cloud.tencent.com/developer/article/1969889)ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·é…ç½®ï¼š
{{< collapse summary = "layouts/_default/list.html" >}}
```diff
<article class="{{ $class }}">
-  {{- $isHidden := (.Param "cover.hiddenInList") | default (.Param "cover.hidden") | default false }}
-  {{- partial "cover.html" (dict "cxt" . "IsSingle" false "isHidden" $isHidden) }}
+  <div class="post-info">
  <header class="entry-header">
    <h2 class="entry-hint-parent">
      {{- .Title }}
      {{- if .Draft }}
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
      {{- end }}
    </h2>
  </header>
  {{- if (ne (.Param "hideSummary") true) }}
  <div class="entry-content">
    <p>{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}</p>
  </div>
  {{- end }}
  {{- if not (.Param "hideMeta") }}
  <footer class="entry-footer">
    {{- partial "post_meta.html" . -}}
  </footer>
  {{- end }}
+  </div>
+  {{- $isHidden := (.Param "cover.hiddenInList") | default (.Param "cover.hidden") | default false }}
+  {{- partial "cover.html" (dict "cxt" . "IsSingle" false "isHidden" $isHidden) }}
  <a class="entry-link" aria-label="post link to {{ .Title | plainify }}" href="{{ .Permalink }}"></a>
</article>
{{- end }}
```
{{< /collapse >}}  

{{< collapse summary = "assets/css/common/post-entry.css" >}}
```css 
/* F2 make the cover in the side on blogs page */
.post-entry {
  display: flex;
  flex-direction: row;
  align-items: center;
}

.post-info {
  display: inline-block;
  overflow: hidden;
  width: 90%;
}

.post-entry .entry-cover {
  overflow: hidden;
  padding-right: 18px;
  height: 80%;
  width: 40%;
  margin-bottom: unset;
}
```
{{< /collapse >}}

### å­—ä½“é…ç½®

æˆ‘å·²ç»å¿è¿™ä¸ªé»˜è®¤å­—ä½“å¾ˆä¹…äº†ï¼Œç°åœ¨æˆ‘ä»¬å°±åœ¨è¿™é‡Œå¹²æ‰ä»–ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œé€‰æ‹©çš„ä¸­æ–‡æ˜¯[éœé¹œæ–‡æ¥·](https://github.com/lxgw/LxgwWenKai?tab=readme-ov-file)ï¼Œè‹±æ–‡æ˜¯ Apple çš„å­—ä½“ SF Pro Text Regular æ¥æ¸²æŸ“ï¼Œæ–¹æ³•å‚è€ƒäºï¼š [Hugo PaperMod ä¸»é¢˜ç²¾è£…ä¿®](https://yunpengtai.top/posts/hugo-journey/#%e5%ad%97%e4%bd%93)ã€‚

åœ¨`assets/css/extended/blank.css`ä¸­åŠ å…¥ï¼š

{{< collapse summary = "assets/css/extended/blank.css" >}}
```css 
@font-face {
  font-family: "LXGWWenKaiScreenR";
  src: url("/fonts/lxgwwenkaiscreen.subset.v1.235.standard.woff2");
}

/* https://www.webfontfree.com/cn/download/SFProText-Regular */
@font-face {
  font-family: "SFProText-Regular";
  src: url("/fonts/SFProText-Regular.woff2");
}

body {
  font-family: "SFProText-Regular", "LXGWWenKaiScreenR";
  font-size: 16px;
  line-height: 1.6;
  word-break: break-word;
  background: var(--theme);
  font-display: swap;
}

```
{{< /collapse >}}

å­—ä½“å¯ä»¥ä»æˆ‘ä¸Šé¢æåŠåšä¸»çš„[githubä»“åº“](https://github.com/sherlcok314159/MyPaperMod/tree/main/static/fonts)å¤„è·å–ã€‚



### çŸ¥è¯†å…±äº«åè®®

> å‚è€ƒäº:[Hugo+PaperMod åŒè¯­åšå®¢æ­å»º Home-Info+Profile Mode](https://www.yunyitang.me/hugo-papermod-blog/#%E7%9F%A5%E8%AF%86%E5%85%B1%E4%BA%AB%E5%8D%8F%E8%AE%AE)ã€[Hugo Ê•â€¢á´¥â€¢Ê” Bear Blog](https://hugo.matrixcore.top/license/)

æˆ‘ä»¬åœ¨[Creative Commonsè®¸å¯è¯](https://chooser-beta.creativecommons.org/)ä¸­é€‰æ‹©ä½¿ç”¨çš„çŸ¥è¯†å…±äº«åè®®ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯`CC-BY-NC-4`åè®®ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªåè®®æ¨¡ç»„æ¥è‡ªåŠ¨å‘ˆç°ï¼š

é¦–å…ˆåˆ›å»ºæ–‡ä»¶`data/licenses.html`å¹¶æ·»åŠ 

{{< collapse summary = "data/licenses.html" >}}
```html
# data/licenses.yml
CC-BY-NC-4.0:
  name: "CC BY-NC 4.0"
  url: "https://creativecommons.org/licenses/by-nc/4.0/"
  icons: &cc_icons  # é”šç‚¹å¤ç”¨å›¾æ ‡åˆ—è¡¨
    - cc.svg
    - by.svg
    - nc.svg

# å…¶ä»–åè®®
CC-BY-SA-4.0:
  name: "CC BY-SA 4.0"
  url: "https://creativecommons.org/licenses/by-sa/4.0/"
  icons: *cc_icons  # å¤ç”¨å›¾æ ‡åˆ—è¡¨
```
{{< /collapse >}}

å…¶æ¬¡ï¼Œåˆ›å»ºæ–‡ä»¶`layouts/partials/license.html`å¹¶æ·»åŠ ï¼š

{{< collapse summary = "layouts/partials/license.html" >}}
```html 
<hr> <!-- æ·»åŠ åˆ†å‰²çº¿ -->
{{ $license := index site.Data.licenses .Params.license }}
{{ if $license }}
<div class="license-declaration" vocab="https://schema.org/" typeof="CreativeWork">
  {{/* è‡ªåŠ¨æ£€æµ‹ä¸»é¢˜æ¨¡å¼ */}}
  {{ $theme := "light" }}
  {{ if or (eq .Site.Params.colorTheme "dark") (in .Site.Params.colorTheme "auto") }}
    {{ $theme = "dark" }}
  {{ end }}
  
  <meta property="name" content="{{ .Title }}">
  <link property="copyrightHolder" href="{{ .Site.BaseURL }}#author" />
  <p>
    <span property="license" content="{{ $license.url }}">æœ¬æ–‡é‡‡ç”¨</span>
    <a 
      href="{{ $license.url }}" 
      target="_blank" 
      rel="license noopener noreferrer"
      class="license-badge"
      data-theme="{{ $theme }}"
    >
      {{ $license.name }}
      {{ range $icon := $license.icons }}
        <img 
          src="https://mirrors.creativecommons.org/presskit/icons/{{ $icon }}" 
          alt="{{ $icon | replaceRE `\.svg$` `` | upper }} å›¾æ ‡"
          class="license-icon"
          loading="lazy"
          decoding="async"
        >
      {{ end }}
    </a>
  </p>
</div>
{{ end }}
```
{{< /collapse >}}

æ¥ä¸‹æ¥ï¼Œåˆ›å»ºæ–‡ä»¶`assets/extended/custom.css`å¹¶æ·»åŠ ï¼š

{{< collapse summary = "assets/extended/custom.css" >}}
```css 
/* licenses.css */
.license-badge {
  --bg-light: #f8f9fa;
  --bg-dark: #2b2d32;
  --text-light: #212529;
  --text-dark: #f8f9fa;
  
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  border-radius: 6px;
  font-size: 0.9em;
  transition: all 0.3s ease;
  
  /* é»˜è®¤æµ…è‰²ä¸»é¢˜ */
  background: var(--bg-light);
  color: var(--text-light);
  border: 1px solid rgba(0,0,0,0.1);
}

.license-icon {
  height: 24px;
  width: auto;
  transition: filter 0.3s ease;
}

/* æ·±è‰²ä¸»é¢˜æ£€æµ‹ */
@media (prefers-color-scheme: dark) {
  .license-badge:not([data-theme="light"]) {
    background: var(--bg-dark);
    color: var(--text-dark);
    border-color: rgba(255,255,255,0.1);
    
    & .license-icon {
      filter: invert(1) hue-rotate(180deg); /* æ›´è‡ªç„¶çš„åè‰² */
    }
  }
}

/* å¼ºåˆ¶æ·±è‰²æ¨¡å¼ */
.license-badge[data-theme="dark"] {
  background: var(--bg-dark);
  color: var(--text-dark);
  border-color: rgba(255,255,255,0.1);
  
  & .license-icon {
    filter: invert(1) hue-rotate(180deg);
  }
}

/* æ‚¬åœæ•ˆæœ */
.license-badge:hover {
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  
  &[data-theme="dark"]:hover {
    box-shadow: 0 2px 8px rgba(255,255,255,0.1);
  }
}
```
{{< /collapse >}}

æœ€åï¼Œåœ¨`archetypes/default.md`ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç æ®µå³å¯å®ç°ä¸€ä¸ªè‡ªåŠ¨æ·»åŠ çš„å¼€æºåè®®å‘ˆç°æ¨¡ç»„ã€‚

{{< collapse summary = "archetypes/default.md" >}}
```md 
license: "CC-BY-NC-4.0"  # ä½ å¯¹åº”ä½¿ç”¨çš„åè®®

```
{{< /collapse >}}

å‘ˆç°æ•ˆæœå¦‚ä¸‹ï¼š

{{< figure src="/images/posts/2025_01_20-hugo_build_2/CC-BY-NC-4.png" alt="CC-BY-NC-4" title="CC-BY-NC-4"  align="center" >}}

> ä½†æ˜¯ï¼Œç”±äºæˆ‘å¯¹äºå‰ç«¯ä¸æ˜¯å¾ˆäº†è§£ï¼Œé»‘å¤œæ¨¡å¼ä¸‹çš„æ ·å¼è°ƒæ•´æœªèƒ½æ­£ç¡®å®ç°ï¼Œå¾…è§£å†³ã€‚  
### è¶…é“¾æ¥  
`hugo`çš„é»˜è®¤è¶…é“¾æ¥æ˜¯ä»¥å½“å‰é¡µé¢æ‰“å¼€ï¼Œè¿™å¯¹äºæˆ‘ä»¬çš„é˜…è¯»ä½“éªŒæ˜¯å¾ˆç³Ÿç³•çš„ï¼Œå‚è€ƒäº[Hugo è®¾ç½®å¤–éƒ¨é“¾æ¥ç”¨æ–°çª—å£æ‰“å¼€](https://ivan.show/blog/2024/5e1954a8/)ï¼Œæˆ‘ä»¬å°†å¤–éƒ¨é“¾æ¥ä½¿ç”¨æ–°çª—å£æ‰“å¼€å¹¶åœ¨é“¾æ¥åé¢æ·»åŠ ä¸€ä¸ªå°ç®­å¤´ï¼Œè€Œæœ¬åšå®¢çš„å†…å®¹ä½¿ç”¨å½“å‰çª—å£æ‰“å¼€å¹¶ä¸æ·»åŠ åç¼€ï¼š  
{{< collapse summary = "layouts/_default/_markup/render-link.html" >}}  
```html  
<a href="{{ .Destination | safeURL }}" 
   {{ with .Title }} title="{{ . }}"{{ end }}
   {{ if strings.HasPrefix .Destination "http" }} 
       target="_blank" rel="noopener" 
   {{ end }}>
   {{ .Text | safeHTML }}
   {{- if strings.HasPrefix .Destination "http" -}}
       <span class="external-link">â†—</span>
   {{- end -}}
</a>  
```  
{{< /collapse >}}  
åŒæ—¶åœ¨æ·»åŠ å°å°–å¤´æ ·å¼ï¼š  
{{< collapse summary = "assets/extended/custom.css" >}}  
```css 
.external-link {
    display: inline-block;
    margin-left: 0.2em;
    font-size: 0.8em;
    text-decoration: none;
    vertical-align: super;
}  
```  
{{< /collapse >}}  
> å¤–éƒ¨é“¾æ¥ï¼š[æˆ‘çš„githubä¸»é¡µ](https://github.com/Downmars)  
> å†…éƒ¨é“¾æ¥ï¼š[Hugoåšå®¢æ­å»º_åŸºç¡€ ğŸ˜Š](../2025_01_19-hugo_build_1)  




### ä¿®æ”¹æ—¶é—´

åŸæœ¬ä¸»é¢˜å¹¶æ²¡æœ‰æ˜¾ç¤ºã€Œä¿®æ”¹æ—¶é—´ã€çš„åŠŸèƒ½ï¼Œæˆ‘åœ¨è¿™é‡Œå‚è€ƒäº†[Hugo PaperMod ä¸»é¢˜ç²¾è£…ä¿®](https://yunpengtai.top/posts/hugo-journey/#%e6%b7%bb%e5%8a%a0%e4%bf%ae%e6%94%b9%e6%97%b6%e9%97%b4)ã€‚

åœ¨`layouts/partials/post_meta.html`ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œå‚è€ƒçš„åšå®¢ä¸­`$scratch.Add`é”™è¯¯è¢«åŒ…è£¹åœ¨`()`ä¸­ï¼Œå¹¶ä¸”è¡Œæœ«è¿˜æœ‰ä¸€ä¸ªå¤šä½™çš„`$`ï¼Œæˆ‘åœ¨æ­¤åšäº†ä¿®æ”¹ï¼š

{{< collapse summary = "layouts/partials/post_meta.html" >}}
```html 
{{- if (.Param "ShowLastMod") -}}
    {{- if ne (.Lastmod.Format "2006-01-02") (.Date.Format "2006-01-02") -}}
        {{- $scratch.Add "meta" (slice (printf "Updated:&nbsp;%s" (.Lastmod.Format (.Site.Params.dateFormat | default "January 2, 2006")))) -}}
    {{- end -}}
{{- end -}}
```
{{< /collapse >}}

å¹¶ä¸”ï¼Œåœ¨`hugo.yaml`ä¸­åŠ å…¥ï¼š

{{< collapse summary = "hugo.yaml" >}}
```yaml 
params:
  showLastMod: true
```
{{< /collapse >}}

åŒæ—¶ï¼Œæˆ‘ä»¬åœ¨`archetypes/default.md`ä¸­çš„é…ç½®å¦‚ä¸‹ï¼š

{{< collapse summary = "archetypes/default.md" >}}
```md 
---
title: "{{ replace .Name "-" " " | title }}"
date: {{ .Date }}
lastmod: {{ .Date }}
---
```
{{< /collapse >}}
ç­‰æˆ‘è¿‡å‡ å¤©çœ‹çœ‹è¿™ä¸ªæ•ˆæœå’‹æ ·ã€‚

### MarginNote 

> åœ¨è¿™é‡Œååˆ†æ„Ÿè°¢[Yunpeng Tai](https://yunpengtai.top/)çš„åšå®¢ï¼Œæˆ‘ä»ä¸Šé¢å­¦ä¹ å’Œæ‘˜é€‰äº†å¾ˆå¤šå†…å®¹åœ¨æœ¬æ–‡ä¸­ã€‚


æˆ‘åœ¨æ­¤å¤„å¯¹äºæ ·å¼åšäº†éƒ¨åˆ†ä¿®æ”¹ï¼Œåœ¨`assets/extended/custom.css`ï¼š  
{{< collapse summary = "assets/extended/custom.css" >}}
```css 

.sidenote {
  float: right;
  clear: right;
  position: relative;
  margin-top: 1rem;
  max-width: 300px;
  padding: 8px 16px; /* å¢åŠ å†…è¾¹è·ä»¥ä¾¿æœ‰è¶³å¤Ÿç©ºé—´ */
  border: 2px solid transparent; /* é»˜è®¤é€æ˜è¾¹æ¡† */
  border-radius: var(--radius); /* åœ†è§’ */
  box-shadow: 0 2px 4px var(--sidenote-shadow1); /* é»˜è®¤è½»å¾®é˜´å½± */
  transition: all 0.3s ease; /* å¢åŠ å¹³æ»‘è¿‡æ¸¡æ•ˆæœ */
}

/* Wide viewport */
@media (min-width: 1400px) {
    .sidenote {
        float: right;
        clear: right;
        margin-right: -20vw;
        text-align: left;
        top: -3rem;
        width: 20vw;
        margin-top: 1rem;
    }
}

/* Narrow viewport */
@media (max-width: 1400px) {
    .sidenote {
        float: right;
        text-align: left;
        width: 100%;
        margin: 1rem 0;
        padding-left: 15%;
    }
}

/* å®šä¹‰æ•°å­—ç¼–å·çš„å¤–è§‚ */
.sidenote-number {
  counter-increment: sidenote-counter;
  position: relative;
}

/* ç»™æ¯ä¸ªsidenoteæ·»åŠ #ç¬¦å· */
.sidenote::before {
  content: "# ";
  position: relative;
  font-size: 0.9em;
  font-weight: 700;
  color: red; /* é»˜è®¤çº¢è‰² */
  transition: all 0.3s ease; /* å¢åŠ è¿‡æ¸¡æ•ˆæœ */
}

/* ç»™sidenote-numberæ·»åŠ åç¼€# */
.sidenote-number::after {
  content: "#";
  vertical-align: super;
  font-size: 0.8em;
  font-weight: 700;
  color: #409dff; /* é»˜è®¤è“è‰² */
  transition: all 0.3s ease; /* å¢åŠ è¿‡æ¸¡æ•ˆæœ */
}

/* æ‚¬åœæ—¶ï¼Œæ•°å­—#å’Œæ³¨é‡Šçš„é«˜äº®æ•ˆæœ */
.sidenote-number:hover::after {
  color: red; /* æ‚¬åœæ—¶æ”¹å˜#ç¬¦å·çš„é¢œè‰² */

}

/* æ‚¬åœæ—¶ï¼Œå¢åŠ sidenoteçš„èƒŒæ™¯å’Œé˜´å½± */
.sidenote-number:hover .sidenote {
  background-color: var(--sidenote-bg-hover); /* æ‚¬åœæ—¶èƒŒæ™¯è‰²å˜åŒ– */
  box-shadow: 0 4px 8px var(--sidenote-shadow2); /* å¼ºåŒ–é˜´å½±æ•ˆæœ */
}

```
{{< /collapse >}}

åŒæ—¶ï¼Œå¯¹äº`shortcode`ä¹Ÿæœ‰ç›¸åº”çš„ä¿®æ”¹ï¼Œåœ¨`layouts/shortcodes/sidenote.html`ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

{{< collapse summary = "layouts/shortcodes/sidenote.htm" >}}
```html 
<span class="sidenote-number"><small class="sidenote">{{ .Inner | markdownify }}</small></span>
```
{{< /collapse >}}

è¿™æ˜¯ç¤ºä¾‹ {{< sidenote >}} è¿™æ˜¯ç¤ºä¾‹çš„ä¾§è¾¹æ³¨è§£ {{< /sidenote >}}


### ç›˜å¤ä¹‹ç™½

{{< quote >}} 
[ã€Œç›¤å¤ä¹‹ç™½ã€](https://blog.xiaoquankong.ai/zh/posts/chinese-document-typesetting-specification-spacing-of-pangu/)ä¸€æ–‡ä¸­è®¨è®ºåˆ°ï¼Œæ‰€æœ‰çš„ä¸­æ–‡å­—å’ŒåŠå½¢çš„è‹±æ–‡ã€æ•¸å­—ã€ç¬¦è™Ÿä¹‹é–“åº”è¯¥å­˜åœ¨çš„ç©ºç™½ï¼Œè¢«æ¼¢å­¸å®¶ç¨±ç‚ºã€Œç›¤å¤ä¹‹ç™½ã€ï¼Œå› ç‚ºå®ƒåŠˆé–‹äº†å…¨å½¢å­—å’ŒåŠå½¢å­—ä¹‹é–“çš„æ··æ²Œã€‚
{{< /quote >}}

æˆ‘ä»¬éœ€è¦åœ¨`layouts/partials/extend_footer.html`ä¸­åŠ å…¥ï¼š

{{< collapse summary = "layouts/partials/extend_footer.html" >}}
```html 
{{- $highlight := resources.Get "js/pangu.min.js" -}}
<script>
  (function (u, c) {
    var d = document,
      t = "script",
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener("load", function (e) {
        c(e);
      });
    }
    s.parentNode.insertBefore(o, s);
  })("{{ $highlight.RelPermalink }}", function () {
    pangu.spacingPage();
  });
</script>
```
{{< /collapse >}}

åŒæ—¶ï¼Œéœ€è¦åˆ›å»º`assets/js/pangu.min.js`ï¼Œç½‘ç«™åŠ è½½æ—¶ï¼Œç›˜å¤ä¹‹ç™½è‡ªåŠ¨åŠ è½½ï¼Œå¤§å®¶å¯ä»¥ä»æ­¤å¤„ä¸‹è½½ã€‚


### Blockquote

> å‚è€ƒäºï¼š[Hugo PaperMod ä¸»é¢˜ç²¾è£…ä¿®](https://yunpengtai.top/posts/hugo-journey/#blockquote)

{{< quote >}}
ä¸ºä»€ä¹ˆè¦æ¼”å¥æ˜¥æ—¥å½±ï¼
{{< /quote >}}

åœ¨ `layouts/shortcodes/quote.html` åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š
{{< collapse summary="layouts/shortcodes/quote.html" >}}
```html
<blockquote class="quote{{ range .Params }} {{ . }}{{ end }}">
    {{- $content := .Inner | markdownify -}}
    {{- if not (strings.HasPrefix $content "<p>") -}}
        {{ printf "<p>%s</p>" $content | safeHTML }}
    {{- else -}}
        {{ $content }}
    {{- end -}}
</blockquote>
```
{{< /collapse >}}

æˆ‘ä»¬åœ¨`assets/css/extended/quote.css`ä¸­åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š

{{< collapse summary="assets/css/extended/quote.css" >}}
```css 
blockquote.quote {
  position: relative;
  margin: 1em auto;
  padding-left: 3em;
  border: none;
}

blockquote.quote::before {
  position: absolute;
  left: 0;
  content: "â€œ";
  font-size: 3em;
  font-weight: bold;
  line-height: 1;
}

blockquote.quote-copyright {
  position: relative;
  margin: 2em auto;
  padding-left: 3em;
  border: none;
  background-color: aliceblue;
}

blockquote.quote-copyright::before {
  position: absolute;
  left: 0;
  content: "â€œ";
  font-size: 3em;
  font-weight: bold;
  line-height: 1;
}

```
{{< /collapse >}}

### Admonition  
{{< admonition type="warning" >}}
æ³¨æ„æŸ¥çœ‹åšå®¢ä¿®æ”¹æ—¶é—´ï¼Œåšå®¢å†…å®¹å¯èƒ½è¿‡æ—¶ï¼
{{< /admonition >}}
åœ¨åšå®¢ä¸­å¾€å¾€éœ€è¦æˆ‘ä»¬åœ¨ä¸€äº›åœ°æ–¹ç»™äºˆè¯»è€…é¢å¤–éœ€è¦æ³¨æ„çš„ä¿¡æ¯ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Admonitionã€‚æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªæ”¯æŒAdmonitionï¼ˆç±»ä¼¼æç¤ºã€è­¦å‘Šã€æ³¨æ„ç­‰åŒºå—ï¼‰çš„ Shortcode:  
{{< collapse summary="layouts/shortcodes/admonition.html" >}}
```html  
{{- $type := .Get "type" | default "note" -}}
{{- $title := .Get "title" | default (humanize $type) -}}
{{- $icon := .Get "icon" -}}
{{- $collapsible := .Get "collapsible" | default false -}}

{{/* é»˜è®¤å›¾æ ‡æ˜ å°„ï¼ˆå¯è‡ªå®šä¹‰ï¼‰ */}}
{{- $defaultIcons := dict 
  "note" "fas fa-info-circle"
  "tip" "fas fa-lightbulb"
  "warning" "fas fa-exclamation-triangle"
  "danger" "fas fa-skull-crossbones"
-}}
{{- if not $icon -}}
  {{- $icon = index $defaultIcons $type -}}
{{- end -}}

<div class="admonition {{ $type }} {{ if $collapsible }}collapsible{{ end }}">
  <div class="admonition-header">
    {{ if $icon }}<i class="{{ $icon }}"></i>{{ end }}
    <span>{{ $title }}</span>
    {{ if $collapsible }}<i class="toggle-icon fas fa-chevron-down"></i>{{ end }}
  </div>
  <div class="admonition-content">
    {{ .Inner | markdownify }}
  </div>
</div>
```  
{{< /collapse >}}
åŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸ºå…¶æ·»åŠ cssæ ·å¼ï¼š  
{{< collapse summary="assets/extended/admonition.css" >}}  
```css  
/* åŸºç¡€å˜é‡ */
:root {
  --admonition-border-width: 4px;
  --admonition-radius: 8px;
  --admonition-shadow: 0 3px 10px rgba(0,0,0,0.05);
  --transition-speed: 0.3s;
}

.admonition {
  margin: 2rem 0;
  border-left: var(--admonition-border-width) solid;
  border-radius: var(--admonition-radius);
  background: white;
  box-shadow: var(--admonition-shadow);
  transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
}

/* æ‚¬åœåŠ¨ç”» */
.admonition:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 15px rgba(0,0,0,0.1);
}

/* å¤´éƒ¨æ ·å¼ */
.admonition-header {
  display: flex;
  align-items: center;
  gap: 0.8rem;
  padding: 0.8rem 1.2rem 0.8rem 1.2rem;
  font-size: 1.2rem; /* æ ‡é¢˜å­—ä½“å¤§å° */
  font-weight: 600;
  border-radius: var(--admonition-radius) var(--admonition-radius) 0 0;
}

/* å†…å®¹åŒºåŸŸ */
.admonition-content {
  font-size: 1rem; /* å†…å®¹åŒºåŸŸå­—ä½“å¤§å° */
  font-weight: normal;
  padding: 0rem 1.2rem 0.8rem 1.2rem;
  line-height: 1.6;
  color: rgba(0,0,0,0.8);
}

/* ç±»å‹é…è‰²ï¼ˆæ›´æŸ”å’Œçš„ç°ä»£è‰²ï¼‰ */
.admonition.note {
  border-color: #4A90E2;
  background: linear-gradient(to right, #f8fcff 1%, white 10%);
}
.admonition.tip {
  border-color: #00C781;
  background: linear-gradient(to right, #f2fff9 1%, white 10%);
}
.admonition.warning {
  border-color: #FFB800;
  background: linear-gradient(to right, #fff9e6 1%, white 10%);
}
.admonition.danger {
  border-color: #FF4757;
  background: linear-gradient(to right, #fff6f5 1%, white 10%);
}

/* æŠ˜å åŠŸèƒ½ */
.admonition.collapsible .admonition-content {
  display: none;
}
.admonition.collapsible.active .admonition-content {
  display: block;
}
.admonition.collapsible .toggle-icon {
  margin-left: auto;
  transition: transform var(--transition-speed) ease;
}
.admonition.collapsible.active .toggle-icon {
  transform: rotate(180deg);
}

```  
{{< /collapse >}}
ä¸ºäº†æ·»åŠ æŠ˜å åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå…¶æ·»åŠ JSæ–‡ä»¶ï¼š  
{{< collapse summary="assets/js/admonition.js" >}}  
```js  
document.querySelectorAll('.admonition.collapsible').forEach(admonition => {
  const header = admonition.querySelector('.admonition-header');
  header.addEventListener('click', () => {
    admonition.classList.toggle('active');
  });
});

```  
{{< /collapse >}}
ç”±äºæˆ‘ä»¬ä½¿ç”¨äº†[Fonts Awesome](https://fontawesome.com/search)ä½œä¸ºæˆ‘ä»¬çš„å›¾æ ‡æ”¯æŒï¼Œè¿˜éœ€è¦å¯¼å…¥Fonts Awesomeçš„æ ·å¼æ–‡ä»¶ï¼Œæˆ‘ä»¬è¿™è¾¹é€‰æ‹©CDNå¯¼å…¥ã€‚å¹¶ä¸”åœ¨åŒä¸€æ–‡ä»¶ä¸­å¯¼å…¥æŠ˜å çš„JSï¼š  
{{< collapse summary="layouts/_default/baseof.html" >}}
```diff  
{{- if lt hugo.Version "0.125.7" }}
{{- errorf "=> hugo v0.125.7 or greater is required for hugo-PaperMod to build " }}
{{- end -}}

<!DOCTYPE html>
<html lang="{{ site.Language }}" dir="{{ .Language.LanguageDirection | default "auto" }}">

<head>
    <link rel="stylesheet" href="{{ "an-old-hope.min.css" | relURL }}">
    {{- partial "head.html" . }}
+    <!-- æ·»åŠ  Font Awesome CDN é“¾æ¥ -->
+    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body class="
{{- if (or (ne .Kind `page` ) (eq .Layout `archives`) (eq .Layout `search`)) -}}
{{- print "list" -}}
{{- end -}}
{{- if eq site.Params.defaultTheme `dark` -}}
{{- print " dark" }}
{{- end -}}
" id="top">
    {{- partialCached "header.html" . .Page -}}
    <main class="main">
        {{- block "main" . }}{{ end }}
    </main>
    {{ partialCached "footer.html" . .Layout .Kind (.Param "hideFooter") (.Param "ShowCodeCopyButtons") -}}
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
+<!-- admonition -->
+{{ $js := resources.Get "js/admonition.js" | minify | fingerprint }}
+<script src="{{ $js.RelPermalink }}" defer></script>
</body>

</html>
```  
{{< /collapse >}}

### å‹é“¾  
å‹é“¾ä¹Ÿæ˜¯åšå®¢ä¸­ä¸å¾—ä¸å“çš„ä¸€ä¸ªç¯èŠ‚ï¼Œæˆ‘åœ¨è¿™é‡Œå‚è€ƒçš„æ˜¯[sulv-hugo-papermod|xyming108](https://github.com/xyming108/sulv-hugo-papermod/blob/main/layouts/shortcodes/friend.html)ï¼Œå½“é¼ æ ‡æµ®åŠ¨åˆ°å‹é“¾æ‰€åœ¨çš„ä½ç½®ï¼Œå¤´åƒå°±ä¼šå¼€å§‹æ—‹è½¬å¹¶æ”¾å¤§ã€‚é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªfriendçš„shortcodeï¼š
{{< collapse summary="layouts/shortcodes/friends.html" >}}
```html  
{{- if .IsNamedParams -}}
<a target="_blank" href={{ .Get "url" }} title={{ .Get "name" }} class="friendurl">
  <div class="frienddiv">
    <div class="frienddivleft">
      <img class="myfriend" src={{ .Get "logo" }} />
    </div>
    <div class="frienddivright">
      <div class="friendname">{{- .Get "name" -}}</div>
      <div class="friendinfo">{{- .Get "word" -}}</div>
    </div>
  </div>
</a>
{{- end }}

```
{{< /collapse >}}
è¿™è¾¹å‚è€ƒçš„æ˜¯[æ—‹è½¬çš„å‹é“¾|Yunpeng Tai](https://yunpengtai.top/posts/hugo-journey/#shortcodes-%e4%a4%a7%e8%b5%8f)ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ å¯¹åº”çš„cssæ¥ç¾åŒ–ä¸€ä¸‹ã€‚  
{{< collapse summary="assets/css/extended/friends.css" >}}
```css  
.friendurl {
  text-decoration: none !important;
  color: black;
  box-shadow: none !important;
}

.myfriend {
  width: 56px !important;
  height: 56px !important;
  border-radius: 50% !important;
  padding: 2px;
  margin-top: 20px !important;
  margin-left: 14px !important;
  background-color: #fff;
}

.frienddiv {
  overflow: auto;
  height: 100px;
  width: 49%;
  display: inline-block !important;
  border-radius: 5px;
  background: none;
  -webkit-transition: all ease-out 0.3s;
  -moz-transition: all ease-out 0.3s;
  -o-transition: all ease-out 0.3s;
  transition: all ease-out 0.3s;
}

.dark .frienddiv:hover {
  background: var(--code-bg);
}

.frienddiv:hover {
  background: var(--theme);
  transition: transform 1s;
  webkit-transform: scale(1.1);
  -moz-transform: scale(1.2);
  -ms-transform: scale(1.2);
  -o-transform: scale(1.2);
  transform: scale(1.1);
}

.frienddiv:hover .frienddivleft img {
  transition: 0.9s !important;
  -webkit-transition: 0.9s !important;
  -moz-transition: 0.9s !important;
  -o-transition: 0.9s !important;
  -ms-transition: 0.9s !important;
  transform: rotate(360deg) !important;
  -webkit-transform: rotate(360deg) !important;
  -moz-transform: rotate(360deg) !important;
  -o-transform: rotate(360deg) !important;
  -ms-transform: rotate(360deg) !important;
}

.frienddivleft {
  width: 92px;
  float: left;
  margin-right: -5px;
}

.frienddivright {
  margin-top: 18px;
  margin-right: 18px;
}

.friendname {
  text-overflow: ellipsis;
  font-size: 100%;
  margin-bottom: 5px;
  color: var(--primary);
}

.friendinfo {
  text-overflow: ellipsis;
  font-size: 70%;
  color: var(--primary);
}

@media screen and (max-width: 600px) {
  .friendinfo {
    display: none;
  }
  .frienddivleft {
    width: 84px;
    margin: auto;
  }
  .frienddivright {
    height: 100%;
    margin: auto;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .friendname {
    font-size: 18px;
  }
}

```
{{< /collapse >}}
åœ¨æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨shortcodeæ¥æ˜¾ç¤ºå‹é“¾äº†ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åˆ›å»ºä¸€ä¸ªé¡µé¢æ¥æ”¾ç½®æˆ‘ä»¬çš„å‹é“¾ã€‚  
é¦–å…ˆï¼Œéœ€è¦åœ¨hugo.yamlä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š
{{< collapse summary="hugo.yaml" >}}  
```diff  
languages:
  zh:
    menu:
      main:
+        - identifier: friends
+          name: "å‹é“¾"
+          url: "/friends/"
+          weight: 4
```
{{< /collapse >}}
å…¶æ¬¡ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºå¯¹åº”ä½ç½®çš„friendsçš„å¯¼è§ˆé¡µå†…å®¹ï¼š  
```bash  
$ mkdir content/zh/friends/
$ vim content/zh/friends/index.md  
```

åœ¨å…¶ä¸­æ·»åŠ ï¼š
{{< collapse summary="content/zh/friends/index.md" >}}  
```md  
---
title: "å‹é“¾"
layout: "friends"
summary: "è¿™æ˜¯æˆ‘çš„å‹é“¾é¡µé¢"
---
{{</*/* friend 
    name="Downmars" 
    url="https://downmars.github.io/zh/posts/" 
    logo="https://raw.githubusercontent.com/Downmars/images-PicGo/main/img/miku.jpg"
    word="Enjoy your life!" 
*/*/>}}
```
{{< /collapse >}}

è¿™è¾¹çš„å‹é“¾æ ¼å¼ä¸ºï¼š`{{</* friend name="downmars" url="https://downmars.github.io/zh/posts/" logo="https://raw.githubusercontent.com/downmars/images-picgo/main/img/miku.jpg" word="enjoy your life!" */>}}`ï¼Œä¸Šè¿°çš„`/*  */`æ˜¯ä¸ºäº†èƒ½å¤Ÿé¡ºåˆ©è½¬ä¹‰æˆ‘çš„shortcodeè€Œä¸è¢«markdownè½¬ä¹‰ä¸ºå‹é“¾ã€‚

æ¥ç€ï¼Œæˆ‘ä»¬ä¸ºè¿™ä¸ªå¯¼è§ˆé¡µæ·»åŠ htmlæ ·å¼ï¼š
{{< collapse summary="layouts/_default/friends.html" >}}  
```html  
{{ define "main" }}
<main class="main">
    <article class="friend-container">
        <header class="page-header">
            <h1>{{ .Title }}</h1>
            {{ with .Params.summary }}<p class="summary">{{ . }}</p>{{ end }}
        </header>
        
        <section class="friend-grid">
            {{ .Content }}
        </section>
    </article>
</main>
{{ end }}

```
{{< /collapse >}}

è¿™æ ·æˆ‘ä»¬åº”è¯¥å°±å¯ä»¥åœ¨é¡µé¢çš„å¯¹åº”ä½ç½®çœ‹åˆ°æˆ‘ä»¬çš„å‹é“¾é“¾æ¥äº†ã€‚


### Shortcodeså¤§èµ

`hugo`é‡‡ç”¨`markdown`çš„æ ¼å¼è¿›è¡Œå†…å®¹åˆ›ä½œï¼Œä½†æ˜¯å½“æˆ‘ä»¬éœ€è¦ä¸€äº›ç‰¹æ®ŠåŠŸèƒ½çš„æ—¶å€™ï¼Œ`markdown`å¹¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚æˆ‘ä»¬åœ¨è¿™ä¸ªæ—¶å€™å¯èƒ½éœ€è¦æ’å…¥ä¸€äº›`html`ä»£ç ï¼Œè¿™å¯¹äºæ•´ä¸ª`markdown`çš„æ ¼å¼ä¸å¯è¯»æ€§éƒ½æ˜¯å¾ˆç³Ÿç³•çš„ã€‚å¹¸è¿çš„æ˜¯ï¼Œ`hugo`ç»™æˆ‘ä»¬æä¾›äº†ç®€ç (`Shortcodes`)åŠŸèƒ½ï¼Œåœ¨æˆ‘ä»¬å‡†å¤‡å¥½å¯¹åº”çš„ç®€ç æ¨¡æ¿ä¸ç®€ç ï¼Œè¿™èƒ½å¤Ÿåœ¨ä½¿ç”¨ç®€ç çš„æ—¶å€™ï¼Œå°†`hugo`è‡ªåŠ¨è½¬æ¢ä¸º`html`è¯­è¨€ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿä½¿ç”¨å¾ˆç®€ç çš„æ ·å¼æ¥å®ç°éœ€è¦çš„ç‰¹æ®ŠåŠŸèƒ½ã€‚

å…³äº`Shortcodes`çš„ç›¸å…³çŸ¥è¯†å¯ä»¥å‚è€ƒ[Shortcodes templates](https://gohugo.io/templates/shortcode/)ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œå‰å¾€æŸ¥çœ‹ã€‚

#### å›¾åƒæ”¾å¤§

> `{{</* figure src="/path/to/image.jpg" alt="A beautiful image" title="Image" caption="This is a caption for the image" align="center" width=600px height=300px */>}}`

{{< figure src="/images/posts/2025_01_20-hugo_build_2/plsn_3.jpg" alt="A beautiful landscape" title="Sonny_boy" caption="This is a caption for the image" align="center" width=600px height=300px >}}

#### è‡ªåŠ¨æŠ˜å ä»£ç 

> `{{</* collapse summary="test" */>}}` {ä»£ç æ®µ} `{{</* /collapse */>}}`

{{< collapse summary="test" >}}
```md 
test
```
{{< /collapse >}}

#### ä¾§è¾¹æ³¨è§£

> `è¿™æ˜¯ç¤ºä¾‹ {{</* sidenote */>}} è¿™æ˜¯ç¤ºä¾‹çš„ä¾§è¾¹æ³¨è§£ {{</* /sidenote */>}}`

è¿™æ˜¯ç¤ºä¾‹ {{< sidenote >}} è¿™æ˜¯ç¤ºä¾‹çš„ä¾§è¾¹æ³¨è§£aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa {{< /sidenote >}}


#### å¼•ç”¨

> `{{</* quote */>}}` {å¼•ç”¨æ®µ} `{{</* /quote */>}}`

{{< quote >}}
ä¸ºä»€ä¹ˆè¦æ¼”å¥æ˜¥æ—¥å½±ï¼
{{< /quote >}}

#### è½¬ä¹‰æ¸²æŸ“

å‚è€ƒäºï¼š[å¦‚ä½•åœ¨ä»£ç å—é‡Œå†…åµŒ HUGO çš„ç®€ç  (SHORTCODES) | æ¶ˆå¤éŒ„](https://tin6.com/post/how-to-escape-hugo-shortcodes-within-hugo-markdown/)ï¼Œç”±äº`Shortcodes`ä»£ç ä¼šè¢«`hugo`ç›´æ¥è½¬ä¹‰ä¸ºå¯¹åº”çš„åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†`Shortcodes`çš„æ‹¬å·å†…åŠ å…¥`/* */`é˜²æ­¢è½¬ä¹‰ã€‚æˆ‘ä»¬éœ€è¦åœ¨`markdown`ä¸­è¾“å…¥ï¼š
```md 
{{</*/* myshortcode */*/>}}
```
æ¸²æŸ“ç»“æœï¼š
```
{{</* myshortcode */>}}
```
#### Asciinema

> `{{</* asciinema ID */>}}`

{{< asciinema 239367 >}}

#### Admonition  

> {{</* admonition type="danger" title="ä¸¥é‡è­¦å‘Šï¼" collapsible="true" */>}}  
> å¯æŠ˜å çš„è­¦å‘ŠåŒºå—ï¼Œç‚¹å‡»å¤´éƒ¨å±•å¼€/æ”¶èµ·  
> æ”¯æŒ **Markdown** å’Œè‡ªåŠ¨å›¾æ ‡âš¡  
> {{</* /admonition */>}}  

{{< admonition type="note" >}}
è¿™æ˜¯ä¸€ä¸ªè®°å½•ã€‚
{{< /admonition >}}

{{< admonition type="tip" collapsible="true" >}}
è¿™æ˜¯ä¸€ä¸ªæç¤º!
{{< /admonition >}}

{{< admonition type="warning" >}}
è­¦å‘Šè­¦å‘Šâš ï¸
{{< /admonition >}}

{{< admonition type="danger" title="ä¸¥é‡è­¦å‘Šï¼" collapsible="true" >}}
å¯æŠ˜å çš„è­¦å‘ŠåŒºå—ï¼Œç‚¹å‡»å¤´éƒ¨å±•å¼€/æ”¶èµ·  
æ”¯æŒ **Markdown** å’Œè‡ªåŠ¨å›¾æ ‡âš¡
{{< /admonition >}}


## æ€»ç»“
å…³äºhugoçš„é…ç½®æš‚æ—¶å°±å‘Šä¸€æ®µè½äº†ï¼Œä¹‹åå¯èƒ½ä¼šæœ‰æ‰€å¢å‡ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°å¤§å®¶ã€‚:smile:
