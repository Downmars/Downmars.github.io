---
title: "Hugoåšå®¢æ­å»º_é…ç½® ğŸš€"
date: 2025-01-20T20:42:23+08:00
lastmod: 2025-01-20T20:42:23+08:00
draft: false

# ä½œè€…
author: "Downmars"

# åˆ†ç±»å’Œæ ‡ç­¾
tags: ["Hugo", "configuration"]
categories: [""]

# æè¿°
description: "" # SEO æœç´¢ä¼˜åŒ–
summary: ""    # åˆ—è¡¨é¡µå±•ç¤ºçš„ç®€çŸ­æè¿°

# å¯é€‰ï¼šæƒé‡ï¼ˆç”¨äºç½®é¡¶æ–‡ç« ï¼‰
weight: null

# å¯é€‰ï¼šå°é¢å›¾ç‰‡
cover:
    image: "images/plsn_1.jpg"
    alt: "Sonny_boy"
    caption: ""
---

# å‰è¨€
åœ¨ä¸Šä¸€ç¯‡æ–‡ç« â€œ[Hugoåšå®¢æ­å»º_åŸºç¡€ ğŸ˜Š](../hugo_build_1)â€ä¸­ï¼Œæˆ‘ä»¬è®²è§£äº†å¦‚ä½•æ­å»ºä¸€ä¸ªHugoåšå®¢ï¼Œè¿™ä¸€ç¯‡æ–‡ç« å°†ä¼šè®²è§£å¦‚ä½•é…ç½®Hugoåšå®¢ã€‚

# åŸºç¡€é…ç½®æ–‡ä»¶
æˆ‘ä»¬æ›¾ç»åœ¨`hugo.yaml`ä¸­é…ç½®æœ¬åšå®¢çš„ä¸€äº›åŠŸèƒ½ï¼Œæˆ‘ä»¬å°†ä¼šåœ¨è¿™ä¸€éƒ¨åˆ†è¡¥å……å’Œè®¨è®ºå‰©ä½™çš„é…ç½®ï¼š
```yaml
# Basic Configuration (åŸºç¡€é…ç½®)
baseURL: ""               # Site URL (ç½‘ç«™ URL)(e.g. https://downmars.github.io/)
title: ""                # Site title (ç½‘ç«™æ ‡é¢˜)(e.g. DLog)
theme: ""                # Theme name (ä¸»é¢˜åç§°)(e.g. PaperMod, in /themes/)

# Feature Toggles (åŠŸèƒ½å¼€å…³)
enableEmoji: true         # Enable emoji support (å¯ç”¨è¡¨æƒ…æ”¯æŒ)(e.g. https://gohugo.io/quick-reference/emojis/#smileys--emotion)
enableRobotsTXT: true     # Enable search engine support (å¯ç”¨æœç´¢å¼•æ“æ”¯æŒ)
hasCJKLanguage: true      # Enable CJK language support (å¯ç”¨ä¸­æ—¥éŸ©è¯­è¨€æ”¯æŒ)
buildDrafts: false        # Build draft posts (æ˜¯å¦æ„å»ºè‰ç¨¿æ–‡ç« )
buildFuture: false        # Build future posts (æ˜¯å¦æ„å»ºæœªæ¥æ—¥æœŸæ–‡ç« ) 
buildExpired: false       # Build expired posts (æ˜¯å¦æ„å»ºè¿‡æœŸæ–‡ç« )

# Parameters Configuration (å‚æ•°é…ç½®)
params:
  # Theme Settings (ä¸»é¢˜è®¾ç½®)
  defaultTheme: dark      # Default theme mode (é»˜è®¤ä¸»é¢˜æ¨¡å¼)
  disableThemeToggle: false # Allow theme switching (å…è®¸ä¸»é¢˜åˆ‡æ¢)
 
  # Display Features (æ˜¾ç¤ºåŠŸèƒ½)
  ShowShareButtons: true    # Show social share buttons (æ˜¾ç¤ºåˆ†äº«æŒ‰é’®)
  ShowCodeCopyButtons: true # Show code copy buttons (æ˜¾ç¤ºä»£ç å¤åˆ¶æŒ‰é’®)
  ShowReadingTime: true    # Show reading time estimate (æ˜¾ç¤ºé˜…è¯»æ—¶é—´)
  ShowWordCount: true      # Show word count (æ˜¾ç¤ºå­—æ•°ç»Ÿè®¡)
  ShowPostNavLinks: true   # Show post navigation (æ˜¾ç¤ºæ–‡ç« å¯¼èˆª)
  ShowBreadCrumbs: true    # Show breadcrumb navigation (æ˜¾ç¤ºé¢åŒ…å±‘å¯¼èˆª)
  ShowToc: true           # Show table of contents (æ˜¾ç¤ºç›®å½•)
  TocOpen: true          # TOC expanded by default (ç›®å½•é»˜è®¤å±•å¼€)

 # Comment System (è¯„è®ºç³»ç»Ÿ)
  comments: true          # Enable comments (å¯ç”¨è¯„è®º)
  giscus:                # Giscus configuration (Giscus é…ç½®)
    repo: ""
    repoId: ""
    category: ""
    categoryId: ""
    mapping: "pathname"
    strict: "0"
    reactionsEnabled: "1"
    emitMetadata: "0"
    inputPosition: "bottom"
    lightTheme: "light"
    darkTheme: "dark"
    lang: "zh-CN"
    crossorigin: "anonymous"

  fuseOpts: # refer: https://sonnycalcr.github.io/posts/build-a-blog-using-hugo-papermod-github-pages/#%e9%85%8d%e7%bd%ae%e6%90%9c%e7%b4%a2
    isCaseSensitive: false # æ˜¯å¦å¤§å°å†™æ•æ„Ÿ
    shouldSort: true # æ˜¯å¦æ’åº
    location: 0
    distance: 1000
    threshold: 0.4
    minMatchCharLength: 0
    # limit: 10 # refer: https://www.fusejs.io/api/methods.html#search
    keys: ["title", "permalink", "summary", "content"]
    includeMatches: true

  # Assets Files (èµ„æºæ–‡ä»¶)
  assets:
    favicon: ""          # Site favicon (ç½‘ç«™å›¾æ ‡)
    favicon16x16: ""     # Small favicon (å°å›¾æ ‡)
    favicon32x32: ""     # Medium favicon (ä¸­å›¾æ ‡)
    apple_touch_icon: "" # iOS icon (iOS å›¾æ ‡)
    safari_pinned_tab: "" # Safari icon (Safari å›¾æ ‡)

# Multilingual Support (å¤šè¯­è¨€æ”¯æŒ)
languages:
  zh:
    languageCode: "zh-CN"
    languageName: "ç®€ä½“ä¸­æ–‡"
    contentDir: "content/zh"
    weight: 1
    menu:
      main:
        - identifier: posts
          name: "Posts"
          url: "/posts/"
          weight: 1

# Output Settings (è¾“å‡ºè®¾ç½®)
outputs:
  home:
    - HTML
    - RSS
    - JSON               # Required for search (æœç´¢åŠŸèƒ½éœ€è¦)

# Rendering Configuration (æ¸²æŸ“é…ç½®)
markup:
  goldmark:
    renderer:
      unsafe: true      # Allow HTML in markdown (å…è®¸ Markdown ä¸­çš„ HTML)
  highlight:
    codeFences: true    # Enable code highlighting (å¯ç”¨ä»£ç é«˜äº®)
    guessSyntax: true   # Guess code language (çŒœæµ‹ä»£ç è¯­è¨€)
    lineNos: true      # Show line numbers (æ˜¾ç¤ºè¡Œå·)
    style: dracula     # Code highlight theme (ä»£ç é«˜äº®ä¸»é¢˜)
    lineNumbersInTable: true 
```

## åŸºç¡€é…ç½®

## åŠŸèƒ½å¼€å…³

### è¡¨æƒ…æ”¯æŒ
é€šè¿‡å¯ç”¨æ­¤åŠŸèƒ½ï¼Œæˆ‘ä»¬èƒ½å¤Ÿä» Github Emoji API å’Œ Unicode å®Œæ•´è¡¨æƒ…ç¬¦å·åˆ—è¡¨ä¸­è¯»å–æ•°æ®ã€‚åšä¸»æ˜¾å‡ºæé«˜å…´çš„æ ·å­ï¼Œå°†ä¸¤ä¸ªæŒ‡å¤´çš„æ•²ç€é”®ç›˜ï¼Œç‚¹å¤´è¯´ï¼Œâ€œå¯¹å‘€å¯¹å‘€ï¼â€¦â€¦è¡¨æƒ…æœ‰ä¸¤æ ·å†™æ³•ï¼Œä½ çŸ¥é“ä¹ˆï¼Ÿâ€

Shortcode: `:drooling_face:`:drooling_face:

Unicode: `&#x1F924`&#x1F924;

å…³äºå¯¹åº”çš„è¡¨æƒ…å’Œæ–‡æ¡£å¯ä»¥æŸ¥è¯¢ï¼š

- [shortcode](https://gohugo.io/quick-reference/emojis/#smileys--emotion)
- [Unicode](https://www.unicode.org/emoji/charts/emoji-list.html)

## å‚æ•°é…ç½®

### ç›®å½•é…ç½®

å¯¹äºè‡ªå¸¦çš„ç›®å½•ï¼Œåªæ˜¾ç¤ºåœ¨æ–‡ç« æœ€ä¸Šé¢ï¼Œæ—¢ä¸èƒ½è®©è¯»è€…éšæ—¶æŒæ¡åˆ°é˜…è¯»è¿›åº¦ï¼Œä¹Ÿä¸å¤Ÿä¼˜é›…ï¼Œæ‰€ä»¥æˆ‘åœ¨å‚è€ƒäº†[åœ¨PaperModä¸­å¼•å…¥ä¾§è¾¹ç›®å½•å’Œé˜…è¯»è¿›åº¦æ˜¾ç¤º](https://www.zhouxin.space/logs/introduce-side-toc-and-reading-percentage-to-papermod/)åŸºç¡€ä¸Šåšäº†ä¸€äº›æ”¹åŠ¨
- è‡ªåŠ¨ç¼–å·
- å½“å‰æµè§ˆç« èŠ‚ä¸‹åˆ’çº¿æ˜¾ç¤º
åˆ›å»º `layout/partials/toc.html` ,
```html
<!-- ç›®å½•ä¾§è¾¹æ  -->
{{- $headers := findRE "<h[1-6].*?>(.|\n])+?</h[1-6]>" .Content -}}
{{- $has_headers := ge (len $headers) 1 -}}
{{- if $has_headers -}}
<aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details {{if (.Param "TocOpen") }} open{{ end }}>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">{{- i18n "toc" | default "Table of Contents" }}</span>
            </summary>

            <div class="inner">
                {{- $largest := 6 -}}
                {{- range $headers -}}
                {{- $headerLevel := index (findRE "[1-6]" . 1) 0 -}}
                {{- $headerLevel := len (seq $headerLevel) -}}
                {{- if lt $headerLevel $largest -}}
                {{- $largest = $headerLevel -}}
                {{- end -}}
                {{- end -}}

                {{- $firstHeaderLevel := len (seq (index (findRE "[1-6]" (index $headers 0) 1) 0)) -}}

                {{- $.Scratch.Set "bareul" slice -}}
                <ul>
                    {{- range seq (sub $firstHeaderLevel $largest) -}}
                    <ul>
                        {{- $.Scratch.Add "bareul" (sub (add $largest .) 1) -}}
                        {{- end -}}
                        {{- range $i, $header := $headers -}}
                        {{- $headerLevel := index (findRE "[1-6]" . 1) 0 -}}
                        {{- $headerLevel := len (seq $headerLevel) -}}

                        {{/* get id="xyz" */}}
                        {{- $id := index (findRE "(id=\"(.*?)\")" $header 9) 0 }}

                        {{- /* strip id="" to leave xyz, no way to get regex capturing groups in hugo */ -}}
                        {{- $cleanedID := replace (replace $id "id=\"" "") "\"" "" }}
                        {{- $header := replaceRE "<h[1-6].*?>((.|\n])+?)</h[1-6]>" "$1" $header -}}

                        {{- if ne $i 0 -}}
                        {{- $prevHeaderLevel := index (findRE "[1-6]" (index $headers (sub $i 1)) 1) 0 -}}
                        {{- $prevHeaderLevel := len (seq $prevHeaderLevel) -}}
                        {{- if gt $headerLevel $prevHeaderLevel -}}
                        {{- range seq $prevHeaderLevel (sub $headerLevel 1) -}}
                        <ul>
                            {{/* the first should not be recorded */}}
                            {{- if ne $prevHeaderLevel . -}}
                            {{- $.Scratch.Add "bareul" . -}}
                            {{- end -}}
                            {{- end -}}
                            {{- else -}}
                            </li>
                            {{- if lt $headerLevel $prevHeaderLevel -}}
                            {{- range seq (sub $prevHeaderLevel 1) -1 $headerLevel -}}
                            {{- if in ($.Scratch.Get "bareul") . -}}
                        </ul>
                        {{/* manually do pop item */}}
                        {{- $tmp := $.Scratch.Get "bareul" -}}
                        {{- $.Scratch.Delete "bareul" -}}
                        {{- $.Scratch.Set "bareul" slice}}
                        {{- range seq (sub (len $tmp) 1) -}}
                        {{- $.Scratch.Add "bareul" (index $tmp (sub . 1)) -}}
                        {{- end -}}
                        {{- else -}}
                    </ul>
                    </li>
                    {{- end -}}
                    {{- end -}}
                    {{- end -}}
                    {{- end }}
                    <li>
                        <a href="#{{- $cleanedID -}}" aria-label="{{- $header | plainify -}}">{{- $header | safeHTML -}}</a>
                        {{- else }}
                    <li>
                        <a href="#{{- $cleanedID -}}" aria-label="{{- $header | plainify -}}">{{- $header | safeHTML -}}</a>
                        {{- end -}}
                        {{- end -}}
                        {{- $firstHeaderLevel := $largest }}
                        {{- $lastHeaderLevel := len (seq (index (findRE "[1-6]" (index $headers (sub (len $headers) 1)) 1) 0)) }}
                    </li>
                    {{- range seq (sub $lastHeaderLevel $firstHeaderLevel) -}}
                    {{- if in ($.Scratch.Get "bareul") (add . $firstHeaderLevel) }}
                </ul>
                {{- else }}
                </ul>
                </li>
                {{- end -}}
                {{- end }}
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    let headerCounters = {};

    // é‡ç½®æ‰€æœ‰è®¡æ•°å™¨
    function resetHeaderCounters() {
        headerCounters = {};
    }

    // è·å–æ ‡é¢˜çš„è‡ªåŠ¨ç¼–å·
    function getHeaderNumber(element, headerLevel) {
        // è·å–ä¹‹å‰çš„æ‰€æœ‰æ ‡é¢˜å…ƒç´ 
        let prevElements = Array.from(document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]'));
        let currentIndex = prevElements.indexOf(element);
        let numbers = [];
        
        // é‡ç½®å½“å‰çº§åˆ«ä¹‹åçš„è®¡æ•°å™¨
        Object.keys(headerCounters).forEach(level => {
            if (parseInt(level) > headerLevel) {
                delete headerCounters[headerLevel];
            }
        });
        
        // éå†åˆ°å½“å‰å…ƒç´ ä¸ºæ­¢çš„æ‰€æœ‰æ ‡é¢˜
        for (let i = 0; i <= currentIndex; i++) {
            let currentElement = prevElements[i];
            let currentLevel = parseInt(currentElement.tagName.substring(1));
            
            if (currentLevel <= headerLevel) {
                // æ›´æ–°è®¡æ•°å™¨
                if (!headerCounters[currentLevel]) {
                    headerCounters[currentLevel] = 1;
                } else if (currentElement === element) {
                    headerCounters[currentLevel]++;
                }
                
                // æ„å»ºå½“å‰å±‚çº§çš„ç¼–å·
                if (currentElement === element) {
                    for (let level = 1; level <= currentLevel; level++) {
                        if (headerCounters[level]) {
                            numbers.push(headerCounters[level]);
                        }
                    }
                }
            }
        }
        
        return numbers.join('.');
    }

    // æ›´æ–°ç›®å½•é¡¹çš„æ˜¾ç¤º
    function updateTocDisplay(element, tocLink) {
        const headerLevel = parseInt(element.tagName.substring(1));
        const currentNumber = getHeaderNumber(element, headerLevel);
        
        // ç§»é™¤ä¹‹å‰å¯èƒ½å­˜åœ¨çš„ç¼–å·
        let linkText = tocLink.textContent;
        linkText = linkText.replace(/^\d+(\.\d+)*\s+/, '');
        
        // æ·»åŠ æ–°çš„ç¼–å·
        tocLink.textContent = `${currentNumber} ${linkText}`;
    }

    // è·å–å…ƒç´ çš„é¡¶éƒ¨åç§»
    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }

    // æ£€æŸ¥TOCä½ç½®
    function checkTocPosition() {
        const width = document.body.scrollWidth;
        const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
        const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
        const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);
    
        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    // åˆå§‹åŒ–æ—¶çš„å¤„ç†
    document.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();
    
        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
        if (elements.length > 0) {
            // è®¾ç½®ç¬¬ä¸€ä¸ªæ ‡é¢˜ä¸ºæ´»åŠ¨çŠ¶æ€
            activeElement = elements[0];
            const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
            document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
        }
    
        // åˆå§‹åŒ–æ‰€æœ‰æ ‡é¢˜çš„ç¼–å·
        if (elements && elements.length > 0) {
            elements.forEach(element => {
                const id = encodeURI(element.getAttribute('id')).toLowerCase();
                const tocLink = document.querySelector(`.inner ul li a[href="#${id}"]`);
                
                if (tocLink) {
                    updateTocDisplay(element, tocLink);
                }
            });
        }

        // æ·»åŠ è¿”å›é¡¶éƒ¨é“¾æ¥çš„äº‹ä»¶ç›‘å¬
        const topLink = document.getElementById('top-link');
        if (topLink) {
            topLink.addEventListener('click', (event) => {
                event.preventDefault();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }
    }, false);

    // çª—å£å¤§å°æ”¹å˜æ—¶çš„å¤„ç†
    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    // æ»šåŠ¨æ—¶çš„å¤„ç†
    window.addEventListener('scroll', () => {
        const scrollPosition = window.pageYOffset || document.documentElement.scrollTop;

        if (scrollPosition === 0) {
            return;
        }

        if (elements && elements.length > 0) {
            // é‡ç½®è®¡æ•°å™¨
            resetHeaderCounters();
            
            // æŸ¥æ‰¾å½“å‰å¯è§çš„æ ‡é¢˜
            activeElement = Array.from(elements).find((element) => {
                if ((getOffsetTop(element) - scrollPosition) > 0 && 
                    (getOffsetTop(element) - scrollPosition) < window.innerHeight / 2) {
                    return element;
                }
            }) || activeElement;

            // æ›´æ–°æ‰€æœ‰ç›®å½•é¡¹çš„æ˜¾ç¤º
            elements.forEach(element => {
                const id = encodeURI(element.getAttribute('id')).toLowerCase();
                const tocLink = document.querySelector(`.inner ul li a[href="#${id}"]`);
                
                if (tocLink) {
                    updateTocDisplay(element, tocLink);
                    
                    if (element === activeElement) {
                        tocLink.classList.add('active');
                        tocLink.style.textDecoration = "underline";
                        
                        // ç¡®ä¿å½“å‰æ¿€æ´»çš„æ ‡é¢˜åœ¨ç›®å½•ä¸­å¯è§
                        const tocContainer = document.querySelector('.toc .inner');
                        const linkOffsetTop = tocLink.offsetTop;
                        const containerHeight = tocContainer.clientHeight;
                        const linkHeight = tocLink.clientHeight;
    
                        // è®¡ç®—æ»šåŠ¨ä½ç½®ï¼Œå°†å½“å‰ç›®å½•é¡¹å±…ä¸­æ˜¾ç¤º
                        const scrollPosition = linkOffsetTop - (containerHeight / 2) + (linkHeight / 2);
                        tocContainer.scrollTo({ top: scrollPosition, behavior: 'smooth' });
                    } else {
                        tocLink.classList.remove('active');
                        tocLink.style.textDecoration = "none";
                    }
                }
            });
        }
    }, false);
</script>
{{- end }}
```

åˆ›å»º`assets/css/extended/toc.css`ï¼Œæ ¹æ®é˜…è¯»å†…å®¹æ»šåŠ¨å¹¶åŠ ç²—ç›¸åº”æ ‡é¢˜å°±ç”±å…¶å®ç°ã€‚
```css 
/*ç›®å½•ä¾§è¾¹æ */
:root {
    --nav-width: 1380px;
    --article-width: 650px;
    --toc-width: 300px;
}

.toc {
    margin: 0 2px 40px 2px;
    border: 1px solid var(--border);
    background: var(--entry);
    border-radius: var(--radius);
    padding: 0.4em;
}

.toc-container.wide {
    position: absolute;
    height: 100%;
    border-right: 1px solid var(--border);
    left: calc((var(--toc-width) + var(--gap)) * -1);
    top: calc(var(--gap) * 2);
    width: var(--toc-width);
}

.wide .toc {
    position: sticky;
    top: var(--gap);
    border: unset;
    background: unset;
    border-radius: unset;
    width: 100%;
    margin: 0 2px 40px 2px;
}

.toc details summary {
    cursor: zoom-in;
    margin-inline-start: 20px;
    padding: 12px 0;
}

.toc details[open] summary {
    font-weight: 500;
}

.toc-container.wide .toc .inner {
    margin: 0;
}

.active {
    font-size: 110%;
    font-weight: 600;
}

.toc ul {
    list-style-type: circle;
}

.toc .inner {
    margin: 0 0 0 20px;
    padding: 0px 15px 15px 20px;
    font-size: 16px;

    /*ç›®å½•æ˜¾ç¤ºé«˜åº¦*/
    max-height: 83vh;
    overflow-y: auto;
}

.toc .inner::-webkit-scrollbar-thumb {  /*æ»šåŠ¨æ¡*/
    background: var(--border);
    border: 7px solid var(--theme);
    border-radius: var(--radius);
}

.toc li ul {
    margin-inline-start: calc(var(--gap) * 0.5);
    list-style-type: none;
}

.toc li {
    list-style: none;
    font-size: 0.95rem;
    padding-bottom: 5px;
}

.toc li a:hover {
    color: var(--secondary);
}
/*ç›®å½•ä¾§è¾¹æ */
```

### è¯„è®ºæ”¯æŒ
å¯¹äºè¯„è®ºæ”¯æŒï¼Œæˆ‘é€‰æ‹©äº†[Giscus](https://giscus.app/zh-CN)ã€‚ç”±äºæœ¬åšå®¢ä¹Ÿæ˜¯éƒ¨ç½²åœ¨Githubä¸Šï¼Œåœ¨å‡å°‘é¢å¤–æ“ä½œçš„åŒæ—¶ `Giscus` ä¹Ÿæ˜¾å¾—è¶³å¤Ÿçš„ä¼˜é›…ç®€å•ã€‚

æ­¤å¤„æ“ä½œå‚è€ƒäº†[Hugo åšå®¢å¼•å…¥ Giscus è¯„è®ºç³»ç»Ÿ](https://www.lixueduan.com/posts/blog/02-add-giscus-comment/)ã€‚

1. [Giscus](https://giscus.app/zh-CN) -> è¿›å…¥é…ç½®æ 
2. é…ç½® -> ä»“åº“ -> å¡«å…¥ä»“åº“åï¼Œå¦‚[Downmars/Downmars.github.io](https://github.com/Downmars/Downmars.github.io) -> è‹¥ä¸æ»¡è¶³æ¡ä»¶ï¼Œåˆ†åˆ«æŸ¥çœ‹ï¼šå¯¹åº”ä»“åº“æ˜¯å¦å…¬å¼€ã€giscus app æ˜¯å¦å®‰è£…ã€ Discussions åŠŸèƒ½åœ¨å¯¹åº”ä»“åº“æ˜¯å¦å¯ç”¨
3. é…ç½® -> Discussions åˆ†ç±» -> é€‰ä¸­Announcements
4. é…ç½® -> å¯ç”¨giscus -> å¤åˆ¶ç›¸åº”å­—æ®µåˆ°é…ç½®ä¸­

åŒæ—¶éœ€è¦åˆ›å»º `layouts/partials/comments.html`ï¼Œæ­¤å¤„å‚è€ƒäº†[Hugo + PaperMod + Github Pages æ­å»ºä¸€ä¸ªå®Œå–„çš„ä¸ªäººåšå®¢(ä»¥ Windows11 ä¸ºä¾‹)](https://sonnycalcr.github.io/posts/build-a-blog-using-hugo-papermod-github-pages/)ã€‚
```html
{{- /* Comments area start */ -}}
{{- /* to add comments read => https://gohugo.io/content-management/comments/ */ -}}
<div id="tw-comment"></div>
<script>
    // é»˜è®¤æ˜¯æš—è‰²ï¼Œæ ¹ç›®å½•ä¸‹çš„é…ç½®ä¸­çš„ä¸»é¢˜é»˜è®¤ä¹Ÿæ˜¯æš—è‰²
    const getStoredTheme = () => localStorage.getItem("pref-theme") === "light" ? "{{ .Site.Params.giscus.lightTheme }}" : "{{ .Site.Params.giscus.darkTheme }}";
    const setGiscusTheme = () => {
        const sendMessage = (message) => {
            const iframe = document.querySelector('iframe.giscus-frame');
            if (iframe) {
                iframe.contentWindow.postMessage({giscus: message}, 'https://giscus.app');
            }
        }
        sendMessage({setConfig: {theme: getStoredTheme()}})
    }

    document.addEventListener("DOMContentLoaded", () => {
        const giscusAttributes = {
            "src": "https://giscus.app/client.js",
            "data-repo": "{{ .Site.Params.giscus.repo }}",
            "data-repo-id": "{{ .Site.Params.giscus.repoId }}",
            "data-category": "{{ .Site.Params.giscus.category }}",
            "data-category-id": "{{ .Site.Params.giscus.categoryId }}",
            "data-mapping": "{{ .Site.Params.giscus.mapping }}",
            "data-strict": "{{ .Site.Params.giscus.strict }}",
            "data-reactions-enabled": "{{ .Site.Params.giscus.reactionsEnabled }}",
            "data-emit-metadata": "{{ .Site.Params.giscus.emitMetadata }}",
            "data-input-position": "{{ .Site.Params.giscus.inputPosition }}",
            "data-theme": getStoredTheme(),
            "data-lang": "{{ .Site.Params.giscus.lang }}",
            "data-loading": "lazy",
            "crossorigin": "anonymous",
        };

        // åŠ¨æ€åˆ›å»º giscus script
        const giscusScript = document.createElement("script");
        Object.entries(giscusAttributes).forEach(
                ([key, value]) => giscusScript.setAttribute(key, value));
        document.querySelector("#tw-comment").appendChild(giscusScript);

        // é¡µé¢ä¸»é¢˜å˜æ›´åï¼Œå˜æ›´ giscus ä¸»é¢˜
        const themeSwitcher = document.querySelector("#theme-toggle");
        if (themeSwitcher) {
            themeSwitcher.addEventListener("click", setGiscusTheme);
        }
        const themeFloatSwitcher = document.querySelector("#theme-toggle-float");
        if (themeFloatSwitcher) {
            themeFloatSwitcher.addEventListener("click", setGiscusTheme);
        }
    });
</script>

{{- /* Comments area end */ -}}
```

### ç½‘ç«™å›¾æ ‡

å’±ä»¬ä¸€ä¸ªè‡ªå·±çš„åšå®¢è‚¯å®šå¾—éœ€è¦æœ‰è‡ªå·±çš„ä¸€ä¸ªç½‘ç«™å›¾æ ‡ï¼Œå¯ä»¥å°†å›¾æ ‡æ”¾åœ¨`/static/images/`ï¼Œå¦‚`favicon: "/images/blog.png"`ã€‚æˆ‘åœ¨è¿™é‡Œæ¨èä¸¤ä¸ªç½‘ç«™ä¾›å¤§å®¶ç”¨æ¥æŸ¥æ‰¾ç¬¦åˆè‡ªå·±å›¾æ ‡ã€‚

- [fontawesome](https://fontawesome.com/search)
- [flaticon](https://www.flaticon.com/)
- [icons8](https://icons8.com/)
- [iconfinder](https://www.iconfinder.com/)
- [Noun Project](https://thenounproject.com/)

## å¤šè¯­è¨€ & ç•Œé¢å¸ƒç½®

è¿™éƒ¨åˆ†å‚è€ƒæ¥è‡ªäº[Hugo å¤šè¯­è¨€åšå®¢æ­å»ºï¼Œå¦‚ä½•ä¼˜é›…åœ°ç®¡ç†å¤šè¯­è¨€ md å†…å®¹-è´¤æ°‘](https://www.xianmin.org/post/2024/hugo-multilingual-blog-structure/)ã€‚

æˆ‘è®¤ä¸ºå¯¹äºç¼–å†™åšå®¢çš„æˆ‘ä»¬æ¥è¯´ï¼Œä»¥æ—¶é—´çš„å½¢å¼æ¥åˆ†éš”æ˜¯å¾ˆå¥½çš„ä¸€ç§æ–¹å¼æ¥å­˜å‚¨ä»¥åŠç®¡ç†æˆ‘ä»¬çš„åšå®¢ï¼Œä½¿ç”¨ç»Ÿä¸€æ–‡ä»¶å‘½åè§„èŒƒ`YYYYMMDD-title.md`ã€‚æ­¤å¤–ï¼Œæœ‰å…´è¶£çš„å¯ä»¥åšä¸€ä¸‹å¤šè¯­è¨€çš„å‡†å¤‡ï¼Œå³ä½¿ç°åœ¨æ²¡æœ‰æ¨å‡ºå¤šè¯­è¨€çš„æ‰“ç®—ï¼Œä¹‹åå¯ä»¥é›†ä¸­æ‰¾ä¸ªæ—¶é—´æ¥ä½¿ç”¨`ai`å·¥å…·æ¥ç»Ÿä¸€åšä¸€ä¸‹ã€‚

```bash 
.
â”œâ”€â”€ en
â”‚Â Â  â”œâ”€â”€ archives
â”‚Â Â  â”‚Â Â  â””â”€â”€ archives.md
â”‚Â Â  â”œâ”€â”€ posts
â”‚Â Â  â”‚Â Â  â””â”€â”€ 2025_01_19-hugo_build_1.md
â”‚Â Â  â””â”€â”€ search
â”‚Â Â      â””â”€â”€ search.md
â””â”€â”€ zh
    â”œâ”€â”€ archives
    â”‚Â Â  â””â”€â”€ archives.md
    â”œâ”€â”€ posts
    â”‚Â Â  â”œâ”€â”€ 2025_01_19-hugo_build_1.md
    â”‚Â Â  â””â”€â”€ 2025_01_20-hugo_build_2.md
    â””â”€â”€ search
        â””â”€â”€ search.md

```
å¯ä»¥å‚è€ƒæˆ‘çš„ç¤ºä¾‹ç»“æ„ï¼Œåœ¨è¿™é‡Œæˆ‘å°†`zh/`å’Œ`en/`ä½œä¸º`post/`çš„ç›´æ¥å­ç›®å½•ï¼Œè¿™ä¸€æ­¥éœ€åœ¨å¯¹åº”çš„è¯­è¨€ä¸‹æ·»åŠ è®¾ç½®å¯¹åº”çš„æ–‡æ¡£ç›®å½•ï¼Œå¦‚`contentDir: "content/zh"`ã€‚

æˆ‘ä»¬åœ¨æ­¤å¤„åŒæ—¶éœ€è¦è®¾ç½®é¡µé¢å¸ƒå±€ï¼Œåˆ›å»º`zh/archives/archives.md`å’Œ`zh/search/search.md`ï¼Œ
```md 
---
title: "æ—¶é—´è½´"
layout: "archives"
summary: archives
---
```

```md 
---
title: "æœç´¢" # in any language you want
layout: "search" # is necessary
summary: "search"
---
```
å…¶ä¸­`layout`å­—æ®µæŒ‡å®šäº†è¿™ä¸ªé¡µé¢ä½¿ç”¨çš„æ¨¡æ¿ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯`themes\<hugo_theme>\layouts\_default\archives.html&search.html`ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨é»˜è®¤å­—æ®µ`search`å’Œ`archives`å³å¯ä»¥è®©å½’æ¡£å†…å®¹æ­£å¸¸æ˜¾ç¤ºã€‚

åŒæ—¶ï¼Œå‚è€ƒ[Hugo + PaperMod + Github Pages æ­å»ºä¸€ä¸ªå®Œå–„çš„ä¸ªäººåšå®¢(ä»¥ Windows11 ä¸ºä¾‹)](https://sonnycalcr.github.io/posts/build-a-blog-using-hugo-papermod-github-pages/#%e9%85%8d%e7%bd%ae%e6%90%9c%e7%b4%a2)æœç´¢éœ€è¦é¢å¤–åŠ å…¥å¦‚ä¸‹é…ç½®ï¼š
```yaml
params:
  # æœç´¢
  fuseOpts: # ä¸ªæ€§åŒ–é…ç½® refer: https://sonnycalcr.github.io/posts/build-a-blog-using-hugo-papermod-github-pages/#%e9%85%8d%e7%bd%ae%e6%90%9c%e7%b4%a2
      isCaseSensitive: false # æ˜¯å¦å¤§å°å†™æ•æ„Ÿ
      shouldSort: true # æ˜¯å¦æ’åº
      location: 0
      distance: 1000
      threshold: 0.4
      minMatchCharLength: 0
      # limit: 10 # refer: https://www.fusejs.io/api/methods.html#search
      keys: ["title", "permalink", "summary", "content"]
      includeMatches: true

# ......

outputs:
  home:
    - HTML
    - RSS
    - JSON               # Required for search (æœç´¢åŠŸèƒ½éœ€è¦)
```

æ¥ç€ï¼Œæˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ å…¥æ—¶é—´è½´ä¸æœç´¢çš„å¸ƒå±€å³å¯ï¼š
```yaml
# Multilingual Support (å¤šè¯­è¨€æ”¯æŒ)
languages:
  zh:
    languageCode: "zh-CN"
    languageName: "ç®€ä½“ä¸­æ–‡"
    contentDir: "content/zh"
    weight: 1
    menu:
      main:
        - identifier: posts
          name: "Posts"
          url: "/posts/"
          weight: 1
```

## æ¸²æŸ“é…ç½®

### ä»£ç é…ç½®

`PaperMod`ä¸»é¢˜ä½¿ç”¨çš„ä»£ç é«˜äº®å·¥å…·ä¸º[Chroma](https://github.com/alecthomas/chroma)ï¼Œå¯èƒ½ä¸å¤ªèªæ˜ï¼Œä½†æ˜¯å¯¹äºæˆ‘çš„æ—¥å¸¸ä½¿ç”¨æš‚æ—¶æ²¡æœ‰å¤ªå¤§é—®é¢˜ã€‚

`Chroma`è‡ªå¸¦çš„é…è‰²æ–¹æ¡ˆé¢„è§ˆï¼š[https://xyproto.github.io/splash/docs/longer/all.html](https://xyproto.github.io/splash/docs/longer/all.html)

> å‚è€ƒäºï¼š[æ·±å…¥æ¢ç©¶ Hugo ä»£ç é«˜äº®](https://blog.loikein.one/posts/2023-01-10-deep-dive-into-hugo-syntax-highlight/)ã€[ä»£ç å—è¯­æ³•é«˜äº®åŠå¤åˆ¶](https://tomo.dev/posts/create-hugo-theme-from-scratch/part-three/#%E4%BB%A3%E7%A0%81%E5%9D%97%E8%AF%AD%E6%B3%95%E9%AB%98%E4%BA%AE%E5%8F%8A%E5%A4%8D%E5%88%B6)

```yaml
markup:
  highlight:
    codeFences: true 
    guessSyntax: true 
    lineNos: true 
    style: dracula 
    lineNumbersInTable: true 
```


# é¢å¤–é…ç½®

## å­—ä½“é…ç½®

æˆ‘å·²ç»å¿è¿™ä¸ªé»˜è®¤å­—ä½“å¾ˆä¹…äº†ï¼Œç°åœ¨æˆ‘ä»¬å°±åœ¨è¿™é‡Œå¹²æ‰ä»–ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œé€‰æ‹©[éœé¹œæ–‡æ¥·](https://github.com/lxgw/LxgwWenKai?tab=readme-ov-file)ï¼Œé…ç½®æ–¹æ³•å‚è€ƒ[Hugoä½¿ç”¨è‡ªå®šä¹‰å­—ä½“](https://zhuanlan.zhihu.com/p/627444050)ã€‚

> æœ¬åº”è¯¥è‹±æ–‡å’Œä¸­æ–‡åˆ†å¼€é…ç½®å­—ä½“ï¼Œä½†æ˜¯æˆ‘æš‚æ—¶æ²¡æœ‰æ‰¾åˆ°è¾ƒå¥½çš„æ–¹æ³•ï¼Œå¹¶ä¸”æš‚æ—¶æ˜¾ç¤ºæ•ˆæœè¿˜å¯ä»¥ï¼Œå°±æš‚æ—¶æç½®äº†ã€‚

æˆ‘ä»¬åœ¨`layouts/partials/extend_head.html`ä¸­åŠ å…¥ï¼š
```html 
 <link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.6.0/style.css" />
```

åœ¨`assets/css/extended/blank.css`ä¸­åŠ å…¥ï¼š
```css 
body {
    font-family: "LXGW WenKai Screen", sans-serif !important;
}

.post-content pre, code {
    font-family: "LXGW WenKai Screen", sans-serif;
}
```
