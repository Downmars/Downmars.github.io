<!doctype html><html lang=zh dir=auto><head><link rel=stylesheet href=/an-old-hope.min.css><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>2026_02_01 Build_a_streaming_server | DLog</title>
<meta name=keywords content><meta name=description content="网络检测
带宽
对于串流被控端需要有足够的上行带宽，例如4K 60FPS一般需要50Mbps，如果要排除一些网络不稳定状态，可能还需要有1/3的冗余带宽；同理，对于串流控制端需要有足够的下行带宽，也需要大致50Mbps。我们这里可以用  
   speedtest↗
等软件进行测量。"><meta name=author content="Downmars"><link rel=canonical href=https://downmars.github.io/zh/posts/2026_02_01-build_a_streaming_server/><link crossorigin=anonymous href=/assets/css/stylesheet.57310bbf433f32dc0105c07276ca4432adf4135cd6a67e8b5eb5b6af5e1cc286.css integrity="sha256-VzELv0M/MtwBBcBydspEMq30E1zWpn6LXrW2r14cwoY=" rel="preload stylesheet" as=style><link rel=icon href=https://downmars.github.io/images/blog.png><link rel=icon type=image/png sizes=16x16 href=https://downmars.github.io/images/blog.png><link rel=icon type=image/png sizes=32x32 href=https://downmars.github.io/images/blog.png><link rel=apple-touch-icon href=https://downmars.github.io/apple-touch-icon.png><link rel=mask-icon href=https://downmars.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://downmars.github.io/zh/posts/2026_02_01-build_a_streaming_server/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript>-->
<script type=text/javascript async src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["[[","]]"]],processEscapes:!0,processEnvironments:!0,skipTags:["script","noscript","style","textarea","pre"],TeX:{equationNumbers:{autoNumber:"AMS"},extensions:["AMSmath.js","AMSsymbols.js"]}}}),MathJax.Hub.Queue(function(){var e,t=MathJax.Hub.getAllJax();for(e=0;e<t.length;e+=1)t[e].SourceElement().parentNode.className+=" has-jax"})</script><style>code.has-jax{font:inherit;font-size:100%;background:inherit;border:inherit;color:#515151}</style><meta property="og:url" content="https://downmars.github.io/zh/posts/2026_02_01-build_a_streaming_server/"><meta property="og:site_name" content="DLog"><meta property="og:title" content="2026_02_01 Build_a_streaming_server"><meta property="og:description" content="网络检测 带宽 对于串流被控端需要有足够的上行带宽，例如4K 60FPS一般需要50Mbps，如果要排除一些网络不稳定状态，可能还需要有1/3的冗余带宽；同理，对于串流控制端需要有足够的下行带宽，也需要大致50Mbps。我们这里可以用 speedtest↗ 等软件进行测量。"><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-02-01T16:22:28+08:00"><meta property="article:modified_time" content="2026-02-01T16:22:28+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="2026_02_01 Build_a_streaming_server"><meta name=twitter:description content="网络检测
带宽
对于串流被控端需要有足够的上行带宽，例如4K 60FPS一般需要50Mbps，如果要排除一些网络不稳定状态，可能还需要有1/3的冗余带宽；同理，对于串流控制端需要有足够的下行带宽，也需要大致50Mbps。我们这里可以用  
   speedtest↗
等软件进行测量。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://downmars.github.io/zh/posts/"},{"@type":"ListItem","position":2,"name":"2026_02_01 Build_a_streaming_server","item":"https://downmars.github.io/zh/posts/2026_02_01-build_a_streaming_server/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"2026_02_01 Build_a_streaming_server","name":"2026_02_01 Build_a_streaming_server","description":"网络检测 带宽 对于串流被控端需要有足够的上行带宽，例如4K 60FPS一般需要50Mbps，如果要排除一些网络不稳定状态，可能还需要有1/3的冗余带宽；同理，对于串流控制端需要有足够的下行带宽，也需要大致50Mbps。我们这里可以用 speedtest↗ 等软件进行测量。\n","keywords":[""],"articleBody":"网络检测 带宽 对于串流被控端需要有足够的上行带宽，例如4K 60FPS一般需要50Mbps，如果要排除一些网络不稳定状态，可能还需要有1/3的冗余带宽；同理，对于串流控制端需要有足够的下行带宽，也需要大致50Mbps。我们这里可以用 speedtest↗ 等软件进行测量。\n延迟 对于一些高交互性，竞技性的游戏，串流进行游戏不建议，毕竟有一个服务器的往返时间差，吃力不讨好。对于一些如逆转裁判，GAL等非即时交互的游戏可以有一个比较好的体验，总而言之60ms以内的延迟都处于可接受范围内，如果高于100ms就会出现卡顿，音画不同步等问题。这边可以用ping来测试服务器时延，但是需要*2。\n丢包率 如果网络质量比较差，丢包就会导致视频流，音频流不稳定，画面出现花屏，模糊，断裂，严重影响使用体验，这边也可以用ping来测量。\nNAT NAT的层级对于我们串流方式的选择也有很大的影响，一般划分NAT为4个层级，NAT1、NAT2、NAT3、NAT4，对于想要实现NAT穿越的用户来说，需要两边的NATA和NATB要满足A+B\u003c=6。在NAT3与NAT4的环境中，内部网络的设备通过路由器共享同一个公网IP地址，外部的设备无法直接访问内网中的设备。为了让外部设备能够访问内网设备，需要通过路由器进行端口转发或者使用中继服务器；在NAT1与NAT2环境下，由于路由器允许更加自由的连接和端口映射，内网设备可以直接与外网设备之间直接建立联系，即P2P打洞，实现更加好的网络性能。\n我们这边使用FRP进行终端流量转播来实现流量的转播。 你可以使用一些在线网站 MyNat↗ 、 NatTypeTester↗ 等一些工具查看你现在使用网络的NAT类型。\nFRP穿透 FRP↗ 是一个用于内网穿透的反向代理应用，将服务器端部署在具有公网IP的机器上，客户端部署在内网或者防火墙内的机器上，通过访问暴露在服务器上的端口，反向代理到处于内网的服务。\nFRPS 防火墙端口开放 TCP UDP 7000 47998 7001 47999 7080 48000 7500 47984 47989 47990 48010 我们需要在购置的服务器的外部配置网站上开放FRP以及Moonlight与Sunshine的服务通讯端口。 服务器端口开放 // 开放TCP端口 sudo nfw allow tcp 7000 sudo nfw allow tcp 7001 sudo nfw allow tcp 7080 sudo nfw allow tcp 7500 sudo nfw allow tcp 47984 sudo nfw allow tcp 47989 sudo nfw allow tcp 47990 sudo nfw allow tcp 48010 // 开放UDP端口 sudo nfw allow udp 47998 sudo nfw allow udp 47999 sudo nfw allow udp 48000 // 查看开放的端口 sudo nfw show 我这边使用的是nfw查看、配置服务器系统当前的防火墙规则以及端口。\nfrps.toml 我们首先需要下载 frp的打包软件↗ ，这里用的是0.67.0的版本。解压下来可以并编辑我们的frps.toml服务端frp配置 /usr/bin/frps/frps.toml 8 lines [common] bindPort = 7000 authentication_method = token token = YOUR_TOKEN dashboard_port = 7500 dashboard_user = YOUR_ADMIN dashboard_pwd = YOUR_PASSWORD tansport.tcpMux = true /etc/systemd/system/frps.service 14 lines [Unit] Description=FRP Server (frps) After=network-online.target Wants=network-online.target [Service] Type=simple ExecStart=/usr/bin/frps -c /etc/frp/frps.toml Restart=always RestartSec=3 LimitNOFILE=1048576 [Install] WantedBy=multi-user.target 我这边的配置是将解压下来的软件包换了个位置，具体需要按自己的情况修改frps.toml和frps位置。\nsudo systemctl daemon-reload sudo systemctl enable --now frps sudo systemctl status frps --no-pager 可以通过以上指令进行frps服务自启动\nFRPC 同样的，我们需要在被控端使用frp中frpc服务。 frpc.toml 50 lines [common] serverAddr = \"服务器公网IP\" serverPort = 7000 transport.protocol = \"tcp\" transport.poolCount = 8 auth.method = \"token\" auth.token = \"YOUR_TOKEN\" [[proxies]] name = \"moonlight-control-1\" type = \"tcp\" localIP = \"127.0.0.1\" localPort = 47984 remotePort = 47984 [[proxies]] name = \"moonlight-control-2\" type = \"tcp\" localIP = \"127.0.0.1\" localPort = 47989 remotePort = 47989 [[proxies]] name = \"moonlight-video-stream\" type = \"udp\" localIP = \"127.0.0.1\" localPort = 47998 remotePort = 47998 [[proxies]] name = \"moonlight-video-stream-2\" type = \"udp\" localIP = \"127.0.0.1\" localPort = 47999 remotePort = 47999 [[proxies]] name = \"moonlight-video-stream-3\" type = \"udp\" localIP = \"127.0.0.1\" localPort = 48000 remotePort = 48000 [[proxies]] name = \"port4\" type = \"tcp\" localIP = \"127.0.0.1\" localPort = 48010 remotePort = 48010 如果需要配置被控端自启动，linux就用service，windows就用bat，看自己使用情况。\nSunshine \u0026 Moonlight Sunshine↗ 和 Moonlight↗ 是串流的游戏流媒体服务端以及客户端，我们需要在被控电脑端配置Sunshine，在控制端配置Moonlight。 Sunshine直接下载Release中适合自己版本并打包好的软件即可，一般打开后访问 192.168.1.5:47990 。第一次访问需要设置用户名与密码，之后等待Moonlight端发起串流请求并在PIN选项卡中输入Moonlight给出的PIN码即可。 Moonlight需要你控制端如平板，手机，笔记本电脑等上安装，之后填入服务器的公网IP，就会返回一个PIN码，在Sunshine中输入即可建立串流。\nSunshine还需要配置自启动，这个也需要根据被控端的系统来设置。\n参考 Moonlight 远程串流 + 远程开机全流程搭建（低成本方案）↗ 体验较好的低延迟串流方案 | MoonLight+Sunshine+Tailscale↗ Server搭建过程-5.Frp穿透介绍和P2P↗ ","wordCount":"1782","inLanguage":"zh","datePublished":"2026-02-01T16:22:28+08:00","dateModified":"2026-02-01T16:22:28+08:00","author":{"@type":"Person","name":"Downmars"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://downmars.github.io/zh/posts/2026_02_01-build_a_streaming_server/"},"publisher":{"@type":"Organization","name":"DLog","logo":{"@type":"ImageObject","url":"https://downmars.github.io/images/blog.png"}}}</script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://downmars.github.io/zh/ accesskey=h title="DLog (Alt + H)">DLog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://downmars.github.io/en/ title=English aria-label=English>En</a></li></ul></div></div><ul id=menu><li><a href=https://downmars.github.io/zh/posts/ title=墓志铭><span>墓志铭</span></a></li><li><a href=https://downmars.github.io/zh/thoughts/ title=翻案集><span>翻案集</span></a></li><li><a href=https://downmars.github.io/zh/archives/ title=故纸堆><span>故纸堆</span></a></li><li><a href=https://downmars.github.io/zh/search/ title=寻章句><span>寻章句</span></a></li><li><a href=https://downmars.github.io/zh/friends/ title=江湖录><span>江湖录</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://downmars.github.io/zh/>主页</a>&nbsp;»&nbsp;<a href=https://downmars.github.io/zh/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">2026_02_01 Build_a_streaming_server</h1><div class=post-meta><span title='2026-02-01 16:22:28 +0800 +0800'>2026-02-01</span>&nbsp;·&nbsp;4 分钟&nbsp;·&nbsp;1782 字&nbsp;·&nbsp;Downmars</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e7%bd%91%e7%bb%9c%e6%a3%80%e6%b5%8b aria-label=网络检测>网络检测</a><ul><li><a href=#%e5%b8%a6%e5%ae%bd aria-label=带宽>带宽</a></li><li><a href=#%e5%bb%b6%e8%bf%9f aria-label=延迟>延迟</a></li><li><a href=#%e4%b8%a2%e5%8c%85%e7%8e%87 aria-label=丢包率>丢包率</a></li><li><a href=#nat aria-label=NAT>NAT</a></li></ul></li><li><a href=#frp%e7%a9%bf%e9%80%8f aria-label=FRP穿透>FRP穿透</a><ul><li><a href=#frps aria-label=FRPS>FRPS</a><ul><li><a href=#%e9%98%b2%e7%81%ab%e5%a2%99%e7%ab%af%e5%8f%a3%e5%bc%80%e6%94%be aria-label=防火墙端口开放>防火墙端口开放</a></li><li><a href=#%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%ab%af%e5%8f%a3%e5%bc%80%e6%94%be aria-label=服务器端口开放>服务器端口开放</a></li><li><a href=#frpstoml aria-label=frps.toml>frps.toml</a></li></ul></li><li><a href=#frpc aria-label=FRPC>FRPC</a></li></ul></li><li><a href=#sunshine--moonlight aria-label="Sunshine & Moonlight">Sunshine & Moonlight</a></li><li><a href=#%e5%8f%82%e8%80%83 aria-label=参考>参考</a></li></ul></div></details></div></aside><script>let activeElement,elements,headerCounters={};function resetHeaderCounters(){headerCounters={}}function getHeaderNumber(e){let s=Array.from(document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]")),i=s.indexOf(e),n=new Array(6).fill(0),o=[];for(let t=0;t<=i;t++){let r=s[t],a=parseInt(r.tagName.substring(1))-1;for(let e=a+1;e<6;e++)n[e]=0;if(n[a]++,r===e){for(let e=0;e<=a;e++)n[e]>0&&o.push(n[e]);break}}return o.join(".")}function updateTocDisplay(e,t){const s=parseInt(e.tagName.substring(1)),o=getHeaderNumber(e,s);let n=t.textContent;n=n.replace(/^\d+(\.\d+)*\s+/,""),t.textContent=`${o} ${n}`}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}function checkTocPosition(){const e=document.body.scrollWidth,t=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),n=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),s=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);e-t-n*2-s*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}document.addEventListener("DOMContentLoaded",function(){if(checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),elements.length>0){activeElement=elements[0];const e=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${e}"]`).classList.add("active")}elements&&elements.length>0&&elements.forEach(e=>{const n=encodeURI(e.getAttribute("id")).toLowerCase(),t=document.querySelector(`.inner ul li a[href="#${n}"]`);t&&updateTocDisplay(e,t)});const t=document.getElementById("top-link");t&&t.addEventListener("click",e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{const e=window.pageYOffset||document.documentElement.scrollTop;if(e===0)return;elements&&elements.length>0&&(resetHeaderCounters(),activeElement=Array.from(elements).find(t=>{if(getOffsetTop(t)-e>0&&getOffsetTop(t)-e<window.innerHeight/2)return t})||activeElement,elements.forEach(e=>{const n=encodeURI(e.getAttribute("id")).toLowerCase(),t=document.querySelector(`.inner ul li a[href="#${n}"]`);if(t)if(updateTocDisplay(e,t),e===activeElement){t.classList.add("active"),t.style.textDecoration="underline";const e=document.querySelector(".toc .inner"),n=t.offsetTop,s=e.clientHeight,o=t.clientHeight,i=n-s/2+o/2;e.scrollTo({top:i,behavior:"smooth"})}else t.classList.remove("active"),t.style.textDecoration="none"}))},!1)</script><div class=post-content><h2 id=网络检测>网络检测<a hidden class=anchor aria-hidden=true href=#网络检测>#</a></h2><h3 id=带宽>带宽<a hidden class=anchor aria-hidden=true href=#带宽>#</a></h3><p>对于串流被控端需要有足够的上行带宽，例如4K 60FPS一般需要50Mbps，如果要排除一些网络不稳定状态，可能还需要有1/3的冗余带宽；同理，对于串流控制端需要有足够的下行带宽，也需要大致50Mbps。我们这里可以用<a href=https://www.speedtest.net/ target=_blank rel=noopener class=custom-link>
speedtest<span class=external-link>↗</span></a>
等软件进行测量。</p><h3 id=延迟>延迟<a hidden class=anchor aria-hidden=true href=#延迟>#</a></h3><p>对于一些高交互性，竞技性的游戏，串流进行游戏不建议，毕竟有一个服务器的往返时间差，吃力不讨好。对于一些如逆转裁判，GAL等非即时交互的游戏可以有一个比较好的体验，总而言之60ms以内的延迟都处于可接受范围内，如果高于100ms就会出现卡顿，音画不同步等问题。这边可以用ping来测试服务器时延，但是需要*2。</p><h3 id=丢包率>丢包率<a hidden class=anchor aria-hidden=true href=#丢包率>#</a></h3><p>如果网络质量比较差，丢包就会导致视频流，音频流不稳定，画面出现花屏，模糊，断裂，严重影响使用体验，这边也可以用ping来测量。</p><h3 id=nat>NAT<a hidden class=anchor aria-hidden=true href=#nat>#</a></h3><p>NAT的层级对于我们串流方式的选择也有很大的影响，一般划分NAT为4个层级，NAT1、NAT2、NAT3、NAT4，对于想要实现NAT穿越的用户来说，需要两边的NATA和NATB要满足A+B&lt;=6。在NAT3与NAT4的环境中，内部网络的设备通过路由器共享同一个公网IP地址，外部的设备无法直接访问内网中的设备。为了让外部设备能够访问内网设备，需要通过路由器进行端口转发或者使用中继服务器；在NAT1与NAT2环境下，由于路由器允许更加自由的连接和端口映射，内网设备可以直接与外网设备之间直接建立联系，即P2P打洞，实现更加好的网络性能。<br>我们这边使用FRP进行终端流量转播来实现流量的转播。
你可以使用一些在线网站<a href=https://mao.fan/mynat target=_blank rel=noopener class=custom-link>
MyNat<span class=external-link>↗</span></a>
、<a href=https://github.com/HMBSbige/NatTypeTester target=_blank rel=noopener class=custom-link>
NatTypeTester<span class=external-link>↗</span></a>
等一些工具查看你现在使用网络的NAT类型。</p><h2 id=frp穿透>FRP穿透<a hidden class=anchor aria-hidden=true href=#frp穿透>#</a></h2><p><a href=https://github.com/fatedier/frp target=_blank rel=noopener class=custom-link>FRP<span class=external-link>↗</span></a>
是一个用于内网穿透的反向代理应用，将服务器端部署在具有公网IP的机器上，客户端部署在内网或者防火墙内的机器上，通过访问暴露在服务器上的端口，反向代理到处于内网的服务。</p><h3 id=frps>FRPS<a hidden class=anchor aria-hidden=true href=#frps>#</a></h3><h4 id=防火墙端口开放>防火墙端口开放<a hidden class=anchor aria-hidden=true href=#防火墙端口开放>#</a></h4><table><thead><tr><th style=text-align:center>TCP</th><th style=text-align:center>UDP</th></tr></thead><tbody><tr><td style=text-align:center>7000</td><td style=text-align:center>47998</td></tr><tr><td style=text-align:center>7001</td><td style=text-align:center>47999</td></tr><tr><td style=text-align:center>7080</td><td style=text-align:center>48000</td></tr><tr><td style=text-align:center>7500</td><td style=text-align:center></td></tr><tr><td style=text-align:center>47984</td><td style=text-align:center></td></tr><tr><td style=text-align:center>47989</td><td style=text-align:center></td></tr><tr><td style=text-align:center>47990</td><td style=text-align:center></td></tr><tr><td style=text-align:center>48010</td><td style=text-align:center></td></tr><tr><td style=text-align:center>我们需要在购置的服务器的外部配置网站上开放FRP以及Moonlight与Sunshine的服务通讯端口。</td><td></td></tr></tbody></table><h4 id=服务器端口开放>服务器端口开放<a hidden class=anchor aria-hidden=true href=#服务器端口开放>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>// 开放TCP端口
</span></span><span style=display:flex><span>sudo nfw allow tcp <span style=color:#bd93f9>7000</span>
</span></span><span style=display:flex><span>sudo nfw allow tcp <span style=color:#bd93f9>7001</span>
</span></span><span style=display:flex><span>sudo nfw allow tcp <span style=color:#bd93f9>7080</span>
</span></span><span style=display:flex><span>sudo nfw allow tcp <span style=color:#bd93f9>7500</span>
</span></span><span style=display:flex><span>sudo nfw allow tcp <span style=color:#bd93f9>47984</span>
</span></span><span style=display:flex><span>sudo nfw allow tcp <span style=color:#bd93f9>47989</span>
</span></span><span style=display:flex><span>sudo nfw allow tcp <span style=color:#bd93f9>47990</span>
</span></span><span style=display:flex><span>sudo nfw allow tcp <span style=color:#bd93f9>48010</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>// 开放UDP端口
</span></span><span style=display:flex><span>sudo nfw allow udp <span style=color:#bd93f9>47998</span>
</span></span><span style=display:flex><span>sudo nfw allow udp <span style=color:#bd93f9>47999</span>
</span></span><span style=display:flex><span>sudo nfw allow udp <span style=color:#bd93f9>48000</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>// 查看开放的端口
</span></span><span style=display:flex><span>sudo nfw show
</span></span></code></pre></div><p>我这边使用的是nfw查看、配置服务器系统当前的防火墙规则以及端口。</p><h4 id=frpstoml>frps.toml<a hidden class=anchor aria-hidden=true href=#frpstoml>#</a></h4><p>我们首先需要下载<a href=https://github.com/fatedier/frp/releases/tag/v0.67.0 target=_blank rel=noopener class=custom-link>
frp的打包软件<span class=external-link>↗</span></a>
，这里用的是0.67.0的版本。解压下来可以并编辑我们的frps.toml服务端frp配置<p><details class=custom-collapse open><summary markdown=span><span>/usr/bin/frps/frps.toml</span>
<span class=line-count>8 lines</span></summary><div class=content><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span>[common]
</span></span><span style=display:flex><span>bindPort = <span style=color:#bd93f9>7000</span>
</span></span><span style=display:flex><span>authentication_method = token
</span></span><span style=display:flex><span>token = YOUR_TOKEN
</span></span><span style=display:flex><span>dashboard_port = <span style=color:#bd93f9>7500</span>
</span></span><span style=display:flex><span>dashboard_user = YOUR_ADMIN
</span></span><span style=display:flex><span>dashboard_pwd = YOUR_PASSWORD
</span></span><span style=display:flex><span>tansport.tcpMux = <span style=color:#ff79c6>true</span>
</span></span></code></pre></div></div></details></p></p><p><details class=custom-collapse open><summary markdown=span><span>/etc/systemd/system/frps.service</span>
<span class=line-count>14 lines</span></summary><div class=content><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-service data-lang=service><span style=display:flex><span><span style=color:#ff79c6>[Unit]</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>Description</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>FRP Server (frps)</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>After</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>network-online.target</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>Wants</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>network-online.target</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>[Service]</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>Type</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>simple</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>ExecStart</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>/usr/bin/frps -c /etc/frp/frps.toml</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>Restart</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>always</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>RestartSec</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>3</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>LimitNOFILE</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>1048576</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>[Install]</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>WantedBy</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>multi-user.target</span>
</span></span></code></pre></div></div></details></p><p>我这边的配置是将解压下来的软件包换了个位置，具体需要按自己的情况修改frps.toml和frps位置。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl daemon-reload
</span></span><span style=display:flex><span>sudo systemctl <span style=color:#8be9fd;font-style:italic>enable</span> --now frps
</span></span><span style=display:flex><span>sudo systemctl status frps --no-pager
</span></span></code></pre></div><p>可以通过以上指令进行frps服务自启动</p><h3 id=frpc>FRPC<a hidden class=anchor aria-hidden=true href=#frpc>#</a></h3><p>同样的，我们需要在被控端使用frp中frpc服务。<p><details class=custom-collapse><summary markdown=span><span>frpc.toml</span>
<span class=line-count>50 lines</span></summary><div class=content><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span>[common]
</span></span><span style=display:flex><span>serverAddr = <span style=color:#f1fa8c>&#34;服务器公网IP&#34;</span>
</span></span><span style=display:flex><span>serverPort = <span style=color:#bd93f9>7000</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>transport.protocol = <span style=color:#f1fa8c>&#34;tcp&#34;</span>
</span></span><span style=display:flex><span>transport.poolCount = <span style=color:#bd93f9>8</span>
</span></span><span style=display:flex><span>auth.method = <span style=color:#f1fa8c>&#34;token&#34;</span>
</span></span><span style=display:flex><span>auth.token = <span style=color:#f1fa8c>&#34;YOUR_TOKEN&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[[proxies]]
</span></span><span style=display:flex><span>name = <span style=color:#f1fa8c>&#34;moonlight-control-1&#34;</span>
</span></span><span style=display:flex><span>type = <span style=color:#f1fa8c>&#34;tcp&#34;</span>
</span></span><span style=display:flex><span>localIP = <span style=color:#f1fa8c>&#34;127.0.0.1&#34;</span>
</span></span><span style=display:flex><span>localPort = <span style=color:#bd93f9>47984</span>
</span></span><span style=display:flex><span>remotePort = <span style=color:#bd93f9>47984</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[[proxies]]
</span></span><span style=display:flex><span>name = <span style=color:#f1fa8c>&#34;moonlight-control-2&#34;</span>
</span></span><span style=display:flex><span>type = <span style=color:#f1fa8c>&#34;tcp&#34;</span>
</span></span><span style=display:flex><span>localIP = <span style=color:#f1fa8c>&#34;127.0.0.1&#34;</span>
</span></span><span style=display:flex><span>localPort = <span style=color:#bd93f9>47989</span>
</span></span><span style=display:flex><span>remotePort = <span style=color:#bd93f9>47989</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[[proxies]]
</span></span><span style=display:flex><span>name = <span style=color:#f1fa8c>&#34;moonlight-video-stream&#34;</span>
</span></span><span style=display:flex><span>type = <span style=color:#f1fa8c>&#34;udp&#34;</span>
</span></span><span style=display:flex><span>localIP = <span style=color:#f1fa8c>&#34;127.0.0.1&#34;</span>
</span></span><span style=display:flex><span>localPort = <span style=color:#bd93f9>47998</span>
</span></span><span style=display:flex><span>remotePort = <span style=color:#bd93f9>47998</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[[proxies]]
</span></span><span style=display:flex><span>name = <span style=color:#f1fa8c>&#34;moonlight-video-stream-2&#34;</span>
</span></span><span style=display:flex><span>type = <span style=color:#f1fa8c>&#34;udp&#34;</span>
</span></span><span style=display:flex><span>localIP = <span style=color:#f1fa8c>&#34;127.0.0.1&#34;</span>
</span></span><span style=display:flex><span>localPort = <span style=color:#bd93f9>47999</span>
</span></span><span style=display:flex><span>remotePort = <span style=color:#bd93f9>47999</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[[proxies]]
</span></span><span style=display:flex><span>name = <span style=color:#f1fa8c>&#34;moonlight-video-stream-3&#34;</span>
</span></span><span style=display:flex><span>type = <span style=color:#f1fa8c>&#34;udp&#34;</span>
</span></span><span style=display:flex><span>localIP = <span style=color:#f1fa8c>&#34;127.0.0.1&#34;</span>
</span></span><span style=display:flex><span>localPort = <span style=color:#bd93f9>48000</span>
</span></span><span style=display:flex><span>remotePort = <span style=color:#bd93f9>48000</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> [[proxies]]
</span></span><span style=display:flex><span>name = <span style=color:#f1fa8c>&#34;port4&#34;</span>
</span></span><span style=display:flex><span>type = <span style=color:#f1fa8c>&#34;tcp&#34;</span>
</span></span><span style=display:flex><span>localIP = <span style=color:#f1fa8c>&#34;127.0.0.1&#34;</span>
</span></span><span style=display:flex><span>localPort = <span style=color:#bd93f9>48010</span>
</span></span><span style=display:flex><span>remotePort = <span style=color:#bd93f9>48010</span>
</span></span></code></pre></div></div></details></p></p><p>如果需要配置被控端自启动，linux就用service，windows就用bat，看自己使用情况。</p><h2 id=sunshine--moonlight>Sunshine & Moonlight<a hidden class=anchor aria-hidden=true href=#sunshine--moonlight>#</a></h2><p><a href=https://github.com/LizardByte/Sunshine target=_blank rel=noopener class=custom-link>Sunshine<span class=external-link>↗</span></a>
和<a href=https://moonlight-stream.org/ target=_blank rel=noopener class=custom-link>
Moonlight<span class=external-link>↗</span></a>
是串流的游戏流媒体服务端以及客户端，我们需要在被控电脑端配置Sunshine，在控制端配置Moonlight。
Sunshine直接下载Release中适合自己版本并打包好的软件即可，一般打开后访问<a href=192.168.1.5:47990 class=custom-link>
192.168.1.5:47990</a>
。第一次访问需要设置用户名与密码，之后等待Moonlight端发起串流请求并在PIN选项卡中输入Moonlight给出的PIN码即可。
Moonlight需要你控制端如平板，手机，笔记本电脑等上安装，之后填入服务器的公网IP，就会返回一个PIN码，在Sunshine中输入即可建立串流。<br>Sunshine还需要配置自启动，这个也需要根据被控端的系统来设置。</p><h2 id=参考>参考<a hidden class=anchor aria-hidden=true href=#参考>#</a></h2><p><a href=https://www.bilibili.com/opus/1097667321616400401 target=_blank rel=noopener class=custom-link>Moonlight 远程串流 + 远程开机全流程搭建（低成本方案）<span class=external-link>↗</span></a>
<a href=https://blog.welain.com/articles/2024/moonlight-streaming-with-vpn/ target=_blank rel=noopener class=custom-link>体验较好的低延迟串流方案 | MoonLight+Sunshine+Tailscale<span class=external-link>↗</span></a>
<a href=https://alphax.top/1b481c64/ target=_blank rel=noopener class=custom-link>Server搭建过程-5.Frp穿透介绍和P2P<span class=external-link>↗</span></a></p></div><div class=post-license><hr><div class=license-declaration vocab="https://schema.org/" typeof="CreativeWork"><meta property="name" content="2026_02_01 Build_a_streaming_server"><link property="copyrightHolder" href=https://downmars.github.io/#author><p><span property="license" content="https://creativecommons.org/licenses/by-nc/4.0/">本文采用</span>
<a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank rel="license noopener noreferrer" class=license-badge data-theme=light>CC BY-NC 4.0
<img src=https://mirrors.creativecommons.org/presskit/icons/cc.svg alt="CC 图标" class=license-icon loading=lazy decoding=async>
<img src=https://mirrors.creativecommons.org/presskit/icons/by.svg alt="BY 图标" class=license-icon loading=lazy decoding=async>
<img src=https://mirrors.creativecommons.org/presskit/icons/nc.svg alt="NC 图标" class=license-icon loading=lazy decoding=async></a></p></div></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=next href=https://downmars.github.io/zh/posts/2026_01_30-server_selection_and_purchase_and_some_precautions/><span class=title>下一页 »</span><br><span>2026_01_30 Server_selection_and_purchase_and_some_precautions</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share 2026_02_01 Build_a_streaming_server on x" href="https://x.com/intent/tweet/?text=2026_02_01%20Build_a_streaming_server&amp;url=https%3a%2f%2fdownmars.github.io%2fzh%2fposts%2f2026_02_01-build_a_streaming_server%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 2026_02_01 Build_a_streaming_server on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fdownmars.github.io%2fzh%2fposts%2f2026_02_01-build_a_streaming_server%2f&amp;title=2026_02_01%20Build_a_streaming_server&amp;summary=2026_02_01%20Build_a_streaming_server&amp;source=https%3a%2f%2fdownmars.github.io%2fzh%2fposts%2f2026_02_01-build_a_streaming_server%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 2026_02_01 Build_a_streaming_server on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fdownmars.github.io%2fzh%2fposts%2f2026_02_01-build_a_streaming_server%2f&title=2026_02_01%20Build_a_streaming_server"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 2026_02_01 Build_a_streaming_server on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fdownmars.github.io%2fzh%2fposts%2f2026_02_01-build_a_streaming_server%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 2026_02_01 Build_a_streaming_server on whatsapp" href="https://api.whatsapp.com/send?text=2026_02_01%20Build_a_streaming_server%20-%20https%3a%2f%2fdownmars.github.io%2fzh%2fposts%2f2026_02_01-build_a_streaming_server%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 2026_02_01 Build_a_streaming_server on telegram" href="https://telegram.me/share/url?text=2026_02_01%20Build_a_streaming_server&amp;url=https%3a%2f%2fdownmars.github.io%2fzh%2fposts%2f2026_02_01-build_a_streaming_server%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 2026_02_01 Build_a_streaming_server on ycombinator" href="https://news.ycombinator.com/submitlink?t=2026_02_01%20Build_a_streaming_server&u=https%3a%2f%2fdownmars.github.io%2fzh%2fposts%2f2026_02_01-build_a_streaming_server%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><div id=tw-comment></div><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="light"?"light":"dark",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const s={src:"https://giscus.app/client.js","data-repo":"Downmars/Downmars.github.io","data-repo-id":"R_kgDONa-How","data-category":"Announcements","data-category-id":"DIC_kwDONa-Ho84CmJrl","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"zh-CN","data-loading":"lazy",crossorigin:"anonymous"},e=document.createElement("script");Object.entries(s).forEach(([t,n])=>e.setAttribute(t,n)),document.querySelector("#tw-comment").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme);const n=document.querySelector("#theme-toggle-float");n&&n.addEventListener("click",setGiscusTheme)})</script></article></main><footer class=footer><span>&copy; 2026 <a href=https://downmars.github.io/zh/>DLog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>(function(){var e,t,n,s=document.getElementsByTagName("code");for(n=0;n<s.length;){if(t=s[n],t.parentNode.tagName!=="PRE"&&t.childElementCount===0&&(e=t.textContent,/^\$[^$]/.test(e)&&/[^$]\$$/.test(e)&&(e=e.replace(/^\$/,"\\(").replace(/\$$/,"\\)"),t.textContent=e),/^\\\((.|\s)+\\\)$/.test(e)||/^\\\[(.|\s)+\\\]$/.test(e)||/^\$(.|\s)+\$$/.test(e)||/^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(e))){t.outerHTML=t.innerHTML;continue}n++}})()</script><script>(function(e,t){var s=document,o="script",n=s.createElement(o),i=s.getElementsByTagName(o)[0];n.src=e,t&&n.addEventListener("load",function(e){t(e)}),i.parentNode.insertBefore(n,i)})("/js/pangu.min.js",function(){pangu.spacingPage()})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML=`
            <img src="/images/copy.svg" 
                 alt="复制"
                 class="copy-icon"
                 width="16" 
                 height="16">
        `;function s(){t.innerHTML=`
                <img src="/images/check.svg" 
                     alt="已复制"
                     class="copied-icon"
                     width="16" 
                     height="16">
            `,setTimeout(()=>{t.innerHTML=`
                    <img src="/images/copy.svg" 
                         alt="复制"
                         class="copy-icon"
                         width="16" 
                         height="16">
                `},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script src=https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css><script src=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js></script><section class=totalcount>总计70.44k字</section><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js></script><script>hljs.highlightAll()</script><script src=/js/admonition.min.33aa3259ace2dcae05d7c1cebb7eddb5da4d69bc5b147e9e7a59839d96b71bc2.js defer></script></body></html>