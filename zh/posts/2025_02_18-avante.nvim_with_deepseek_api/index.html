<!doctype html><html lang=zh dir=auto><head><link rel=stylesheet href=/an-old-hope.min.css><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>使用Avante.nvim作为代码助手 | DLog</title>
<meta name=keywords content="deepseek,nvim"><meta name=description content="前言
前段时间，  
   avante.nvim↗
插件支持了  
   DeepSeek的API↗
截止2025年2月18日，由于官方服务器资源紧张，暂时停止API的充值服务。

，这边将配置的全流程记录一下，供大家参考。
avante.nvim
avante.nvim是一个  
   Neovim↗
的插件，旨在模仿AI开发环境  
   Cursor↗
的工作模式。它给用户提供了AI驱动的代码建议，并且能够以花费最小的努力将这些建议直接应用于其源文件。"><meta name=author content="Downmars"><link rel=canonical href=https://downmars.github.io/zh/posts/2025_02_18-avante.nvim_with_deepseek_api/><link crossorigin=anonymous href=/assets/css/stylesheet.57310bbf433f32dc0105c07276ca4432adf4135cd6a67e8b5eb5b6af5e1cc286.css integrity="sha256-VzELv0M/MtwBBcBydspEMq30E1zWpn6LXrW2r14cwoY=" rel="preload stylesheet" as=style><link rel=icon href=https://downmars.github.io/images/blog.png><link rel=icon type=image/png sizes=16x16 href=https://downmars.github.io/images/blog.png><link rel=icon type=image/png sizes=32x32 href=https://downmars.github.io/images/blog.png><link rel=apple-touch-icon href=https://downmars.github.io/apple-touch-icon.png><link rel=mask-icon href=https://downmars.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://downmars.github.io/zh/posts/2025_02_18-avante.nvim_with_deepseek_api/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript>-->
<script type=text/javascript async src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["[[","]]"]],processEscapes:!0,processEnvironments:!0,skipTags:["script","noscript","style","textarea","pre"],TeX:{equationNumbers:{autoNumber:"AMS"},extensions:["AMSmath.js","AMSsymbols.js"]}}}),MathJax.Hub.Queue(function(){var e,t=MathJax.Hub.getAllJax();for(e=0;e<t.length;e+=1)t[e].SourceElement().parentNode.className+=" has-jax"})</script><style>code.has-jax{font:inherit;font-size:100%;background:inherit;border:inherit;color:#515151}</style><meta property="og:url" content="https://downmars.github.io/zh/posts/2025_02_18-avante.nvim_with_deepseek_api/"><meta property="og:site_name" content="DLog"><meta property="og:title" content="使用Avante.nvim作为代码助手"><meta property="og:description" content="前言 前段时间， avante.nvim↗ 插件支持了 DeepSeek的API↗ 截止2025年2月18日，由于官方服务器资源紧张，暂时停止API的充值服务。 ，这边将配置的全流程记录一下，供大家参考。
avante.nvim avante.nvim是一个 Neovim↗ 的插件，旨在模仿AI开发环境 Cursor↗ 的工作模式。它给用户提供了AI驱动的代码建议，并且能够以花费最小的努力将这些建议直接应用于其源文件。"><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-02-18T18:27:58+08:00"><meta property="article:modified_time" content="2025-02-18T18:27:58+08:00"><meta property="article:tag" content="Deepseek"><meta property="article:tag" content="Nvim"><meta property="og:image" content="https://downmars.github.io/images/posts/2025_02_18-avante.nvim_with_deepseek_api/avante.nvim.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://downmars.github.io/images/posts/2025_02_18-avante.nvim_with_deepseek_api/avante.nvim.png"><meta name=twitter:title content="使用Avante.nvim作为代码助手"><meta name=twitter:description content="前言
前段时间，  
   avante.nvim↗
插件支持了  
   DeepSeek的API↗
截止2025年2月18日，由于官方服务器资源紧张，暂时停止API的充值服务。

，这边将配置的全流程记录一下，供大家参考。
avante.nvim
avante.nvim是一个  
   Neovim↗
的插件，旨在模仿AI开发环境  
   Cursor↗
的工作模式。它给用户提供了AI驱动的代码建议，并且能够以花费最小的努力将这些建议直接应用于其源文件。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://downmars.github.io/zh/posts/"},{"@type":"ListItem","position":2,"name":"使用Avante.nvim作为代码助手","item":"https://downmars.github.io/zh/posts/2025_02_18-avante.nvim_with_deepseek_api/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"使用Avante.nvim作为代码助手","name":"使用Avante.nvim作为代码助手","description":"前言 前段时间， avante.nvim↗ 插件支持了 DeepSeek的API↗ 截止2025年2月18日，由于官方服务器资源紧张，暂时停止API的充值服务。 ，这边将配置的全流程记录一下，供大家参考。\navante.nvim avante.nvim是一个 Neovim↗ 的插件，旨在模仿AI开发环境 Cursor↗ 的工作模式。它给用户提供了AI驱动的代码建议，并且能够以花费最小的努力将这些建议直接应用于其源文件。\n","keywords":["deepseek","nvim"],"articleBody":"前言 前段时间， avante.nvim↗ 插件支持了 DeepSeek的API↗ 截止2025年2月18日，由于官方服务器资源紧张，暂时停止API的充值服务。 ，这边将配置的全流程记录一下，供大家参考。\navante.nvim avante.nvim是一个 Neovim↗ 的插件，旨在模仿AI开发环境 Cursor↗ 的工作模式。它给用户提供了AI驱动的代码建议，并且能够以花费最小的努力将这些建议直接应用于其源文件。\n由于，我这里使用的是 LazyVim↗ 来管理我的NeoVim插件配置，我们可以很方便的进行我的anate.nvim的安装。\n~/.config/nvim/lua/plugins/avante.lua 129 lines vim.env.ANTHROPIC_API_KEY = \"sk-xxxx\" vim.env.DEEPSEEK_API_KEY = \"sk-xxxx\" return { \"yetone/avante.nvim\", event = \"VeryLazy\", lazy = false, version = false, -- Set this to \"*\" to always pull the latest release version, or set it to false to update to the latest code changes. opts = { provider = \"deepseek_r1\", -- 指定使用 DeepSeek 作为 provider auto_suggestions_provider = \"deepseek\", vendors = { deepseek = { __inherited_from = \"openai\", disable_tools = true, api_key_name = \"DEEPSEEK_API_KEY\", endpoint = \"https://api.deepseek.com\", model = \"deepseek-coder\", }, deepseek_r1 = { __inherited_from = \"openai\", disable_tools = true, api_key_name = \"DEEPSEEK_API_KEY\", endpoint = \"https://api.deepseek.com\", model = \"deepseek-reasoner\", }, behaviour = { auto_suggestions = true, -- Experimental stage auto_set_highlight_group = true, auto_set_keymaps = true, auto_apply_diff_after_generation = true, support_paste_from_clipboard = true, }, mappings = { --- @class AvanteConflictMappings diff = { ours = \"co\", theirs = \"ct\", all_theirs = \"ca\", both = \"cb\", cursor = \"cc\", next = \"]x\", prev = \"[x\", }, suggestion = { accept = \"\", next = \"\", prev = \"\", dismiss = \"\", }, jump = { next = \"]]\", prev = \"[[\", }, submit = { normal = \"\", insert = \"\", }, sidebar = { apply_all = \"A\", apply_cursor = \"a\", switch_windows = \"\", reverse_switch_windows = \"\", }, }, highlights = { ---@type AvanteConflictHighlights diff = { current = \"DiffText\", incoming = \"DiffAdd\", }, }, --- @class AvanteConflictUserConfig diff = { autojump = true, ---@type string | fun(): any list_opener = \"copen\", --- Override the 'timeoutlen' setting while hovering over a diff (see :help timeoutlen). --- Helps to avoid entering operator-pending mode with diff mappings starting with `c`. --- Disable by setting to -1. override_timeoutlen = 500, }, suggestion = { debounce = 600, throttle = 600, }, }, -- if you want to build from source then do `make BUILD_FROM_SOURCE=true` build = \"make\", -- build = \"powershell -ExecutionPolicy Bypass -File Build.ps1 -BuildFromSource false\" -- for windows dependencies = { \"stevearc/dressing.nvim\", \"nvim-lua/plenary.nvim\", \"MunifTanjim/nui.nvim\", --- The below dependencies are optional, \"echasnovski/mini.pick\", -- for file_selector provider mini.pick \"nvim-telescope/telescope.nvim\", -- for file_selector provider telescope \"hrsh7th/nvim-cmp\", -- autocompletion for avante commands and mentions \"ibhagwan/fzf-lua\", -- for file_selector provider fzf \"nvim-tree/nvim-web-devicons\", -- or echasnovski/mini.icons \"zbirenbaum/copilot.lua\", -- for providers='copilot' { -- support for image pasting \"HakonHarnes/img-clip.nvim\", event = \"VeryLazy\", opts = { -- recommended settings default = { embed_image_as_base64 = false, prompt_for_file_name = false, drag_and_drop = { insert_mode = true, }, -- required for Windows users use_absolute_path = true, }, }, }, { -- Make sure to set this up properly if you have lazy=true \"MeanderingProgrammer/render-markdown.nvim\", opts = { file_types = { \"markdown\", \"Avante\" }, }, ft = { \"markdown\", \"Avante\" }, }, }, }, } 在编写完成之后，我们使用:Lazy install yetone/avante.nvim来进行此插件的安装。\n我在这边对于auto_suggestions和chat的providers使用了不同的模型，参考于： avante.nvim#774↗ 和 avante.nvim#1115↗ 。\nWarning 注意，如果要使用auto_suggestions功能，记得调整一下debounce和throttle设置，即防抖和节流，单位为ms。否则，你在写文章的后，你会发现你一天用了373w tokens，不要问我为什么知道的。 获取DeepSeek API Key 注册DeepSeek账户 访问 DeepSeek官网↗ 点击\"Sign Up\"注册新账户 完成邮箱验证 创建API Key 登录后进入控制台 导航至\"API Keys\"页面 点击\"Create new API Key\"按钮 为API Key设置一个描述性名称（如\"nvim-avante\"） 复制生成的API Key并妥善保存 API Key使用注意事项 API Key仅在创建时显示一次，请务必立即保存 建议将API Key存储在安全的地方（如密码管理器） 每个API Key都有使用限额，请合理使用 如果API Key泄露，请立即删除并创建新的Key 将你创建的DeepSeek API Key填入到上述文件开头的vim.env.DEEPSEEK_API_KEY即可开启你的avante.nvim之旅。\nTip 现在除了DeepSeek官方的API，其余家的都很稳定，打算购买第三方API的访客可以先参考下: 务实测试：DeepSeek 各家 API 真实速度（附：测试脚本）↗ 。 核心操作指南 快捷键映射 avante.nvim 提供了丰富的快捷键操作体系，以下是主要快捷键说明：\n快捷键 模式 功能描述 aa 普通模式 打开/切换侧边栏 ar 普通模式 刷新侧边栏内容 af 普通模式 切换侧边栏焦点 ae 普通模式 编辑选中代码块 co 差异模式 采用当前版本 ct 差异模式 采用建议版本 ca 差异模式 采用所有建议修改 cb 差异模式 合并双方修改 cc 差异模式 基于光标位置选择 ]] 结果窗口 跳转到下一个代码块 [[ 结果窗口 跳转到上一个代码块 注意事项：\n使用Lazy.nvim时快捷键会自动安全绑定（不与现有快捷键冲突） 可通过配置覆盖默认快捷键： ~/.config/nvim/lua/plugins/avante.lua 8 lines opts = { mappings = { diff = { ours = \"co\", -- 自定义采用当前版本 theirs = \"ct\" } } } 核心命令 avante.nvim 提供了一系列强大的命令操作：\n命令 功能描述 使用示例 :AvanteAsk [问题] 向AI提问代码相关问题 :AvanteAsk 如何优化这个循环结构 :AvanteChat 开启代码库对话模式 :AvanteChat position=right :AvanteEdit 编辑选中代码块 配合视觉模式使用 :AvanteRefresh 刷新所有Avante窗口 解决界面卡顿时使用 :AvanteSwitchProvider 切换AI服务提供商 :AvanteSwitchProvider openai :AvanteToggle 开关侧边栏 快速切换工作区布局 高级用法示例：\n带上下文的提问： :AvanteAsk position=float 请解释这个函数的时间复杂度 代码重构工作流： 选中目标代码块 执行:AvanteEdit 使用co/ct快捷键选择修改 按 :w保存变更 笑话一则 avante.nvim#1011↗ :This was my process, and I’m sure I’m not the only one in this situation.\nI am a software developer People are talking about AI; I have no idea how to use it Friend suggests this plugin Cool, maybe I'll learn how to use AI at work Add the plugin to my lazy.nvim config, try it out, and it asks for something called ANTHROPIC_API_KEY No idea what that is Google it Oh, looks like I need an account Create an account Find the key and add it to my .bashrc Try the plugin again I get a the response posted above \u003e \"make sure you have credit balance\" No idea what that is Google it Apparently you have to pay for this ...? Apparently I have $4.90 credit in my account Seems like maybe I got $5 free to start and I've used 10¢ of it ...? ","wordCount":"2017","inLanguage":"zh","image":"https://downmars.github.io/images/posts/2025_02_18-avante.nvim_with_deepseek_api/avante.nvim.png","datePublished":"2025-02-18T18:27:58+08:00","dateModified":"2025-02-18T18:27:58+08:00","author":{"@type":"Person","name":"Downmars"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://downmars.github.io/zh/posts/2025_02_18-avante.nvim_with_deepseek_api/"},"publisher":{"@type":"Organization","name":"DLog","logo":{"@type":"ImageObject","url":"https://downmars.github.io/images/blog.png"}}}</script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://downmars.github.io/zh/ accesskey=h title="DLog (Alt + H)">DLog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://downmars.github.io/en/ title=English aria-label=English>En</a></li></ul></div></div><ul id=menu><li><a href=https://downmars.github.io/zh/posts/ title=墓志铭><span>墓志铭</span></a></li><li><a href=https://downmars.github.io/zh/thoughts/ title=翻案集><span>翻案集</span></a></li><li><a href=https://downmars.github.io/zh/archives/ title=故纸堆><span>故纸堆</span></a></li><li><a href=https://downmars.github.io/zh/search/ title=寻章句><span>寻章句</span></a></li><li><a href=https://downmars.github.io/zh/friends/ title=江湖录><span>江湖录</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://downmars.github.io/zh/>主页</a>&nbsp;»&nbsp;<a href=https://downmars.github.io/zh/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">使用Avante.nvim作为代码助手</h1><div class=post-meta><span title='2025-02-18 18:27:58 +0800 +0800'>2025-02-18</span>&nbsp;·&nbsp;5 分钟&nbsp;·&nbsp;2017 字&nbsp;·&nbsp;Downmars</div></header><figure class=entry-cover><img loading=eager src=https://downmars.github.io/images/posts/2025_02_18-avante.nvim_with_deepseek_api/avante.nvim.png alt></figure><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e5%89%8d%e8%a8%80 aria-label=前言>前言</a></li><li><a href=#avantenvim aria-label=avante.nvim>avante.nvim</a></li><li><a href=#%e8%8e%b7%e5%8f%96deepseek-api-key aria-label="获取DeepSeek API Key">获取DeepSeek API Key</a><ul><li><a href=#%e6%b3%a8%e5%86%8cdeepseek%e8%b4%a6%e6%88%b7 aria-label=注册DeepSeek账户>注册DeepSeek账户</a></li><li><a href=#%e5%88%9b%e5%bb%baapi-key aria-label="创建API Key">创建API Key</a></li><li><a href=#api-key%e4%bd%bf%e7%94%a8%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9 aria-label="API Key使用注意事项">API Key使用注意事项</a></li></ul></li><li><a href=#%e6%a0%b8%e5%bf%83%e6%93%8d%e4%bd%9c%e6%8c%87%e5%8d%97 aria-label=核心操作指南>核心操作指南</a><ul><li><a href=#%e5%bf%ab%e6%8d%b7%e9%94%ae%e6%98%a0%e5%b0%84 aria-label=快捷键映射>快捷键映射</a></li><li><a href=#%e6%a0%b8%e5%bf%83%e5%91%bd%e4%bb%a4 aria-label=核心命令>核心命令</a></li></ul></li><li><a href=#%e7%ac%91%e8%af%9d%e4%b8%80%e5%88%99 aria-label=笑话一则>笑话一则</a></li></ul></div></details></div></aside><script>let activeElement,elements,headerCounters={};function resetHeaderCounters(){headerCounters={}}function getHeaderNumber(e){let s=Array.from(document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]")),i=s.indexOf(e),n=new Array(6).fill(0),o=[];for(let t=0;t<=i;t++){let r=s[t],a=parseInt(r.tagName.substring(1))-1;for(let e=a+1;e<6;e++)n[e]=0;if(n[a]++,r===e){for(let e=0;e<=a;e++)n[e]>0&&o.push(n[e]);break}}return o.join(".")}function updateTocDisplay(e,t){const s=parseInt(e.tagName.substring(1)),o=getHeaderNumber(e,s);let n=t.textContent;n=n.replace(/^\d+(\.\d+)*\s+/,""),t.textContent=`${o} ${n}`}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}function checkTocPosition(){const e=document.body.scrollWidth,t=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),n=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),s=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);e-t-n*2-s*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}document.addEventListener("DOMContentLoaded",function(){if(checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),elements.length>0){activeElement=elements[0];const e=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${e}"]`).classList.add("active")}elements&&elements.length>0&&elements.forEach(e=>{const n=encodeURI(e.getAttribute("id")).toLowerCase(),t=document.querySelector(`.inner ul li a[href="#${n}"]`);t&&updateTocDisplay(e,t)});const t=document.getElementById("top-link");t&&t.addEventListener("click",e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{const e=window.pageYOffset||document.documentElement.scrollTop;if(e===0)return;elements&&elements.length>0&&(resetHeaderCounters(),activeElement=Array.from(elements).find(t=>{if(getOffsetTop(t)-e>0&&getOffsetTop(t)-e<window.innerHeight/2)return t})||activeElement,elements.forEach(e=>{const n=encodeURI(e.getAttribute("id")).toLowerCase(),t=document.querySelector(`.inner ul li a[href="#${n}"]`);if(t)if(updateTocDisplay(e,t),e===activeElement){t.classList.add("active"),t.style.textDecoration="underline";const e=document.querySelector(".toc .inner"),n=t.offsetTop,s=e.clientHeight,o=t.clientHeight,i=n-s/2+o/2;e.scrollTo({top:i,behavior:"smooth"})}else t.classList.remove("active"),t.style.textDecoration="none"}))},!1)</script><div class=post-content><h2 id=前言>前言<a hidden class=anchor aria-hidden=true href=#前言>#</a></h2><p>前段时间，<a href="https://github.com/yetone/avante.nvim?tab=readme-ov-file" target=_blank rel=noopener class=custom-link>
avante.nvim<span class=external-link>↗</span></a>
插件支持了<a href=https://platform.deepseek.com/usage target=_blank rel=noopener class=custom-link>
DeepSeek的API<span class=external-link>↗</span></a>
<span class=sidenote-number><small class=sidenote>截止2025年2月18日，由于官方服务器资源紧张，暂时停止API的充值服务。</small></span>
，这边将配置的全流程记录一下，供大家参考。</p><h2 id=avantenvim>avante.nvim<a hidden class=anchor aria-hidden=true href=#avantenvim>#</a></h2><p>avante.nvim是一个<a href=https://neovim.io/ target=_blank rel=noopener class=custom-link>
Neovim<span class=external-link>↗</span></a>
的插件，旨在模仿AI开发环境<a href=https://www.cursor.com/ target=_blank rel=noopener class=custom-link>
Cursor<span class=external-link>↗</span></a>
的工作模式。它给用户提供了AI驱动的代码建议，并且能够以花费最小的努力将这些建议直接应用于其源文件。</p><p>由于，我这里使用的是<a href=https://github.com/LazyVim/LazyVim target=_blank rel=noopener class=custom-link>
LazyVim<span class=external-link>↗</span></a>
来管理我的NeoVim插件配置，我们可以很方便的进行我的anate.nvim的安装。<br><p><details class=custom-collapse><summary markdown=span><span>~/.config/nvim/lua/plugins/avante.lua</span>
<span class=line-count>129 lines</span></summary><div class=content><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>vim.env.ANTHROPIC_API_KEY <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;sk-xxxx&#34;</span>
</span></span><span style=display:flex><span>vim.env.DEEPSEEK_API_KEY <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;sk-xxxx&#34;</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>return</span> {
</span></span><span style=display:flex><span>  <span style=color:#f1fa8c>&#34;yetone/avante.nvim&#34;</span>,
</span></span><span style=display:flex><span>  event <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;VeryLazy&#34;</span>,
</span></span><span style=display:flex><span>  lazy <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>false</span>,
</span></span><span style=display:flex><span>  version <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>false</span>, <span style=color:#6272a4>-- Set this to &#34;*&#34; to always pull the latest release version, or set it to false to update to the latest code changes.</span>
</span></span><span style=display:flex><span>  opts <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>    provider <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;deepseek_r1&#34;</span>, <span style=color:#6272a4>-- 指定使用 DeepSeek 作为 provider</span>
</span></span><span style=display:flex><span>    auto_suggestions_provider <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;deepseek&#34;</span>,
</span></span><span style=display:flex><span>    vendors <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>      deepseek <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>        __inherited_from <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;openai&#34;</span>,
</span></span><span style=display:flex><span>        disable_tools <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>true</span>,
</span></span><span style=display:flex><span>        api_key_name <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;DEEPSEEK_API_KEY&#34;</span>,
</span></span><span style=display:flex><span>        endpoint <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;https://api.deepseek.com&#34;</span>,
</span></span><span style=display:flex><span>        model <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;deepseek-coder&#34;</span>,
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      deepseek_r1 <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>        __inherited_from <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;openai&#34;</span>,
</span></span><span style=display:flex><span>        disable_tools <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>true</span>,
</span></span><span style=display:flex><span>        api_key_name <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;DEEPSEEK_API_KEY&#34;</span>,
</span></span><span style=display:flex><span>        endpoint <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;https://api.deepseek.com&#34;</span>,
</span></span><span style=display:flex><span>        model <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;deepseek-reasoner&#34;</span>,
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      behaviour <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>        auto_suggestions <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>true</span>, <span style=color:#6272a4>-- Experimental stage</span>
</span></span><span style=display:flex><span>        auto_set_highlight_group <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>true</span>,
</span></span><span style=display:flex><span>        auto_set_keymaps <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>true</span>,
</span></span><span style=display:flex><span>        auto_apply_diff_after_generation <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>true</span>,
</span></span><span style=display:flex><span>        support_paste_from_clipboard <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>true</span>,
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      mappings <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#6272a4>--- @class AvanteConflictMappings</span>
</span></span><span style=display:flex><span>        diff <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>          ours <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;co&#34;</span>,
</span></span><span style=display:flex><span>          theirs <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;ct&#34;</span>,
</span></span><span style=display:flex><span>          all_theirs <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;ca&#34;</span>,
</span></span><span style=display:flex><span>          both <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;cb&#34;</span>,
</span></span><span style=display:flex><span>          cursor <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;cc&#34;</span>,
</span></span><span style=display:flex><span>          next <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;]x&#34;</span>,
</span></span><span style=display:flex><span>          prev <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;[x&#34;</span>,
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        suggestion <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>          accept <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;&lt;M-l&gt;&#34;</span>,
</span></span><span style=display:flex><span>          next <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;&lt;M-]&gt;&#34;</span>,
</span></span><span style=display:flex><span>          prev <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;&lt;M-[&gt;&#34;</span>,
</span></span><span style=display:flex><span>          dismiss <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;&lt;C-]&gt;&#34;</span>,
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        jump <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>          next <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;]]&#34;</span>,
</span></span><span style=display:flex><span>          prev <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;[[&#34;</span>,
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        submit <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>          normal <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;&lt;CR&gt;&#34;</span>,
</span></span><span style=display:flex><span>          insert <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;&lt;C-s&gt;&#34;</span>,
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        sidebar <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>          apply_all <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;A&#34;</span>,
</span></span><span style=display:flex><span>          apply_cursor <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;a&#34;</span>,
</span></span><span style=display:flex><span>          switch_windows <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;&lt;Tab&gt;&#34;</span>,
</span></span><span style=display:flex><span>          reverse_switch_windows <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;&lt;S-Tab&gt;&#34;</span>,
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      highlights <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#6272a4>---@type AvanteConflictHighlights</span>
</span></span><span style=display:flex><span>        diff <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>          current <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;DiffText&#34;</span>,
</span></span><span style=display:flex><span>          incoming <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;DiffAdd&#34;</span>,
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      <span style=color:#6272a4>--- @class AvanteConflictUserConfig</span>
</span></span><span style=display:flex><span>      diff <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>        autojump <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>true</span>,
</span></span><span style=display:flex><span>        <span style=color:#6272a4>---@type string | fun(): any</span>
</span></span><span style=display:flex><span>        list_opener <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;copen&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#6272a4>--- Override the &#39;timeoutlen&#39; setting while hovering over a diff (see :help timeoutlen).</span>
</span></span><span style=display:flex><span>        <span style=color:#6272a4>--- Helps to avoid entering operator-pending mode with diff mappings starting with `c`.</span>
</span></span><span style=display:flex><span>        <span style=color:#6272a4>--- Disable by setting to -1.</span>
</span></span><span style=display:flex><span>        override_timeoutlen <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>500</span>,
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      suggestion <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>        debounce <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>600</span>,
</span></span><span style=display:flex><span>        throttle <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>600</span>,
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#6272a4>-- if you want to build from source then do `make BUILD_FROM_SOURCE=true`</span>
</span></span><span style=display:flex><span>    build <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;make&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#6272a4>-- build = &#34;powershell -ExecutionPolicy Bypass -File Build.ps1 -BuildFromSource false&#34; -- for windows</span>
</span></span><span style=display:flex><span>    dependencies <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>      <span style=color:#f1fa8c>&#34;stevearc/dressing.nvim&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f1fa8c>&#34;nvim-lua/plenary.nvim&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f1fa8c>&#34;MunifTanjim/nui.nvim&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#6272a4>--- The below dependencies are optional,</span>
</span></span><span style=display:flex><span>      <span style=color:#f1fa8c>&#34;echasnovski/mini.pick&#34;</span>, <span style=color:#6272a4>-- for file_selector provider mini.pick</span>
</span></span><span style=display:flex><span>      <span style=color:#f1fa8c>&#34;nvim-telescope/telescope.nvim&#34;</span>, <span style=color:#6272a4>-- for file_selector provider telescope</span>
</span></span><span style=display:flex><span>      <span style=color:#f1fa8c>&#34;hrsh7th/nvim-cmp&#34;</span>, <span style=color:#6272a4>-- autocompletion for avante commands and mentions</span>
</span></span><span style=display:flex><span>      <span style=color:#f1fa8c>&#34;ibhagwan/fzf-lua&#34;</span>, <span style=color:#6272a4>-- for file_selector provider fzf</span>
</span></span><span style=display:flex><span>      <span style=color:#f1fa8c>&#34;nvim-tree/nvim-web-devicons&#34;</span>, <span style=color:#6272a4>-- or echasnovski/mini.icons</span>
</span></span><span style=display:flex><span>      <span style=color:#f1fa8c>&#34;zbirenbaum/copilot.lua&#34;</span>, <span style=color:#6272a4>-- for providers=&#39;copilot&#39;</span>
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#6272a4>-- support for image pasting</span>
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;HakonHarnes/img-clip.nvim&#34;</span>,
</span></span><span style=display:flex><span>        event <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;VeryLazy&#34;</span>,
</span></span><span style=display:flex><span>        opts <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>          <span style=color:#6272a4>-- recommended settings</span>
</span></span><span style=display:flex><span>          default <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>            embed_image_as_base64 <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>false</span>,
</span></span><span style=display:flex><span>            prompt_for_file_name <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>false</span>,
</span></span><span style=display:flex><span>            drag_and_drop <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>              insert_mode <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>true</span>,
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            <span style=color:#6272a4>-- required for Windows users</span>
</span></span><span style=display:flex><span>            use_absolute_path <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>true</span>,
</span></span><span style=display:flex><span>          },
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#6272a4>-- Make sure to set this up properly if you have lazy=true</span>
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#34;MeanderingProgrammer/render-markdown.nvim&#34;</span>,
</span></span><span style=display:flex><span>        opts <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>          file_types <span style=color:#ff79c6>=</span> { <span style=color:#f1fa8c>&#34;markdown&#34;</span>, <span style=color:#f1fa8c>&#34;Avante&#34;</span> },
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        ft <span style=color:#ff79c6>=</span> { <span style=color:#f1fa8c>&#34;markdown&#34;</span>, <span style=color:#f1fa8c>&#34;Avante&#34;</span> },
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details></p>在编写完成之后，我们使用<code>:Lazy install yetone/avante.nvim</code>来进行此插件的安装。</p><p>我在这边对于auto_suggestions和chat的providers使用了不同的模型，参考于：<a href=https://github.com/yetone/avante.nvim/issues/774 target=_blank rel=noopener class=custom-link>
avante.nvim#774<span class=external-link>↗</span></a>
和<a href=https://github.com/yetone/avante.nvim/issues/1115 target=_blank rel=noopener class=custom-link>
avante.nvim#1115<span class=external-link>↗</span></a>
。</p><div class="admonition warning"><div class=admonition-header><i class="fas fa-exclamation-triangle"></i>
<span>Warning</span></div><div class=admonition-content>注意，如果要使用<code>auto_suggestions</code>功能，记得调整一下<code>debounce</code>和<code>throttle</code>设置，即防抖和节流，单位为ms。否则，你在写文章的后，你会发现你一天用了373w tokens，不要问我为什么知道的。</div></div><h2 id=获取deepseek-api-key>获取DeepSeek API Key<a hidden class=anchor aria-hidden=true href=#获取deepseek-api-key>#</a></h2><h3 id=注册deepseek账户>注册DeepSeek账户<a hidden class=anchor aria-hidden=true href=#注册deepseek账户>#</a></h3><ul><li>访问<a href=https://platform.deepseek.com/ target=_blank rel=noopener class=custom-link>
DeepSeek官网<span class=external-link>↗</span></a></li><li>点击"Sign Up"注册新账户</li><li>完成邮箱验证</li></ul><h3 id=创建api-key>创建API Key<a hidden class=anchor aria-hidden=true href=#创建api-key>#</a></h3><ul><li>登录后进入控制台</li><li>导航至"API Keys"页面</li><li>点击"Create new API Key"按钮</li><li>为API Key设置一个描述性名称（如"nvim-avante"）</li><li>复制生成的API Key并妥善保存</li></ul><h3 id=api-key使用注意事项>API Key使用注意事项<a hidden class=anchor aria-hidden=true href=#api-key使用注意事项>#</a></h3><ul><li>API Key仅在创建时显示一次，请务必立即保存</li><li>建议将API Key存储在安全的地方（如密码管理器）</li><li>每个API Key都有使用限额，请合理使用</li><li>如果API Key泄露，请立即删除并创建新的Key</li></ul><p>将你创建的DeepSeek API Key填入到上述文件开头的<code>vim.env.DEEPSEEK_API_KEY</code>即可开启你的avante.nvim之旅。<br><div class="admonition tip"><div class=admonition-header><i class="fas fa-lightbulb"></i>
<span>Tip</span></div><div class=admonition-content>现在除了DeepSeek官方的API，其余家的都很稳定，打算购买第三方API的访客可以先参考下:<a href="https://m.aitntnews.com/newDetail.html?newId=11209" target=_blank rel=noopener class=custom-link>
务实测试：DeepSeek 各家 API 真实速度（附：测试脚本）<span class=external-link>↗</span></a>
。</div></div></p><h2 id=核心操作指南>核心操作指南<a hidden class=anchor aria-hidden=true href=#核心操作指南>#</a></h2><h3 id=快捷键映射>快捷键映射<a hidden class=anchor aria-hidden=true href=#快捷键映射>#</a></h3><p>avante.nvim 提供了丰富的快捷键操作体系，以下是主要快捷键说明：</p><table><thead><tr><th style=text-align:center>快捷键</th><th style=text-align:center>模式</th><th style=text-align:center>功能描述</th></tr></thead><tbody><tr><td style=text-align:center><code>&lt;leader>aa</code></td><td style=text-align:center>普通模式</td><td style=text-align:center>打开/切换侧边栏</td></tr><tr><td style=text-align:center><code>&lt;leader>ar</code></td><td style=text-align:center>普通模式</td><td style=text-align:center>刷新侧边栏内容</td></tr><tr><td style=text-align:center><code>&lt;leader>af</code></td><td style=text-align:center>普通模式</td><td style=text-align:center>切换侧边栏焦点</td></tr><tr><td style=text-align:center><code>&lt;leader>ae</code></td><td style=text-align:center>普通模式</td><td style=text-align:center>编辑选中代码块</td></tr><tr><td style=text-align:center><code>co</code></td><td style=text-align:center>差异模式</td><td style=text-align:center>采用当前版本</td></tr><tr><td style=text-align:center><code>ct</code></td><td style=text-align:center>差异模式</td><td style=text-align:center>采用建议版本</td></tr><tr><td style=text-align:center><code>ca</code></td><td style=text-align:center>差异模式</td><td style=text-align:center>采用所有建议修改</td></tr><tr><td style=text-align:center><code>cb</code></td><td style=text-align:center>差异模式</td><td style=text-align:center>合并双方修改</td></tr><tr><td style=text-align:center><code>cc</code></td><td style=text-align:center>差异模式</td><td style=text-align:center>基于光标位置选择</td></tr><tr><td style=text-align:center><code>]]</code></td><td style=text-align:center>结果窗口</td><td style=text-align:center>跳转到下一个代码块</td></tr><tr><td style=text-align:center><code>[[</code></td><td style=text-align:center>结果窗口</td><td style=text-align:center>跳转到上一个代码块</td></tr></tbody></table><p><strong>注意事项</strong>：</p><ul><li>使用Lazy.nvim时快捷键会自动安全绑定（不与现有快捷键冲突）</li><li>可通过配置覆盖默认快捷键：</li></ul><p><details class=custom-collapse open><summary markdown=span><span>~/.config/nvim/lua/plugins/avante.lua</span>
<span class=line-count>8 lines</span></summary><div class=content><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>opts <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>  mappings <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>    diff <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>      ours <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;&lt;leader&gt;co&#34;</span>, <span style=color:#6272a4>-- 自定义采用当前版本</span>
</span></span><span style=display:flex><span>      theirs <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;&lt;leader&gt;ct&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details></p><h3 id=核心命令>核心命令<a hidden class=anchor aria-hidden=true href=#核心命令>#</a></h3><p>avante.nvim 提供了一系列强大的命令操作：</p><table><thead><tr><th style=text-align:center>命令</th><th style=text-align:center>功能描述</th><th style=text-align:center>使用示例</th></tr></thead><tbody><tr><td style=text-align:center><code>:AvanteAsk [问题]</code></td><td style=text-align:center>向AI提问代码相关问题</td><td style=text-align:center><code>:AvanteAsk 如何优化这个循环结构</code></td></tr><tr><td style=text-align:center><code>:AvanteChat</code></td><td style=text-align:center>开启代码库对话模式</td><td style=text-align:center><code>:AvanteChat position=right</code></td></tr><tr><td style=text-align:center><code>:AvanteEdit</code></td><td style=text-align:center>编辑选中代码块</td><td style=text-align:center>配合视觉模式使用</td></tr><tr><td style=text-align:center><code>:AvanteRefresh</code></td><td style=text-align:center>刷新所有Avante窗口</td><td style=text-align:center>解决界面卡顿时使用</td></tr><tr><td style=text-align:center><code>:AvanteSwitchProvider</code></td><td style=text-align:center>切换AI服务提供商</td><td style=text-align:center><code>:AvanteSwitchProvider openai</code></td></tr><tr><td style=text-align:center><code>:AvanteToggle</code></td><td style=text-align:center>开关侧边栏</td><td style=text-align:center>快速切换工作区布局</td></tr></tbody></table><p><strong>高级用法示例</strong>：</p><ol><li>带上下文的提问：</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=display:flex><span>:AvanteAsk position=float 请解释这个函数的时间复杂度
</span></span></code></pre></div><ol start=2><li>代码重构工作流：</li></ol><ul><li>选中目标代码块</li><li>执行:AvanteEdit</li><li>使用co/ct快捷键选择修改</li><li>按 :w保存变更</li></ul><h2 id=笑话一则>笑话一则<a hidden class=anchor aria-hidden=true href=#笑话一则>#</a></h2><p><a href=https://github.com/yetone/avante.nvim/issues/1011 target=_blank rel=noopener class=custom-link>avante.nvim#1011<span class=external-link>↗</span></a>
:This was my process, and I&rsquo;m sure I&rsquo;m not the only one in this situation.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md><span style=display:flex><span>I am a software developer  
</span></span><span style=display:flex><span>People are talking about AI; I have no idea how to use it  
</span></span><span style=display:flex><span>Friend suggests this plugin  
</span></span><span style=display:flex><span>Cool, maybe I&#39;ll learn how to use AI at work  
</span></span><span style=display:flex><span>Add the plugin to my lazy.nvim config, try it out, and it asks for something called ANTHROPIC_API_KEY  
</span></span><span style=display:flex><span>No idea what that is  
</span></span><span style=display:flex><span>Google it  
</span></span><span style=display:flex><span>Oh, looks like I need an account  
</span></span><span style=display:flex><span>Create an account  
</span></span><span style=display:flex><span>Find the key and add it to my .bashrc  
</span></span><span style=display:flex><span>Try the plugin again  
</span></span><span style=display:flex><span>I get a the response posted above  
</span></span><span style=display:flex><span><span style=color:#ff79c6>&gt; </span><span style=text-decoration:underline>&#34;make sure you have credit balance&#34;  
</span></span></span><span style=display:flex><span><span style=text-decoration:underline></span>No idea what that is  
</span></span><span style=display:flex><span>Google it  
</span></span><span style=display:flex><span>Apparently you have to pay for this ...?
</span></span><span style=display:flex><span>Apparently I have $4.90 credit in my account
</span></span><span style=display:flex><span>Seems like maybe I got $5 free to start and I&#39;ve used 10¢ of it ...?
</span></span></code></pre></div></div><div class=post-license><hr><div class=license-declaration vocab="https://schema.org/" typeof="CreativeWork"><meta property="name" content="使用Avante.nvim作为代码助手"><link property="copyrightHolder" href=https://downmars.github.io/#author><p><span property="license" content="https://creativecommons.org/licenses/by-nc/4.0/">本文采用</span>
<a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank rel="license noopener noreferrer" class=license-badge data-theme=light>CC BY-NC 4.0
<img src=https://mirrors.creativecommons.org/presskit/icons/cc.svg alt="CC 图标" class=license-icon loading=lazy decoding=async>
<img src=https://mirrors.creativecommons.org/presskit/icons/by.svg alt="BY 图标" class=license-icon loading=lazy decoding=async>
<img src=https://mirrors.creativecommons.org/presskit/icons/nc.svg alt="NC 图标" class=license-icon loading=lazy decoding=async></a></p></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://downmars.github.io/zh/tags/deepseek/>Deepseek</a></li><li><a href=https://downmars.github.io/zh/tags/nvim/>Nvim</a></li></ul><nav class=paginav><a class=prev href=https://downmars.github.io/zh/posts/2025_02_20-image_hosting_in_github/><span class=title>« 上一页</span><br><span>通过PicGo在Github上搭建图床</span>
</a><a class=next href=https://downmars.github.io/zh/posts/2025_02_16-how_to_connect_nikon_in_archlinux/><span class=title>下一页 »</span><br><span>使用gPhoto2在Archlinux上进行Nikon相机的操控</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share 使用Avante.nvim作为代码助手 on x" href="https://x.com/intent/tweet/?text=%e4%bd%bf%e7%94%a8Avante.nvim%e4%bd%9c%e4%b8%ba%e4%bb%a3%e7%a0%81%e5%8a%a9%e6%89%8b&amp;url=https%3a%2f%2fdownmars.github.io%2fzh%2fposts%2f2025_02_18-avante.nvim_with_deepseek_api%2f&amp;hashtags=deepseek%2cnvim"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 使用Avante.nvim作为代码助手 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fdownmars.github.io%2fzh%2fposts%2f2025_02_18-avante.nvim_with_deepseek_api%2f&amp;title=%e4%bd%bf%e7%94%a8Avante.nvim%e4%bd%9c%e4%b8%ba%e4%bb%a3%e7%a0%81%e5%8a%a9%e6%89%8b&amp;summary=%e4%bd%bf%e7%94%a8Avante.nvim%e4%bd%9c%e4%b8%ba%e4%bb%a3%e7%a0%81%e5%8a%a9%e6%89%8b&amp;source=https%3a%2f%2fdownmars.github.io%2fzh%2fposts%2f2025_02_18-avante.nvim_with_deepseek_api%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 使用Avante.nvim作为代码助手 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fdownmars.github.io%2fzh%2fposts%2f2025_02_18-avante.nvim_with_deepseek_api%2f&title=%e4%bd%bf%e7%94%a8Avante.nvim%e4%bd%9c%e4%b8%ba%e4%bb%a3%e7%a0%81%e5%8a%a9%e6%89%8b"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 使用Avante.nvim作为代码助手 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fdownmars.github.io%2fzh%2fposts%2f2025_02_18-avante.nvim_with_deepseek_api%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 使用Avante.nvim作为代码助手 on whatsapp" href="https://api.whatsapp.com/send?text=%e4%bd%bf%e7%94%a8Avante.nvim%e4%bd%9c%e4%b8%ba%e4%bb%a3%e7%a0%81%e5%8a%a9%e6%89%8b%20-%20https%3a%2f%2fdownmars.github.io%2fzh%2fposts%2f2025_02_18-avante.nvim_with_deepseek_api%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 使用Avante.nvim作为代码助手 on telegram" href="https://telegram.me/share/url?text=%e4%bd%bf%e7%94%a8Avante.nvim%e4%bd%9c%e4%b8%ba%e4%bb%a3%e7%a0%81%e5%8a%a9%e6%89%8b&amp;url=https%3a%2f%2fdownmars.github.io%2fzh%2fposts%2f2025_02_18-avante.nvim_with_deepseek_api%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 使用Avante.nvim作为代码助手 on ycombinator" href="https://news.ycombinator.com/submitlink?t=%e4%bd%bf%e7%94%a8Avante.nvim%e4%bd%9c%e4%b8%ba%e4%bb%a3%e7%a0%81%e5%8a%a9%e6%89%8b&u=https%3a%2f%2fdownmars.github.io%2fzh%2fposts%2f2025_02_18-avante.nvim_with_deepseek_api%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><div id=tw-comment></div><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="light"?"light":"dark",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const s={src:"https://giscus.app/client.js","data-repo":"Downmars/Downmars.github.io","data-repo-id":"R_kgDONa-How","data-category":"Announcements","data-category-id":"DIC_kwDONa-Ho84CmJrl","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"zh-CN","data-loading":"lazy",crossorigin:"anonymous"},e=document.createElement("script");Object.entries(s).forEach(([t,n])=>e.setAttribute(t,n)),document.querySelector("#tw-comment").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme);const n=document.querySelector("#theme-toggle-float");n&&n.addEventListener("click",setGiscusTheme)})</script></article></main><footer class=footer><span>&copy; 2025 <a href=https://downmars.github.io/zh/>DLog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>(function(){var e,t,n,s=document.getElementsByTagName("code");for(n=0;n<s.length;){if(t=s[n],t.parentNode.tagName!=="PRE"&&t.childElementCount===0&&(e=t.textContent,/^\$[^$]/.test(e)&&/[^$]\$$/.test(e)&&(e=e.replace(/^\$/,"\\(").replace(/\$$/,"\\)"),t.textContent=e),/^\\\((.|\s)+\\\)$/.test(e)||/^\\\[(.|\s)+\\\]$/.test(e)||/^\$(.|\s)+\$$/.test(e)||/^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(e))){t.outerHTML=t.innerHTML;continue}n++}})()</script><script>(function(e,t){var s=document,o="script",n=s.createElement(o),i=s.getElementsByTagName(o)[0];n.src=e,t&&n.addEventListener("load",function(e){t(e)}),i.parentNode.insertBefore(n,i)})("/js/pangu.min.js",function(){pangu.spacingPage()})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML=`
            <img src="/images/copy.svg" 
                 alt="复制"
                 class="copy-icon"
                 width="16" 
                 height="16">
        `;function s(){t.innerHTML=`
                <img src="/images/check.svg" 
                     alt="已复制"
                     class="copied-icon"
                     width="16" 
                     height="16">
            `,setTimeout(()=>{t.innerHTML=`
                    <img src="/images/copy.svg" 
                         alt="复制"
                         class="copy-icon"
                         width="16" 
                         height="16">
                `},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script src=https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css><script src=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js></script><section class=totalcount>总计62.39k字</section><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js></script><script>hljs.highlightAll()</script><script src=/js/admonition.min.33aa3259ace2dcae05d7c1cebb7eddb5da4d69bc5b147e9e7a59839d96b71bc2.js defer></script></body></html>